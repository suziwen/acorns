<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.32.13"/><link rel="alternate" type="application/rss+xml" title="Your Site&#x27;s RSS Feed" href="/acorns/rss.xml"/><link rel="stylesheet" type="text/css" href="/acorns/libs/zoom/zoom.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/css/story-writer-markdown-default.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/css/story-writer-markdown-components.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/fonts/Webfonts/oswald/stylesheet.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/xsjfonts/fontstyles/zh.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/css/font-awesome.min.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/css/svg-with-js.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/css/gitalk.css?version=sculpting_1_1"/><link rel="icon" type="image/png" href="/acorns/favicon/favicon.png"/><link rel="mask-icon" href="/acorns/favicon/icon.svg" color="brown"/><link rel="icon" type="image/svg+xml" href="/acorns/favicon/favicon.svg"/><link rel="stylesheet" type="text/css" href="/acorns/fonts/Webfonts/aladin/stylesheet.css"/><link as="script" rel="preload" href="/acorns/webpack-runtime-b733388348fff5eacca1.js"/><link as="script" rel="preload" href="/acorns/framework-29ba174b433dc5858bed.js"/><link as="script" rel="preload" href="/acorns/545f34e4-5287ae6acbc1289e5dd0.js"/><link as="script" rel="preload" href="/acorns/252f366e-a013f1a16a738605ba7c.js"/><link as="script" rel="preload" href="/acorns/app-769f74fe8327c9fb4428.js"/><link as="script" rel="preload" href="/acorns/41aca86e-8b5629aa189eae61d7b0.js"/><link as="script" rel="preload" href="/acorns/05d954cf-b0068c1aacfd08ef52dc.js"/><link as="script" rel="preload" href="/acorns/d24d3e064b601c3fa92397aa9f8c5e3fc3365436-b3b52e1b95113f3f815e.js"/><link as="script" rel="preload" href="/acorns/component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-blog-post-js-fb9d310599f1bd239803.js"/><link as="fetch" rel="preload" href="/acorns/page-data/web/扒一扒迅雷的代码结构/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/acorns/page-data/sq/d/2682448919.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/acorns/page-data/sq/d/2682448919.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/acorns/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="116ag8">body{--theme-ui-colors-text:var(--theme-ui-colors-text,#000);--theme-ui-colors-background:var(--theme-ui-colors-background,#fff);--theme-ui-colors-primary:var(--theme-ui-colors-primary,#33e);--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,#119);--theme-ui-colors-muted:var(--theme-ui-colors-muted,#f6f6f6);--theme-ui-colors-accent:var(--theme-ui-colors-accent,#609);--theme-ui-colors-gray:var(--theme-ui-colors-gray,#777);--theme-ui-colors-meta:var(--theme-ui-colors-meta,#1f7199);--theme-ui-colors-built:var(--theme-ui-colors-built,#397300);--theme-ui-colors-literal:var(--theme-ui-colors-literal,#78A960);--theme-ui-colors-highlight:var(--theme-ui-colors-highlight,#ffffcc);color:var(--theme-ui-colors-text,#000);background-color:var(--theme-ui-colors-background,#fff);}body.theme-ui-dark{--theme-ui-colors-text:var(--theme-ui-colors-modes-dark-text,#fff);--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,#060606);--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,#3cf);--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,#e0f);--theme-ui-colors-muted:var(--theme-ui-colors-modes-dark-muted,#191919);--theme-ui-colors-gray:var(--theme-ui-colors-modes-dark-gray,#999);--theme-ui-colors-accent:var(--theme-ui-colors-modes-dark-accent,#c0f);--theme-ui-colors-meta:var(--theme-ui-colors-modes-dark-meta,#1f7199);--theme-ui-colors-built:var(--theme-ui-colors-modes-dark-built,#397300);--theme-ui-colors-literal:var(--theme-ui-colors-modes-dark-literal,#78A960);--theme-ui-colors-highlight:var(--theme-ui-colors-modes-dark-highlight,#29112c);}body.theme-ui-deep{--theme-ui-colors-text:var(--theme-ui-colors-modes-deep-text,hsl(210,50%,96%));--theme-ui-colors-background:var(--theme-ui-colors-modes-deep-background,hsl(230,25%,18%));--theme-ui-colors-primary:var(--theme-ui-colors-modes-deep-primary,hsl(260,100%,80%));--theme-ui-colors-secondary:var(--theme-ui-colors-modes-deep-secondary,hsl(290,100%,80%));--theme-ui-colors-accent:var(--theme-ui-colors-modes-deep-accent,hsl(290,100%,80%));--theme-ui-colors-muted:var(--theme-ui-colors-modes-deep-muted,hsla(230,20%,0%,20%));--theme-ui-colors-gray:var(--theme-ui-colors-modes-deep-gray,hsl(210,50%,60%));--theme-ui-colors-meta:var(--theme-ui-colors-modes-deep-meta,#1f7199);--theme-ui-colors-built:var(--theme-ui-colors-modes-deep-built,#397300);--theme-ui-colors-literal:var(--theme-ui-colors-modes-deep-literal,#78A960);--theme-ui-colors-highlight:var(--theme-ui-colors-modes-deep-highlight,hsl(260,20%,40%));}body.theme-ui-swiss{--theme-ui-colors-text:var(--theme-ui-colors-modes-swiss-text,hsl(10,20%,20%));--theme-ui-colors-background:var(--theme-ui-colors-modes-swiss-background,hsl(10,10%,98%));--theme-ui-colors-primary:var(--theme-ui-colors-modes-swiss-primary,hsl(10,80%,50%));--theme-ui-colors-secondary:var(--theme-ui-colors-modes-swiss-secondary,hsl(10,60%,50%));--theme-ui-colors-accent:var(--theme-ui-colors-modes-swiss-accent,hsl(250,60%,30%));--theme-ui-colors-muted:var(--theme-ui-colors-modes-swiss-muted,hsl(10,20%,94%));--theme-ui-colors-gray:var(--theme-ui-colors-modes-swiss-gray,hsl(10,20%,50%));--theme-ui-colors-meta:var(--theme-ui-colors-modes-swiss-meta,#1f7199);--theme-ui-colors-built:var(--theme-ui-colors-modes-swiss-built,#397300);--theme-ui-colors-literal:var(--theme-ui-colors-modes-swiss-literal,#78A960);--theme-ui-colors-highlight:var(--theme-ui-colors-modes-swiss-highlight,hsl(10,40%,90%));}</style><style data-emotion-css="1s13q8j">*{box-sizing:border-box;}body{margin:0;font-family:'Noto Serif SC',system-ui,'Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','NSimSun','仿宋体','SimSun','宋体',serif;line-height:1.5;font-weight:400;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="14i9w9y">.css-14i9w9y{min-height:100VH;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="css-14i9w9y"><style data-emotion-css="7zod2p">html{overflow-y:scroll;}body{margin:0;color:#000;background-color:#fff;}</style><div class="headroom-wrapper"><div style="position:relative;top:0;left:0;right:0;z-index:2;-webkit-transform:translate3D(0, 0, 0);-ms-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)" class="headroom headroom--unfixed"><style data-emotion-css="st9nty">.css-st9nty{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:var(--theme-ui-colors-background,#fff);border-bottom:1px solid;width:100%;}.css-st9nty h1{margin:0;}.css-st9nty ul{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;}.css-st9nty li{margin-left:16px;}</style><style data-emotion-css="luk5ak">.css-luk5ak{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:var(--theme-ui-colors-background,#fff);border-bottom:1px solid;width:100%;}.css-luk5ak h1{margin:0;}.css-luk5ak ul{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;}.css-luk5ak li{margin-left:16px;}</style><div class="css-luk5ak"><style data-emotion-css="16qc66y">.css-16qc66y{font-family:inherit;font-size:24px;color:inherit;background-color:transparent;width:32px;height:32px;padding:4px;margin:0;margin-left:16px;border:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;}.css-16qc66y:focus{outline:2px solid;}@media screen and (min-width:40em){.css-16qc66y{display:none;}}</style><button title="Toggle Menu" class="css-16qc66y"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button><style data-emotion-css="umt6is">.css-umt6is{margin-left:16px;font-weight:bold;font-size:1.5em;}.css-umt6is a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}</style><div class="css-umt6is"><a href="https://suziwen.github.io/acorns"><style data-emotion-css="11lk46i">.css-11lk46i{font-size:1.5em;vertical-align:text-bottom;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="css-11lk46i" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M206.135 23.568c-61.993.106-133.212 38.319-173.762 85.328 0 0 94.532-8.388 109.732 35.477 24.55 70.846-103.768 62.832-105.619 173.623-1.394 83.471 89.36 169.758 176.1 169.812 4.214 1.405 181.953 0 181.953 0 19.783-.28 20.606-22.551-48.812-36.637 145.592-147.853-86.742-159.073-85.456-45.779-17.956-18.803.577-99.816 97.692-95.832 32.91 23.48 51.817 27.373 88.56 19.284 6.982-1.537 12.05-25.665-5.462-27.064l-31.78-2.54c-28.106-25.677-34.818-36.477-6.67-57.463 68.87 18.058 77.047 12.076 77.016-13.33-.03-24.855-9.527-90.633-65.832-93.815-7.701-10.311 9.79-42.042-3.953-42.957-19.014-1.266-50.482 28.417-46.266 43.787-18.335 7.755-38.728 31.156-59.15 59.614-69.316 25.43-119.49 142.639-120.15 170.632-.579-182.435 153.242-180.594 140.216-244.77-14.07-69.324-66.992-97.458-118.357-97.37zM432.807 169.97c7.164 0 12.972 5.808 12.972 12.973 0 7.164-5.808 12.972-12.972 12.972-7.165 0-12.973-5.808-12.973-12.972 0-7.165 5.808-12.973 12.973-12.973z"></path></svg><style data-emotion-css="14uqj98">.css-14uqj98{font-family:aladin,sans-serif;font-weight:normal;}</style><span class="css-14uqj98">Scrat&#x27;s Acorn</span></a></div><style data-emotion-css="qwlsg7">.css-qwlsg7{display:none;margin-left:auto;}@media screen and (min-width:650px){.css-qwlsg7{display:block;}}</style><div class="css-qwlsg7"><ul><li><style data-emotion-css="1dbh7qa">.css-1dbh7qa{display:block;padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;color:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:14px;font-weight:bold;}.css-1dbh7qa.active{color:var(--theme-ui-colors-primary,#33e);}</style><style data-emotion-css="bpnmkh">.css-bpnmkh{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary,#33e);display:block;padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;color:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:14px;font-weight:bold;}.css-bpnmkh:hover{color:var(--theme-ui-colors-secondary,#119);}.css-bpnmkh.active{color:var(--theme-ui-colors-primary,#33e);}</style><a class="css-bpnmkh" href="/acorns/">主页</a></li><li><a class="css-bpnmkh" href="/acorns/tags">标签</a></li><li><a class="css-bpnmkh" href="/acorns/archives">归档</a></li><li><a class="css-bpnmkh" href="/acorns/search">搜索</a></li><li><a href="https://github.com/suziwen/markdownxiaoshujiang" target="_blank" rel="noopener noreferrer" class="css-1dbh7qa">Github</a></li></ul></div><style data-emotion-css="oiscss">.css-oiscss{margin-left:auto;margin-right:16px;}@media screen and (min-width:650px){.css-oiscss{margin-left:8px;}}</style><style data-emotion-css="ofhzqr">.css-ofhzqr{-webkit-appearance:none;-moz-appearance:none;appearance:none;font-family:inherit;font-size:14px;font-weight:bold;margin:0;padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;color:var(--theme-ui-colors-text,#000);background-color:var(--theme-ui-colors-muted,#f6f6f6);border:0;border-radius:2px;margin-left:auto;margin-right:16px;}.css-ofhzqr:focus{outline:2px solid;}@media screen and (min-width:650px){.css-ofhzqr{margin-left:8px;}}</style><button class="css-ofhzqr">default</button></div></div></div><style data-emotion-css="13pmxen">.css-13pmxen{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;}</style><div class="css-13pmxen"><style data-emotion-css="mzzgn5">.css-mzzgn5{width:initial;-webkit-flex:none;-ms-flex:none;flex:none;padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:32px;margin-top:64px;}@media screen and (min-width:650px){.css-mzzgn5{display:none;width:-webkit-min-content;width:-moz-min-content;width:min-content;margin-top:0;}}</style><div><style data-emotion-css="rrk7cz">.css-rrk7cz{position:fixed;top:0;left:0;bottom:0;z-index:1;min-width:0;width:256px;max-height:100vh;overflow-x:visible;overflow-y:auto;-webkit-overflow-scrolling:touch;-webkit-transition:-webkit-transform .2s ease-out;-webkit-transition:transform .2s ease-out;transition:transform .2s ease-out;-webkit-transform:translate(-100%);-ms-transform:translate(-100%);transform:translate(-100%);background-color:var(--theme-ui-colors-background,#fff);width:initial;-webkit-flex:none;-ms-flex:none;flex:none;padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:32px;margin-top:64px;}@media screen and (min-width:650px){.css-rrk7cz{position:-webkit-sticky;position:sticky;bottom:auto;max-height:none;-webkit-transform:none;-ms-transform:none;transform:none;background-color:transparent;}}@media screen and (min-width:650px){.css-rrk7cz{display:none;width:-webkit-min-content;width:-moz-min-content;width:min-content;margin-top:0;}}</style><div class="css-rrk7cz"><style data-emotion-css="1rvtlej">.css-1rvtlej{list-style:none;padding:0;margin:0;}</style><ul class="css-1rvtlej"><li><style data-emotion-css="70qvj9">.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-70qvj9"><a class="css-bpnmkh" href="/acorns/">主页</a></div></li><li><div class="css-70qvj9"><a class="css-bpnmkh" href="/acorns/tags">标签</a></div></li><li><div class="css-70qvj9"><a class="css-bpnmkh" href="/acorns/archives">归档</a></div></li><li><div class="css-70qvj9"><a class="css-bpnmkh" href="/acorns/search">搜索</a></div></li><li><div class="css-70qvj9"><a class="css-1dbh7qa" href="https://github.com/suziwen/markdownxiaoshujiang" target="_blank" rel="noopener noreferrer">Github</a></div></li></ul></div></div><style data-emotion-css="2mmr94">.css-2mmr94{position:fixed;max-width:210px;z-index:1;display:none;opacity:0.3;-webkit-transition:opacity .5s;transition:opacity .5s;top:0;bottom:0;left:initial;right:0;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media screen and (min-width:650px){.css-2mmr94{display:none;left:0;right:initial;}}@media screen and (min-width:850px){.css-2mmr94{display:none;}}@media screen and (min-width:1200px){.css-2mmr94{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-2mmr94:hover{opacity:1;}.css-2mmr94 .toc-list{background-color:var(--theme-ui-colors-background,#fff);list-style-type:none;margin:0;padding:0;padding-left:16px;padding-top:16px;}.css-2mmr94 .toc-list .toc-list-item{line-height:1.2em;padding-bottom:16px;}.css-2mmr94 .toc-list .toc-list-item:last-child{padding-bottom:0;}.css-2mmr94 .toc-list .toc-link{color:var(--theme-ui-colors-gray,#777);-webkit-text-decoration:none;text-decoration:none;}.css-2mmr94 .toc-list .is-active-link{color:var(--theme-ui-colors-text,#000);font-weight:bold;}</style><div class="toc css-2mmr94"></div><style data-emotion-css="judnid">.css-judnid{-webkit-flex:1;-ms-flex:1;flex:1;z-index:0;overflow:hidden;}</style><div class="css-judnid"><style data-emotion-css="16jkoar">.css-16jkoar{padding:16px;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;min-height:100%;max-width:900px;}@media screen and (min-width:650px){.css-16jkoar{padding:64px;}}</style><div class="css-16jkoar"><section><style data-emotion-css="bzcaho">.css-bzcaho{position:fixed;top:0;left:0;right:0;width:100%;height:3px;background:var(--theme-ui-colors-highlight,#ffffcc);z-index:999;-webkit-transform-origin:0;-ms-transform-origin:0;transform-origin:0;}@media screen and (min-width:1200px){.css-bzcaho{display:none;}}</style><div style="transform:scaleX(0) translateZ(0)" class="css-bzcaho"></div><style data-emotion-css="1yzwfkz">.css-1yzwfkz{cursor:pointer;-webkit-transition:0.35s opacity;transition:0.35s opacity;position:fixed;bottom:1rem;right:1.5rem;height:48px;width:48px;overflow:hidden;z-index:999;display:none;opacity:0;pointer-events:none;}@media screen and (min-width:1200px){.css-1yzwfkz{display:block;}}.css-1yzwfkz:hover #arrow{opacity:1;}</style><div class="css-1yzwfkz"><style data-emotion-css="tfdnh9">.css-tfdnh9 #arrow{-webkit-transition:0.35s all;transition:0.35s all;fill:var(--theme-ui-colors-gray,#777);-webkit-transform:scale(0.22) translate(48px,48px);-ms-transform:scale(0.22) translate(48px,48px);transform:scale(0.22) translate(48px,48px);}.css-tfdnh9 #progress{stroke:var(--theme-ui-colors-text,#000);}.css-tfdnh9 #outline{stroke:var(--theme-ui-colors-gray,#777);}</style><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 35 35" xml:space="preserve" class="css-tfdnh9"><path id="outline" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path><path id="arrow" d="M3.352,48.296l28.56-28.328l28.58,28.347c0.397,0.394,0.917,0.59,1.436,0.59c0.52,0,1.04-0.196,1.436-0.59   c0.793-0.787,0.793-2.062,0-2.849l-29.98-29.735c-0.2-0.2-0.494-0.375-0.757-0.475c-0.75-0.282-1.597-0.107-2.166,0.456   L0.479,45.447c-0.793,0.787-0.793,2.062,0,2.849C1.273,49.082,2.558,49.082,3.352,48.296z"></path><path fill="none" id="progress" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path></svg></div><style data-emotion-css="1tr4euk">.css-1tr4euk{font-family:oswald,sans-serif;}</style><p class="css-1tr4euk">February 09, 2021</p></section><style data-emotion-css="1ud4cyp">.css-1ud4cyp{box-sizing:border-box;margin:0;min-width:0;font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;font-weight:700;line-height:1.25;}</style><h1 class="css-1ud4cyp">扒一扒迅雷的代码结构</h1><section class="post-body"><style data-emotion-css="1jye6mf">.css-1jye6mf{font-family:'Noto Serif SC',system-ui,'Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','NSimSun','仿宋体','SimSun','宋体',serif;line-height:1.5;font-weight:400;}.css-1jye6mf root{font-family:'Noto Serif SC',system-ui,'Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','NSimSun','仿宋体','SimSun','宋体',serif;line-height:1.5;font-weight:400;}.css-1jye6mf h1{color:var(--theme-ui-colors-text,#000);font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;line-height:1.25;font-weight:700;font-size:32px;}.css-1jye6mf h2{color:var(--theme-ui-colors-text,#000);font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;line-height:1.25;font-weight:700;font-size:24px;}.css-1jye6mf h3{color:var(--theme-ui-colors-text,#000);font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;line-height:1.25;font-weight:700;font-size:20px;}.css-1jye6mf h4{color:var(--theme-ui-colors-text,#000);font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;line-height:1.25;font-weight:700;font-size:16px;}.css-1jye6mf h5{color:var(--theme-ui-colors-text,#000);font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;line-height:1.25;font-weight:700;font-size:14px;}.css-1jye6mf h6{color:var(--theme-ui-colors-text,#000);font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;line-height:1.25;font-weight:700;font-size:12px;}.css-1jye6mf p{color:var(--theme-ui-colors-text,#000);font-family:'Noto Serif SC',system-ui,'Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','NSimSun','仿宋体','SimSun','宋体',serif;font-weight:400;line-height:1.5;}.css-1jye6mf a{color:var(--theme-ui-colors-primary,#33e);}.css-1jye6mf a:hover{color:var(--theme-ui-colors-secondary,#119);}.css-1jye6mf pre{font-family:'Roboto Mono',monospace;overflow-x:auto;}.css-1jye6mf pre code{color:inherit;}.css-1jye6mf code{font-family:'Roboto Mono',monospace;color:var(--theme-ui-colors-secondary,#119);font-size:14px;}.css-1jye6mf table{width:100%;margin-top:32px;margin-bottom:32px;border-collapse:separate;border-spacing:0;}.css-1jye6mf table th,.css-1jye6mf table td{text-align:left;padding-top:4px;padding-bottom:4px;padding-right:4px;padding-left:0;border-color:var(--theme-ui-colors-muted,#f6f6f6);border-bottom-style:solid;}.css-1jye6mf th{vertical-align:bottom;border-bottom-width:2px;}.css-1jye6mf td{vertical-align:top;border-bottom-width:1px;}.css-1jye6mf img{max-width:100%;}.css-1jye6mf Container{padding:16px;max-width:1024px;}.css-1jye6mf inlineCode{font-family:'Roboto Mono',monospace;color:var(--theme-ui-colors-secondary,#119);background-color:var(--theme-ui-colors-muted,#f6f6f6);}.css-1jye6mf hr{border:0;border-bottom:1px solid;border-color:var(--theme-ui-colors-muted,#f6f6f6);}.css-1jye6mf blockquote{padding:16px;margin-top:16px;margin-bottom:16px;margin-left:8px;margin-right:16px;border-left-width:5px;border-left-style:solid;border-left-color:var(--theme-ui-colors-text,#000);background-color:var(--theme-ui-colors-muted,#f6f6f6);}.css-1jye6mf .xiaoshujiang_pre{white-space:pre-wrap;font-family:'Roboto Mono',monospace;tab-size:4;}.css-1jye6mf .xiaoshujiang_pre .ol_linenums{margin-top:0;}.css-1jye6mf .hljs{padding:8px;color:var(--theme-ui-colors-text,#000);background-color:var(--theme-ui-colors-muted,#f6f6f6);}.css-1jye6mf .hljs .hljs-subst{color:var(--theme-ui-colors-text,#000);}.css-1jye6mf .hljs .hljs-comment{color:var(--theme-ui-colors-gray,#777);}.css-1jye6mf .hljs .hljs-keyword,.css-1jye6mf .hljs .hljs-attribute,.css-1jye6mf .hljs .hljs-selector-tag,.css-1jye6mf .hljs .hljs-meta-keyword,.css-1jye6mf .hljs .hljs-doctag,.css-1jye6mf .hljs .hljs-name{font-weight:bold;}.css-1jye6mf .hljs .hljs-type,.css-1jye6mf .hljs .hljs-string,.css-1jye6mf .hljs .hljs-number,.css-1jye6mf .hljs .hljs-selector-id,.css-1jye6mf .hljs .hljs-selector-class,.css-1jye6mf .hljs .hljs-quote,.css-1jye6mf .hljs .hljs-template-tag,.css-1jye6mf .hljs .hljs-deletion{color:var(--theme-ui-colors-primary,#33e);}.css-1jye6mf .hljs .hljs-title,.css-1jye6mf .hljs .hljs-section{color:var(--theme-ui-colors-primary,#33e);font-weight:bold;}.css-1jye6mf .hljs .hljs-regexp,.css-1jye6mf .hljs .hljs-symbol,.css-1jye6mf .hljs .hljs-variable,.css-1jye6mf .hljs .hljs-template-variable,.css-1jye6mf .hljs .hljs-link,.css-1jye6mf .hljs .hljs-selector-attr,.css-1jye6mf .hljs .hljs-selector-pseudo{color:var(--theme-ui-colors-secondary,#119);}.css-1jye6mf .hljs .hljs-literal{color:var(--theme-ui-colors-literal,#78A960);}.css-1jye6mf .hljs .hljs-built_in,.css-1jye6mf .hljs .hljs-bullet,.css-1jye6mf .hljs .hljs-code,.css-1jye6mf .hljs .hljs-addition{color:var(--theme-ui-colors-built,#397300);}.css-1jye6mf .hljs .hljs-meta{color:var(--theme-ui-colors-meta,#1f7199);}.css-1jye6mf .hljs .hljs-meta-string{color:var(--theme-ui-colors-accent,#609);}.css-1jye6mf .hljs .hljs-emphasis{font-style:italic;}.css-1jye6mf .hljs .hljs-strong{font-weight:bold;}</style><div class="css-1jye6mf"><div><style></style>


	<div class="preview html_preview xsj_export_zip"><div style="overflow: hidden; position: absolute; top: 0; height: 1px; width: auto; padding: 0; border: 0; margin: 0; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><svg><defs id="MathJax_SVG_glyphs"/><defs xmlns="http://www.w3.org/2000/svg"><filter xmlns="http://www.w3.org/2000/svg" id="dropshadow" height="130%">      <fegaussianblur in="SourceAlpha" stddeviation="3"/>       <feoffset dx="2" dy="2" result="offsetblur"/>       <femerge>         <femergenode/>        <femergenode in="SourceGraphic"/>       </femerge>    </filter><filter id="editing-stripe-bk" filterunits="userSpaceOnUse" x="-100%" y="-100%" width="300%" height="300%"><feflood flood-color="#700f0f" result="flood1"/><feflood flood-color="#fff" flood-opacity="0.5" result="flood2"/><feimage xlink:href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAwcHgiIGhlaWdodD0iMTAwMHB4Ij48ZGVmcz48cGF0dGVybiBpZD0icGF0dGVybiIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQiIGhlaWdodD0iNCI+PHBhdGggZD0iTSAtNCAtNCBMIDggOCBNIC04IC00IEwgNCA4IE0gLTQgLTggTCA4IDQiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI3BhdHRlcm4pIi8+PC9zdmc+" x="0" y="0" width="2000" height="1000" result="image"/><fetile in="image" result="tile"/><fecomposite operator="in" in="flood1" in2="tile" result="tile2"/><fegaussianblur in="SourceAlpha" stddeviation="10" result="blur"/><fecomposite operator="in" in="tile2" in2="blur" result="cloud"/><femorphology operator="dilate" radius="2" in="SourceAlpha" result="dilate"/><fecomposite operator="in" in="flood2" in2="dilate" result="base"/><femerge><femergenode in="cloud"/><femergenode in="base"/><femergenode in="SourceGraphic"/></femerge></filter></defs></svg></div><blockquote class="markdown_blockquote">
<p class="xsj_paragraph xsj_paragraph_level_1"><span class="xsj_placeholder_span"></span>本文为转载文章, 仅用于自己的知识管理收集, 如果涉及侵权,请联系 <a href="mailto:suziwen1@gmail.com" class="xsj_link xsj_auto_link">suziwen1@gmail.com</a>,会第一时间删除<br>
收集该文章,并非代表本人支持文中观点,只是觉得文章内容容易引起思考,讨论,有它自有的价值</p>
<p class="xsj_paragraph xsj_paragraph_level_1"><span class="xsj_placeholder_span"></span>转载自: <a href="https://juejin.cn/post/6890344584078721031" class="xsj_link xsj_auto_link">https://juejin.cn/post/6890344584078721031</a></p>
</blockquote>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="toc mindmap_toc mindmap_container" data-vdom-skip="true" data-hash="027e180d0e0192b14ed7e9b12d54482c_mindmap_toc"><div class="xsj_mindmap xsj_mindmap_toc"><svg id="xsj_mindmap_toc_1627621655915" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="xsj_svg_viewbox" style="max-width:1050px;max-height:565px;" viewbox="0 0 1050 565" width="100%" height="100%"><g transform="translate(326,304.5) scale(1)"><g class="markmap-link" style="fill:none;"><path stroke="#990099" stroke-width="2" d="M258,-170.5 L263,-170.5 C299,-170.5 294,-94.5 330,-94.5 L332,-94.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(258, -170.5)" points="0,-2 5,0 0,2 -5,0" style="fill: white;"/><g transform="translate(330,-94.5)"><path class="markmap-node-path" d="M0,0L89,0" stroke-width="2" stroke="#990099"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(89, 0)" points="0,-1 5,0 0,1 -5,0" style="fill: rgb(153, 0, 153);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#990099" stroke-width="2" d="M258,-170.5 L263,-170.5 C299,-170.5 294,-168.5 330,-168.5 L332,-168.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(258, -170.5)" points="0,-2 5,0 0,2 -5,0" style="fill: white;"/><g transform="translate(330,-168.5)"><path class="markmap-node-path" d="M0,0L29,0" stroke-width="2" stroke="#990099"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(29, 0)" points="0,-1 5,0 0,1 -5,0" style="fill: rgb(153, 0, 153);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#990099" stroke-width="2" d="M258,-170.5 L263,-170.5 C299,-170.5 294,-242.5 330,-242.5 L332,-242.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(258, -170.5)" points="0,-2 5,0 0,2 -5,0" style="fill: white;"/><g transform="translate(330,-242.5)"><path class="markmap-node-path" d="M0,0L119,0" stroke-width="2" stroke="#990099"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(119, 0)" points="0,-1 5,0 0,1 -5,0" style="fill: rgb(153, 0, 153);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#109618" stroke-width="1" d="M410,53.5 L415,53.5 C451,53.5 446,90.5 482,90.5 L484,90.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(410, 53.5)" points="0,-1 5,0 0,1 -5,0" style="fill: white;"/><g transform="translate(482,90.5)"><path class="markmap-node-path" d="M0,0L193,0" stroke-width="1" stroke="#109618"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(193, 0)" points="0,-0.5 5,0 0,0.5 -5,0" style="fill: rgb(16, 150, 24);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#109618" stroke-width="1" d="M410,53.5 L415,53.5 C451,53.5 446,16.5 482,16.5 L484,16.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(410, 53.5)" points="0,-1 5,0 0,1 -5,0" style="fill: white;"/><g transform="translate(482,16.5)"><path class="markmap-node-path" d="M0,0L67,0" stroke-width="1" stroke="#109618"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(67, 0)" points="0,-0.5 5,0 0,0.5 -5,0" style="fill: rgb(16, 150, 24);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#109618" stroke-width="2" d="M278,14.5 L283,14.5 C319,14.5 314,53.5 350,53.5 L352,53.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(278, 14.5)" points="0,-2 5,0 0,2 -5,0" style="fill: white;"/><g transform="translate(350,53.5)"><path class="markmap-node-path" d="M0,0L59,0" stroke-width="2" stroke="#109618"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(59, 0)" points="0,-1 5,0 0,1 -5,0" style="fill: rgb(16, 150, 24);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#109618" stroke-width="2" d="M278,14.5 L283,14.5 C319,14.5 314,-20.5 350,-20.5 L352,-20.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(278, 14.5)" points="0,-2 5,0 0,2 -5,0" style="fill: white;"/><g transform="translate(350,-20.5)"><path class="markmap-node-path" d="M0,0L44,0" stroke-width="2" stroke="#109618"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(44, 0)" points="0,-1 5,0 0,1 -5,0" style="fill: rgb(16, 150, 24);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#dc3912" stroke-width="4" d="M90,-28.299999999999997 L95,-28.299999999999997 C167,-28.299999999999997 162,170.5 198,170.5 L200,170.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(90, -28.299999999999997)" points="0,-3 5,0 0,3 -5,0" style="fill: white;"/><g transform="translate(198,170.5)"><path class="markmap-node-path" d="M0,0L79,0" stroke-width="4" stroke="#dc3912"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(79, 0)" points="0,-2 5,0 0,2 -5,0" style="fill: rgb(220, 57, 18);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#ff9900" stroke-width="4" d="M90,-28.299999999999997 L95,-28.299999999999997 C167,-28.299999999999997 162,92.5 198,92.5 L200,92.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(90, -28.299999999999997)" points="0,-3 5,0 0,3 -5,0" style="fill: white;"/><g transform="translate(198,92.5)"><path class="markmap-node-path" d="M0,0L39,0" stroke-width="4" stroke="#ff9900"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(39, 0)" points="0,-2 5,0 0,2 -5,0" style="fill: rgb(255, 153, 0);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#109618" stroke-width="4" d="M90,-28.299999999999997 L95,-28.299999999999997 C167,-28.299999999999997 162,14.5 198,14.5 L200,14.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(90, -28.299999999999997)" points="0,-3 5,0 0,3 -5,0" style="fill: white;"/><g transform="translate(198,14.5)"><path class="markmap-node-path" d="M0,0L79,0" stroke-width="4" stroke="#109618"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(79, 0)" points="0,-2 5,0 0,2 -5,0" style="fill: rgb(16, 150, 24);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#990099" stroke-width="4" d="M90,-28.299999999999997 L95,-28.299999999999997 C167,-28.299999999999997 162,-170.5 198,-170.5 L200,-170.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(90, -28.299999999999997)" points="0,-3 5,0 0,3 -5,0" style="fill: white;"/><g transform="translate(198,-170.5)"><path class="markmap-node-path" d="M0,0L59,0" stroke-width="4" stroke="#990099"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(59, 0)" points="0,-2 5,0 0,2 -5,0" style="fill: rgb(153, 0, 153);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#3366cc" stroke-width="4" d="M90,-28.299999999999997 L95,-28.299999999999997 C167,-28.299999999999997 162,-248.5 198,-248.5 L200,-248.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(90, -28.299999999999997)" points="0,-3 5,0 0,3 -5,0" style="fill: white;"/><g transform="translate(198,-248.5)"><path class="markmap-node-path" d="M0,0L39,0" stroke-width="4" stroke="#3366cc"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(39, 0)" points="0,-2 5,0 0,2 -5,0" style="fill: rgb(51, 102, 204);"/></g></g><g class="markmap-node markmap-root-node" transform="translate(-234,-28.299999999999997)"><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(323, 0)" points="0,-3 5,0 0,3 -5,0" style="fill: rgb(51, 102, 204);"/><g transform="translate(1, -34)"><rect class="markmap-node-rect" rx="10" ry="10" height="68" width="322" fill="rgb(78, 156, 255)" stroke="#3366cc" stroke-width="1"/><text class="markmap-node-text" alignment-baseline="middle" x="162" y="38" text-anchor="middle" style="font: bolder 30px sans-serif; fill-opacity: 1; fill: rgb(255, 255, 255);">扒一扒迅雷的代码结构</text></g></g><g class="markmap-node" transform="translate(198,170.5)"><a xlink:href="#e585b3e4ba8ee68891e4bbac_12"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(220, 57, 18); stroke: white; stroke-width: 2px; cursor: pointer;">关于我们</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(220, 57, 18); cursor: pointer;">关于我们</text></a></g><g class="markmap-node" transform="translate(198,92.5)"><a xlink:href="#e680bbe7bb93_11"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(255, 153, 0); stroke: white; stroke-width: 2px; cursor: pointer;">总结</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(255, 153, 0); cursor: pointer;">总结</text></a></g><g class="markmap-node" transform="translate(198,14.5)"><a xlink:href="#e8bf9be7a88be7bb93e69e84_6"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(16, 150, 24); stroke: white; stroke-width: 2px; cursor: pointer;">进程结构</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(16, 150, 24); cursor: pointer;">进程结构</text></a></g><g class="markmap-node" transform="translate(350,53.5)"><a xlink:href="#e9809ae4bfa1e696b9e5bc8f_8"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(16, 150, 24); stroke: white; stroke-width: 2px; cursor: pointer;">通信方式</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(16, 150, 24); cursor: pointer;">通信方式</text></a></g><g class="markmap-node" transform="translate(482,90.5)"><a xlink:href="#e5928c20downloadsdk20e79a84e9809ae8aeafe696b9e5bc8f_10"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(16, 150, 24); stroke: white; stroke-width: 2px; cursor: pointer;">和 DownloadSDK 的通讯方式</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(16, 150, 24); cursor: pointer;">和 DownloadSDK 的通讯方式</text></a></g><g class="markmap-node" transform="translate(482,16.5)"><a xlink:href="#e5898de7abafe79a8420ipc_9"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(16, 150, 24); stroke: white; stroke-width: 2px; cursor: pointer;">前端的 ipc</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(16, 150, 24); cursor: pointer;">前端的 ipc</text></a></g><g class="markmap-node" transform="translate(350,-20.5)"><a xlink:href="#e8bf9be7a88be6a091_7"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(16, 150, 24); stroke: white; stroke-width: 2px; cursor: pointer;">进程树</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(16, 150, 24); cursor: pointer;">进程树</text></a></g><g class="markmap-node" transform="translate(198,-170.5)"><a xlink:href="#e68b86e8a7a3e7af87_2"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(153, 0, 153); stroke: white; stroke-width: 2px; cursor: pointer;">拆解篇</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(153, 0, 153); cursor: pointer;">拆解篇</text></a></g><g class="markmap-node" transform="translate(330,-94.5)"><a xlink:href="#e4b880e782b9e998b2e5bea1e68eaae696bd_5"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(153, 0, 153); stroke: white; stroke-width: 2px; cursor: pointer;">一点防御措施</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(153, 0, 153); cursor: pointer;">一点防御措施</text></a></g><g class="markmap-node" transform="translate(330,-168.5)"><a xlink:href="#e5bc80e692ac_4"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(153, 0, 153); stroke: white; stroke-width: 2px; cursor: pointer;">开撬</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(153, 0, 153); cursor: pointer;">开撬</text></a></g><g class="markmap-node" transform="translate(330,-242.5)"><a xlink:href="#e4b880e782b9e8838ce699afe79fa5e8af86e8afb4e6988e_3"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(153, 0, 153); stroke: white; stroke-width: 2px; cursor: pointer;">一点背景知识说明</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(153, 0, 153); cursor: pointer;">一点背景知识说明</text></a></g><g class="markmap-node" transform="translate(198,-248.5)"><a xlink:href="#e8838ce699af_1"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(51, 102, 204); stroke: white; stroke-width: 2px; cursor: pointer;">背景</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(51, 102, 204); cursor: pointer;">背景</text></a></g><g class="annotation-group"><g class="annotations"/></g></g></svg></div></div><p></p>
<h1 class="xsj_heading_hash xsj_heading xsj_heading_h1" id="e8838ce699af_1"><div class="xiaoshujiang_element xsj_anchor">
  <a name="e8838ce699af_1" class="blank_anchor_name"></a><a id="e8838ce699af_1" class="blank_anchor_id"></a><a name="背景" class="blank_anchor_name"></a><a id="背景" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">背景</span></h1>
<p class="xsj_paragraph xsj_paragraph_level_0">之前扒过飞书的源码，从代码设计架构层面里里外外学习一把，飞书还是挺“大方”的，源码在客户端和网页端都一览无余，不过好像新版本已经看不到了。相关的文章由于在内网技术论坛发过了不便于再发出来（泄露内部资料会被查水表的），因此这次周末抽时间换一个鸟窝来掏一掏。</p>
<p class="xsj_paragraph xsj_paragraph_level_0">一不小心发现迅雷的客户端竟然也是基于 Electron 开发的，那代码就好扒拉了。（先吐槽一下这新版本的某lei为什么要抄钉钉的界面，这些年某lei都不知道自己要干什么了，每个版本都招人嫌）</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:1024px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 66.796875%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='267'%3e%3cpath%20d='M0%20134v133h37V0H0v134m210-90v8h15c12%200%2014%200%2016-2h2c1%203%2040%203%2040%200%200-1-6-2-8-1a159%20159%200%2001-34-3c-1%200-2%200-1-1l2-1c2%200%202-1%202-3l1-5c1-1%201-1-1-1l-2%201-6%203%201-2%202-2h-5l-5%201v1h-1c0-2-2-2-9-2h-9v9m84-8l-4%201-5-1v4c0%203%201%204%202%204v2l-1%201%204%203c2%202%204%203%204%201h2c1%201%202%200%203-1h6l7%202h6V35h-12l-12%201M48%2039v1l-2%201c-3%201-4%205-2%208h9v-9h-1l-2%201v-1c1-2%200-2-2-1M4%2064v4h30v-7l-15-1H4v4m206%2040v32l1%2030%2041%201%2054-1h12v-62l-54-1-54%201M95%20121v8h16v-15l-8-1h-8v8m185-2l-2%201h-1l-11-1c-11%200-11%200-11%207l-1%203v1l1%202-7%201c-7%200-7%200-8%203%200%203%200%204%204%207l4%202v-2l1%201%202-1c4-3%204-3%204%205v7h9l8%201c0%202%203%203%204%202s0-2-2-2c-2-1-3-3-1-3l3-2c2-2%204-1%202%201-1%202%202%206%205%205%201-1%201-1-1-3-2-1-3-4-1-3s3%200%203-6l-1-5v-2l1-4c-1-3%202-5%208-5%203%200%203%200%203%202-1%201%200%202%201%202v-5c2%200%203-2%201-3l-2%201h-2c-1-1-5-1-10%201-2%201-2-2%200-4%202-3%201-5-3-4m74%20138l1%206h16c17%200%2025-1%2022-2l-2-1v-8h-37v5'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/36272c76046c95a7075e247f2c43bcee/2bef9/1612889823102.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823102.png" data-src="./images/1612889823102.png" class="front_image" loading="lazy" srcSet="/acorns/static/36272c76046c95a7075e247f2c43bcee/6f3f2/1612889823102.png 256w,
/acorns/static/36272c76046c95a7075e247f2c43bcee/01e7c/1612889823102.png 512w,
/acorns/static/36272c76046c95a7075e247f2c43bcee/2bef9/1612889823102.png 1024w,
/acorns/static/36272c76046c95a7075e247f2c43bcee/84ee5/1612889823102.png 1076w" sizes="(max-width: 1024px) 100vw, 1024px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<h1 class="xsj_heading_hash xsj_heading xsj_heading_h1" id="e68b86e8a7a3e7af87_2"><div class="xiaoshujiang_element xsj_anchor">
  <a name="e68b86e8a7a3e7af87_2" class="blank_anchor_name"></a><a id="e68b86e8a7a3e7af87_2" class="blank_anchor_id"></a><a name="拆解篇" class="blank_anchor_name"></a><a id="拆解篇" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">拆解篇</span></h1>
<h2 class="xsj_heading_hash xsj_heading xsj_heading_h2" id="e4b880e782b9e8838ce699afe79fa5e8af86e8afb4e6988e_3"><div class="xiaoshujiang_element xsj_anchor">
  <a name="e4b880e782b9e8838ce699afe79fa5e8af86e8afb4e6988e_3" class="blank_anchor_name"></a><a id="e4b880e782b9e8838ce699afe79fa5e8af86e8afb4e6988e_3" class="blank_anchor_id"></a><a name="一点背景知识说明" class="blank_anchor_name"></a><a id="一点背景知识说明" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">一点背景知识说明</span></h2>
<p class="xsj_paragraph xsj_paragraph_level_0">基于前端技术栈 Electron 构建的桌面应用，本质上都是加载本地前端资源文件，而这些文件通常是用 asar 格式（类似 windows iso 镜像）的方式进行打包，然后运行时再通过挂在到内存实现前端资源文件 js/css/html/img 等文件的读取。</p>
<p class="xsj_paragraph xsj_paragraph_level_0">这么说 asar 想办法挂载就可以随意阅读源码了吗？不是的。同时 asar 会提供一套通过加密方式防止任意解压，飞书就是这么做的，直接通过 asar extract 的方式无法解包出来。但是由于 node 端和 rust 构建的二进制文件如果打包到 asar 会导致无法链接到这些二进制文件，因此需要从 asar 中独立出来，因而导致有部分 js 文件仍然裸露在外面。不过即便没有任何 js 是暴露的仍然是有办法爆破的。</p>
<p class="xsj_paragraph xsj_paragraph_level_0">啊，跑偏了，先不谈飞书，今天的主菜是迅雷。</p>
<p class="xsj_paragraph xsj_paragraph_level_0">那迅雷的前端资源文件是怎么管理的呢？</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:716px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 94.53125%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='379'%3e%3cpath%20d='M99%207c0%203%200%203%201%202h5l2%201%201-1h8c2%201%205%200%206-1h1l2%202c2%200%202-3%200-5h-2c-1%201-11%202-13%200l-3%201c-3%201-3%201-3-1h-1l-1%201c-1-3-3-2-3%201M31%2052c-2%203-1%205%202%205l3-2%201%201h5c0%202%200%202%202%201h4l2-1h1l2%201%201-1h7c0-2%200-2%201-1h3c2-1-2-2-10-2l-5-1h-2c-1%202-13%202-14%200h-3m9%2012c0%201%200%202-1%201h-9c-1%202%201%204%203%203h1l1-1h3l3%201h20c2%202%204%200%204-3s0-3-1-2c-1%202-7%202-7%200-1-1-1-1-3%201l-2%203v-3c0-2%200-2-1-1-2%202-9%202-10%200-1-1-1-1-1%201m0%2082h-3l-2%201h-2c-1-1-3%200-3%202h2l5%201h1a89%2089%200%200024%200l1-1h2c0-2-1-3-3-2h-5c-1%200-2%200-1-1l1-1-2%201h-3l-1%201h-5c-2%200-2%200-1-1l1-1c-2-1-5%200-6%201m16%2059c0%201%200%202-1%201s-19-1-20%201h-1c0-2%200-2-1-1h-1l-1-1-1%202c0%202%201%202%205%202l6%201h2c0-1%202-2%203-1l2-1h3l8%201c6%200%207-1%207-2l-5-1-4-2c-1-1-1-1-1%201m-26%2014a4667%204667%200%200120%201c0-2%200-2%201-1%201%202%2014%202%2016%200%201-1%201-1-1-1H32l-1-1-1%202m207%2020v5h6l3%201%203-1v-1l1%201h4l2-1c-3-1-2-3%201-3%202%200%202%200%201%201-2%201-2%204-1%204l1-2h2c1%201%203%202%208%201l1-2c0-3-1-3-3-3-3%200-3%200-3%202v2c-2%200-3-1-2-3%201-1%200-1-5-1s-6%200-6%202l-1-1-3-2-3%202-1%203v-3c0-2-4-3-5-1M45%20264h-3l-2%201h-1l-4-1c-5%200-5%200-5%202s0%202%201%201l1-2v4l1-2%201-1c0%201%201%202%204%202%202%200%203-1%203-2h1l2%202%201-2c1-1%201-1%201%201v2l1-2%201-1c0%202%203%203%203%201l1-1%201%201%202%201%203%201c1%201%201%201%202-1l1-1c0%201%209%201%209-1l1%201c1%201%201%201%201-1s-1-2-4-2l-4%201-1%201-1-1-1-1-2%201-1%201-2-1-1-1c-5%201-8%200-7-1%200-2-1-1-3%201m10%2046l-3%201-3%201h-3l1%202%203%201h11l9-1h8l1%201%201-2c0-2-2-3-3-1l-2%201v-1h-2l-3-1c0-2-2-3-2-1-1%202-11%202-11%200l-1-1-1%201m-22%2024c0%201%200%202-1%201%200-2-2-1-2%201s1%202%205%202l5-1h15l2%201%202%202%201-2%201-1%202%201c1-1%200-4-2-4l-1-1c-1-1-1%200-1%201%200%203-1%204-2%202s-7-2-8%200c-1%201-1%201-1-1%200-1%200-2-1-1-3%201-5%201-5-1h-1c-1%202-6%202-6%200s-2-1-2%201m0%2012c0%201%200%202-1%201%200-2-2-1-2%201s9%203%2010%201h7l4%201%204-1%202%201%202%202%201-2%201-1c0%201%205%201%206-1%201-1%201-1%201%201v2l1-2%201-1c0%202%205%202%205%200s-3-3-3-1h-6l-3%201v-1h-6l-5-1h-7c-2%201-3%201-3-1h-1c-1%202-5%202-6%200%200-2-2-1-2%201'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/a159ba7e1059cd0e639041ad581a4adb/6bbf7/1612889823126.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823126.png" data-src="./images/1612889823126.png" class="front_image" loading="lazy" srcSet="/acorns/static/a159ba7e1059cd0e639041ad581a4adb/6f3f2/1612889823126.png 256w,
/acorns/static/a159ba7e1059cd0e639041ad581a4adb/01e7c/1612889823126.png 512w,
/acorns/static/a159ba7e1059cd0e639041ad581a4adb/6bbf7/1612889823126.png 716w" sizes="(max-width: 716px) 100vw, 716px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">是在下想多了，不好意思，迅雷梅川酷子，都摊着在那呢，根本没用 asar 打包/加密。</p>
<h2 class="xsj_heading_hash xsj_heading xsj_heading_h2" id="e5bc80e692ac_4"><div class="xiaoshujiang_element xsj_anchor">
  <a name="e5bc80e692ac_4" class="blank_anchor_name"></a><a id="e5bc80e692ac_4" class="blank_anchor_id"></a><a name="开撬" class="blank_anchor_name"></a><a id="开撬" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">开撬</span></h2>
<p class="xsj_paragraph xsj_paragraph_level_0">既然 js 都暴露了，也没什么好绕的，直接植入代码吧。我们都知道 Electron 是有 render 进程和 Node 进程的，接下来这一步需要猜猜看哪个文件是负责 render 主进程的？好吧不用猜，名字都非常人类可读，就 main-renderer（主窗口渲染进程）。打开找到 html 文件（js也可以）插入如下这串</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:1024px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 55.859375%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='223'%3e%3cpath%20d='M1%2011a18926%2018926%200%20010%20209v3h399v-4a308%20308%200%2000-2-51c1%204%202-3%202-26a114%20114%200%2000-1-29l1-18-1-18-1-1h-1l-3-1%205-1%201-37V0H248a12865%2012865%200%2000-146%203c0%203-14%203-14%200-1-2%200-2%204-2L77%200C65%200%2058%200%2059%201h3l1%202c-1%202-8%202-9%200l2-2c1-1-5-1-13-1-9%200-15%200-14%201%203%201%201%204-2%204-5%200-6-4-2-4%201-1%200-1-3-1-4%200-6%200-5%201%203%201%202%204-1%204s-4-3-2-4c1-1%200-1-2-1-3%200-4%200-3%202L8%204C7%205%203%204%203%202L2%201%201%2011m28%2041l-2%201a320%20320%200%200046-1H29'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/674d13ad612a3d6ecf83de31b3c8c0a9/2bef9/1612889823127.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823127.png" data-src="./images/1612889823127.png" class="front_image" loading="lazy" srcSet="/acorns/static/674d13ad612a3d6ecf83de31b3c8c0a9/6f3f2/1612889823127.png 256w,
/acorns/static/674d13ad612a3d6ecf83de31b3c8c0a9/01e7c/1612889823127.png 512w,
/acorns/static/674d13ad612a3d6ecf83de31b3c8c0a9/2bef9/1612889823127.png 1024w,
/acorns/static/674d13ad612a3d6ecf83de31b3c8c0a9/bb27a/1612889823127.png 1371w" sizes="(max-width: 1024px) 100vw, 1024px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">双击启动，调试窗口出来了，可以大致看到整体页面结构了</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:1024px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 53.90625%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='216'%3e%3cpath%20d='M32%204l7%201h11a1991%201991%200%2001120-1l-22-1A12251%2012251%200%200132%204m274%2017v8h94V13h-94v8m-155%208l-1%2010c0%209%200%2010-2%2011h-2l2%201c2%200%202%200%202%2013v14l-3-1-3%201%203%201%203%201-13%201-10%201%207%201%2016%201-7%201h-6l9%201h4v38h-4l-3%201h3c5%200%205%202%201%202l-4%201%201%201c6-1%206%200%206%208v7h-6l-7%201%206%201c7%200%208%200%206%203l-1%202%202%202-2%204v2c2%200%203%202%201%203l-2%201%202%201c1%200%202%206%200%206v2c1%201%201%2016-1%2016h-2l2%201c2%200%202%201%202%204v4h30a132%20132%200%200133%201l1-1v1h13l5%201%204-1v-1l1%201%2018%201%2017-1%204-1%204%201v7l1%207%202%202c1%201%201-2%201-7%200-7%200-9%202-9a474%20474%200%200164%200l25-1%2025%201V39a11132%2011132%200%2000-224-1h-1l-1-4v-5l-12-1-11%201M8%20182l-2%201%201%201h1a86%2086%200%200025%200l18%201c18%200%2018-1%2019-2%200-2%200-2-1-1H43a294%20294%200%2001-35%200m-3%206l2%201a789%20789%200%2000-2-1m152%2014l-2%201a1551%201551%200%200042-1h-40'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/0b1dc3ee975f50ffd65cccab59379b5c/2bef9/1612889823138.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823138.png" data-src="./images/1612889823138.png" class="front_image" loading="lazy" srcSet="/acorns/static/0b1dc3ee975f50ffd65cccab59379b5c/6f3f2/1612889823138.png 256w,
/acorns/static/0b1dc3ee975f50ffd65cccab59379b5c/01e7c/1612889823138.png 512w,
/acorns/static/0b1dc3ee975f50ffd65cccab59379b5c/2bef9/1612889823138.png 1024w,
/acorns/static/0b1dc3ee975f50ffd65cccab59379b5c/ccf0c/1612889823138.png 1428w" sizes="(max-width: 1024px) 100vw, 1024px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">然后看了一下，迅雷的悬浮小圆圈和主窗口，分别用一个 BrowserWindow 来实现。有趣的是那个小圆圈窗口其实并不小，鼠标悬停出来的那个浮窗也是它的一部分，为了让小圆圈在屏幕的任何位置都可以看到悬浮窗，所以整个小圆圈的 BrowserWindow 是大约 4 倍的悬浮窗口大小</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:1024px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 60.546875%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='243'%3e%3cpath%20d='M192%2020a8459%208459%200%2000-1%2076h-3c0%202%200%202%202%202%201-1%201%200%202%201%200%202%201%202%2019%202h18V0h-37v20m-70%209l-6%202-4-1c-2%200-2%200-1%201l1%205a1322%201322%200%200112%209c-3-4-2-5%202-6%204%200%204%200%203-2l-3-1%201-5c3-5%202-6-5-2'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/6f30bf69733a6499c96b52d9b875be51/2bef9/1612889823245.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823245.png" data-src="./images/1612889823245.png" class="front_image" loading="lazy" srcSet="/acorns/static/6f30bf69733a6499c96b52d9b875be51/6f3f2/1612889823245.png 256w,
/acorns/static/6f30bf69733a6499c96b52d9b875be51/01e7c/1612889823245.png 512w,
/acorns/static/6f30bf69733a6499c96b52d9b875be51/2bef9/1612889823245.png 1024w,
/acorns/static/6f30bf69733a6499c96b52d9b875be51/525d3/1612889823245.png 1090w" sizes="(max-width: 1024px) 100vw, 1024px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">独立窗口的检视界面 - 窗口实际是 4倍 浮窗大小，灰色部分全都是这个“小”浮窗所使用的 BrowserWindow区域</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:1024px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 48.4375%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='193'%3e%3cpath%20d='M0%2022v22h72l72%201v-4l1-4%2059-1h60v-3c2-8%2011-12%2017-9%202%201%202%201-2%204l-5%201c-2-2-6-1-4%200l1%204c0%203%202%204%205%207%205%203%206%203%204%200-1-3%200-4%204-4l2-1-1-1c-3%200-3-1-2-4%202-4%202-4%204%200%202%203%201%208-1%2011l-2%203h72V0H0v22'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/d25f0610523aef8473f5e77639168dcc/2bef9/1612889823246.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823246.png" data-src="./images/1612889823246.png" class="front_image" loading="lazy" srcSet="/acorns/static/d25f0610523aef8473f5e77639168dcc/6f3f2/1612889823246.png 256w,
/acorns/static/d25f0610523aef8473f5e77639168dcc/01e7c/1612889823246.png 512w,
/acorns/static/d25f0610523aef8473f5e77639168dcc/2bef9/1612889823246.png 1024w,
/acorns/static/d25f0610523aef8473f5e77639168dcc/20f89/1612889823246.png 1213w" sizes="(max-width: 1024px) 100vw, 1024px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<h2 class="xsj_heading_hash xsj_heading xsj_heading_h2" id="e4b880e782b9e998b2e5bea1e68eaae696bd_5"><div class="xiaoshujiang_element xsj_anchor">
  <a name="e4b880e782b9e998b2e5bea1e68eaae696bd_5" class="blank_anchor_name"></a><a id="e4b880e782b9e998b2e5bea1e68eaae696bd_5" class="blank_anchor_id"></a><a name="一点防御措施" class="blank_anchor_name"></a><a id="一点防御措施" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">一点防御措施</span></h2>
<p class="xsj_paragraph xsj_paragraph_level_0">从代码来看，nodejs 进程只有一个文件 main.js ，是 webpack 的构建产物，看源码这里的 BrowserWindow 的 webPreference 参数是把 devTools 禁用掉的，导致直接在命令行里敲 openDevTools 是不能检视任意窗口的</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:981px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 74.609375%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='298'%3e%3cpath%20d='M0%20149a4211%204211%200%20003%20144h1l1%201h1l1%202%201-1-1-2v-1H6c-2%200-2%200-1-1s6-1%206%201l-1%201-1%202c0%203%202%203%202%200%201-2%201-2%201%200v3h149a1605%201605%200%2000146-3c0-1%202-2%205-2h6c1-1%201%200%201%201%200%202%200%202-3%202-3-1-4%200-4%201-1%201%206%201%2039%201a198%20198%200%200042-1l4%201c2%200%203%200%202-1v-1h1c1%201%201-65%201-147V0h-41a889%20889%200%2000-58%201%203627%203627%200%2000-149%200A3261%203261%200%20002%200H0v149M225%2046l-1%201c-1-2-5-2-5-1%200%202%2011%203%2012%201h1c0%201%204%202%2016%201h12l1%202%201-3-1-3-1%201-3%201-4-1-1-1-2%202h-1l-2-1h-10l-2%201h-2c0-2%200-2-2-1h-2l-2-1-2%202M34%20110c-1%201%200%203%204%203l3-1h1l4%201h3l5-1h29c1%201%204%201%204-1l-19-1a304%20304%200%2000-25%200h-9m10%208l-5%201-5%201c0%201%201%202%209%202l10-1%202-1%201%201%204%201%205-1h27c2%201%204%201%204-1%201-1%201-1-13-1l-11-1h-1l-5%201H52l-4-1h-4m0%2018l-5%201c-4%200-5%200-5%202h2a102%20102%200%200026%200h16c3%201%204%201%204-1%200-1-1-2-4-1l-5-1h-1l-12%201H47l-2-1h-1m9%209l-1%201h-9l-4-1c-4%201-5%201-5%203s0%202%201%201l4-1h15l2-1c2%202%209%202%209%201l2-1%203%201h13c1%201%204%200%204-1s-2-2-4-1l-5-1H53m-6%2018h-6c-7%200-7%200-7%202s0%202%201%201h8v2l1-2%202-1%204%201%202%202%202-1%207-1h18c1%201%201%201%201-1%201-1%200-2-15-2H47m19%2027l-6%201h-5l-1%201-2-1H38c-3%201-5%203-2%203l3-1h28c5%201%206%200%205-2l-1-1h-5m200%201c2%200%201%201-5%201-11%200-11%200-11%202%200%201%201%202%205%202l4-1h3l1%201h9c3%200%204-4%201-4l3-1c2%200%201-1-5-1s-7%201-5%201m-201%208l-14%201-14%201c0%201%2011%202%2017%201%202-1%203-1%203%201l2-1h10l6%201%201%201%201-2h2c1-1%200-3-2-3l-1%202c-1%201-1%201-1-1s0-2-2-1h-2l-1%201-1%201-1-1-1-1h-2m-1%209H50c-11%200-13%201-13%202l8%201a1961%201961%200%200130%200v-2l-3-1-3%201h-3l-1-1h-1m136%203v2h101l-50-1a2170%202170%200%2001-42-2c0-2-1-2-4-2-5%200-5%200-5%203M36%20244l-2%202c0%202%201%202%204%201l4%201h2c1-1%206-2%207-1h12l7%201h1c0-1%201-2%202-1v-1c0-2-3-3-3-1h-1c0-2%200-2-2-1h-2l-1%201-1%201-1-1c0-1-2-2-7-1H45l-5%201h-1l-3-1m14%2018c-5%200-6%202-3%203l4%201c2-2%2021-1%2022%200h1l7-1c6%201%208%200%208-1h-1l-1-1H77l-1-1-2%201h-2l-5-1H50m316%2023v4c-2%202-1%203%201%203s3%200%203%202l1%201h7c0-1-1-2-3-2-4%201-4%200-3-2l1-1c0%203%203%202%203%200l1-2v2c0%202%203%203%203%200h1v1l1%201%202-1c0-3%202%200%202%203a1169%201169%200%20004%200c1%202%201%202%201%200v-2l2%202v-1c0-4%203-7%206-5%201%201%201%201%201-1%200-3-11-2-12%201h-2c-1%202-1%202-1%200l-2-2v1l-1%201c-1%201-1%200-1-2s0-2-1-1h-3c-1-1-1-1-1%201l-1%202-1-1v-2l-1%202c-1%201-1%201-1-1s-2-3-2-1h-4'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/13571a60feb07ccf6650a83c3828586a/1c3a5/1612889823155.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823155.png" data-src="./images/1612889823155.png" class="front_image" loading="lazy" srcSet="/acorns/static/13571a60feb07ccf6650a83c3828586a/6f3f2/1612889823155.png 256w,
/acorns/static/13571a60feb07ccf6650a83c3828586a/01e7c/1612889823155.png 512w,
/acorns/static/13571a60feb07ccf6650a83c3828586a/1c3a5/1612889823155.png 981w" sizes="(max-width: 981px) 100vw, 981px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">当然了，这里即便是混淆过了也没关系，毕竟还是明文，把 1 改成 0，把它打开就好（双叹号/true/1啥都行，开心就好)。不过由于迅雷的窗口实在是太多了，下载弹窗是独立窗口，选择文件夹是独立窗口，各种广告窗口也是，需要改的配置点很多，这里就不列了，总共有 10 个窗口，这个配置点按需打开（批量替换也行，谨慎操作就行）。</p>
<h1 class="xsj_heading_hash xsj_heading xsj_heading_h1" id="e8bf9be7a88be7bb93e69e84_6"><div class="xiaoshujiang_element xsj_anchor">
  <a name="e8bf9be7a88be7bb93e69e84_6" class="blank_anchor_name"></a><a id="e8bf9be7a88be7bb93e69e84_6" class="blank_anchor_id"></a><a name="进程结构" class="blank_anchor_name"></a><a id="进程结构" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">进程结构</span></h1>
<p class="xsj_paragraph xsj_paragraph_level_0">呃……然后要干啥……好像也没什么好看的了，代码是混淆过的，也没有 map 文件。而且前端部分的代码也没什么技术含量可以说的，哪个 web 页面都那样。那看看进程分工吧。</p>
<h2 class="xsj_heading_hash xsj_heading xsj_heading_h2" id="e8bf9be7a88be6a091_7"><div class="xiaoshujiang_element xsj_anchor">
  <a name="e8bf9be7a88be6a091_7" class="blank_anchor_name"></a><a id="e8bf9be7a88be6a091_7" class="blank_anchor_id"></a><a name="进程树" class="blank_anchor_name"></a><a id="进程树" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">进程树</span></h2>
<p class="xsj_paragraph xsj_paragraph_level_0">在进程树里可以看出来，几乎全部的进程都是 Thunder.exe，可见 Thunder.exe 作为进程派发入口（类似 server 的网关，而并不直接是业务本身），用户启动的时候传参是 --StartType:DesktopIcon，随后它唤起了两组进程，一组是 Electron main 进程，main 进程唤起相关的 renderer；然后是下载的 SDK 服务 DownlaodSDKServer。</p>
<p class="xsj_paragraph xsj_paragraph_level_0">那么迅雷的进程关系差不多是清楚了：多个 Electron 窗口，对应一个 DownloadSDK。</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:771px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 35.9375%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='144'%3e%3cpath%20d='M16%201l1%204%201%202V5c0-2%200-2%201-1%202%202%2018%202%2018%200%201-2%200-2-1-2h-3c-1-1%2013-1%2033-1h34v8c0%208%200%208-2%208-3%200-3%200-3%205s-1%206-5%205l-1%202%203%201h3v8c0%208%200%209%202%209l3%201v47l1%2048V48h295V36l-1-16v-3H129l132%201h133v28H96V18h12c11%200%2011%200%202-1h-9V1h7l7%201%201%201%201%201c2%202%204%201%204-2-1-1%201-1%207-1A1398%201398%200%200016%201m153%200l8%201h8c3-2%205%200%204%202%200%202%200%202%201%201h5c2%200%203%200%202-2%200-2%200-2%202-2l2%202%201%202c1%200%202-1%201-2%200-2%200-2%204-2s5%200%205%202c1%204%2013%204%2012%200l2-2%201%203c0%202%200%202%203%202%202%200%202%200%202-2V1l1%203%202%202%202-2%201-2c1-1%201%200%201%201l1%203V4l1-3%201%203%201%202%201-2-1-3h62v2c0%204%2011%204%2011%201%200-2%200-2%201%200%201%203%203%202%204-1%201-2%201-2%201%200%200%203%200%203%203%203%202%200%202%200%202-2V1l1%203c0%203%204%203%204%200l1-2v2c0%202%200%202%202%201h2l4%201c3%200%203%200%203-2V1l1%202c0%203%200%203%205%203l6-1h1l2%201c1%200%202-1%202-3s0-2%208-2a6350%206350%200%2000-200%200M15%2017v8h8V9h-8v8m31%2011v3h15c11%200%2014-1%2014-2h2l2%201h3c1%201%202%201%203-1s0-2-7-2H52l-4%201c0%201-1%201-1-1-1-2-1-2-1%201M24%2043v24l1%204c0%204%200%204%203%204%202%200%202%200%202-4l1-4%201-13V43l-4-1-4%201m304%2010c0%204%204%204%204%201%200-2%200-2%201-1%200%202%201%202%202%201l2%201h8l3%201%202-1h3l4%201%201-1h1l1%201%201-3c0-3%200-3-8-3-6%200-8%201-8%202l-1%201-1-1c1-3-3-2-4%200s-1%202-1%200-1-2-5-2c-5%200-5%200-5%203M34%2086l-1%203c0%202%200%202%201%201h1c-1%202%200%202%201%202l2%201h-9c-1-2-4-1-4%202l1%202%201-1v-2l1%202c0%203%2018%201%2018-2h-3c-3%200-5-2-4-4v-3c-1-3-5-4-5-1m11%200c0%203%206%204%207%202h8c0%201%208%201%208-1h1c0%203%209%202%209%200l-2-2a787%20787%200%2000-31%201m-30%2031l1%2025h7V92h-8v25m313-14c0%202%204%203%204%200h1c0%202%201%202%202%202h24l1%201c2-2%201-6-1-6s-3%200-2%202l-2%201v-1c2-1%202-1-5-1-4-1-5%200-5%201h-1c0-2-1-2-8-2-8%200-8%200-8%203m0%208c0%204%204%204%204%201%201-2%201-2%201%200s0%202%202%201h10l3%201%202-1h7l2%201c2%200%202-1%202-3v-3l-8%201-8%201h-2c1-2-3-2-4%200l-1%203v-3c0-2-1-2-5-2-5%200-5%200-5%203m0%2025c0%204%204%204%204%201%200-2%200-2%201-1%200%202%201%202%202%201l2%201h8l3%201%202-1h3l4%201%201-1h1l1%201%201-3c0-3%200-3-8-3-6%200-8%201-8%202l-1%201-1-1c1-3-3-2-4%200s-1%202-1%200-1-2-5-2c-5%200-5%200-5%203'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/1dd394651203c8ba6e648131607bc6b5/5d030/1612889823247.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823247.png" data-src="./images/1612889823247.png" class="front_image" loading="lazy" srcSet="/acorns/static/1dd394651203c8ba6e648131607bc6b5/6f3f2/1612889823247.png 256w,
/acorns/static/1dd394651203c8ba6e648131607bc6b5/01e7c/1612889823247.png 512w,
/acorns/static/1dd394651203c8ba6e648131607bc6b5/5d030/1612889823247.png 771w" sizes="(max-width: 771px) 100vw, 771px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<h2 class="xsj_heading_hash xsj_heading xsj_heading_h2" id="e9809ae4bfa1e696b9e5bc8f_8"><div class="xiaoshujiang_element xsj_anchor">
  <a name="e9809ae4bfa1e696b9e5bc8f_8" class="blank_anchor_name"></a><a id="e9809ae4bfa1e696b9e5bc8f_8" class="blank_anchor_id"></a><a name="通信方式" class="blank_anchor_name"></a><a id="通信方式" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">通信方式</span></h2>
<p class="xsj_paragraph xsj_paragraph_level_0">那么 Electron 的进程（甭管 main-process 还是 renderer-process，统称 electron进程） 和 DownloadSDK 是如何通信的呢？</p>
<p class="xsj_paragraph xsj_paragraph_level_0">进程间通信一般都是依靠 ipc 管道的形式来实现。不过迅雷似乎没按套路来，它的 DownloadSDK 是控制台程序，意味着很有可能是通过 stdio 的方式来进行交互的（后续证明不是）。</p>
<p class="xsj_paragraph xsj_paragraph_level_0">通过观察进程打开的句柄，看到很诡异的一个现象：DownloadSDK 并没有打开任何 ipc 管道，反倒是前端进程打开了一个</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:1024px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 59.375%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='237'%3e%3cpath%20d='M27%20164l28%201%2027-1-27-1-28%201m211-1h-19l-18%201a2891%202891%200%200037-1m-211%205l28%201%2027-1-27-1-28%201m92-1l-3%201%2027%201a234%20234%200%200025-2h-49m-86%204l-6%201%2028%201%2027-1c0-1-33-2-49-1m0%204l-6%201%2028%201%2027-1c0-1-33-2-49-1m0%204l-6%201%2028%201%2027-1c0-1-33-2-49-1m86%200l-3%201%2027%201a224%20224%200%200025-2h-49m-86%204l-6%201%2028%201%2027-1c0-1-33-2-49-1m1%204l-7%201%2028%201%2027-1-8-1a4452%204452%200%2001-40%200m0%204l-7%201%2028%201%2027-1-2-1H34m0%204l-7%201%2028%201%2027-1-8-1a2322%202322%200%2001-40%200m-7%2025l27%201%2026-1-26-1-27%201m0%204l27%201%2026-1-26-1-27%201'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/174b7af8a14a001dddf649aa4ef8e23a/2bef9/1612889823249.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823249.png" data-src="./images/1612889823249.png" class="front_image" loading="lazy" srcSet="/acorns/static/174b7af8a14a001dddf649aa4ef8e23a/6f3f2/1612889823249.png 256w,
/acorns/static/174b7af8a14a001dddf649aa4ef8e23a/01e7c/1612889823249.png 512w,
/acorns/static/174b7af8a14a001dddf649aa4ef8e23a/2bef9/1612889823249.png 1024w,
/acorns/static/174b7af8a14a001dddf649aa4ef8e23a/ccf0c/1612889823249.png 1428w" sizes="(max-width: 1024px) 100vw, 1024px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<h3 class="xsj_heading_hash xsj_heading xsj_heading_h3" id="e5898de7abafe79a8420ipc_9"><div class="xiaoshujiang_element xsj_anchor">
  <a name="e5898de7abafe79a8420ipc_9" class="blank_anchor_name"></a><a id="e5898de7abafe79a8420ipc_9" class="blank_anchor_id"></a><a name="前端的-ipc" class="blank_anchor_name"></a><a id="前端的-ipc" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">前端的 ipc</span></h3>
<p class="xsj_paragraph xsj_paragraph_level_0">而 Electron 打开的这个 handler 进程名称，查了一下，竟然全是 Electron 进程使用的，而且是所有进程。</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:793px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 59.765625%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='240'%3e%3cpath%20d='M2%203v12l1%2041-1%2040c-2-1-2%200-2%201l2%202%201%203-1%202-2%202%202%202%201%203-1%202-2%202c0%202%200%202%202%202%201-1%201%200%201%202s0%203-1%202c-2%200-2%200-2%202l2%202%201%203-1%202-2%202c0%202%200%202%202%202%201-1%201%200%201%202s0%203-1%202c-2%200-2%200-2%202l2%202%201%203-1%202-2%202c0%202%200%202%202%202%201-1%201%200%201%202l-1%203c-2-1-2%200-2%201l2%202%201%203-1%202-2%202%202%202%201%203-1%202-2%202c0%202%200%202%202%202%201-1%201%200%201%202s0%203-1%202c-2%200-2%200-2%202l2%202%201%203-1%202-2%202c0%202%200%202%202%202%201-1%201%200%201%202s0%203-1%202c-2%200-2%200-2%202l2%202%201%203-1%202-2%202c0%202%200%202%202%202%202-1%201%202-1%204v3c2%200%202%201%202%204v15l4%201a5417%205417%200%2000309-1h84v-5l-1-6c-3%200-3-9%200-10v-1c-2%200-2-1-2-4%200-4%202-6%203-2%201%201%201%201%201-1l-2-3c-3%200-3-9%200-9v-1c-3%200-2-2%200-2s2-1%202-2c0-2-1-2-2-2l-2-1%202-1%201-1-1-1c-2%200-2-1-2-5%200-5%200-5%202-5%202%201%202%200%201-5v-3l1-2-2-2c-2%201-3-15-1-16l2-2-153-1H93v-3c0-4%202-5%2010-5%203%200%204-2%202-2-5-2-7-2-7%200h-2c1%202%200%202-2%202s-2%200-2%205c0%203%200%204%202%204l2%202h2c-1%202%200%202%204%202l4-1%201-1%201%201v1l1-2h1c0%202%206%202%206%200h2a693%20693%200%200018%201h2c2%201%203%202%204%201h3l1-1%202-2%201%201h1c2-1%208-1%209%201%200%202%202%201%202-1h1c0%203%202%203%202%200h1l1%202%201-2h1l1%202%201-1v-1h1l1%202%201-1c0-1%201-2%203-2s2%200%201%202l1%202%201-2c0-1%200-2%201-1v1l1%201%201-2h1c0%202%205%203%205%201h1c1%201%206%201%206-1v-1l1%201h2c-1%202%200%203%2012%202l3-1h1l3%201%202-1v-2l1%201h2c-1%202%200%202%205%202%206%200%207-1%207-2h1l1%202v-1l2-2c2%200%203%201%203%202h1l1-2%201%201c-1%201%205%203%207%202l1-1%202-2%202%202h22c3%202%2013%201%2013-1h1c0%202%202%203%202%200h1v1l1%201%201-2h1l2%201h23l1%201v-2h3c1-1%201-1%201%201s2%201%202-1c1-1%201-1%201%201%200%201%201%202%203%201%202%200%203%200%202-1v-1h5c0%202%202%203%204%201h1c0%202%203%201%203-1h1c0%202%2019%202%2020%200l1-1v3l2-1%201-1v1h3c0%202%202%201%202-1h1l1%202v-1l1-2%201%201%203%201c4%201%204%201%203%204l-1%201c0-2%200-2-1-1l-3%201c-2%200-2%200-1%201a77%2077%200%20016%201v6l-1-1-1-2-1%201-1%201h-2l4%202c3%200%203%200%202%204h-1c0-2%200-2-1-1l-3%201c-2%200-2%200%200%201l4%201c1%201%202%205%202%2028v28H10v-92a2871%202871%200%2000-1%200v93h382v-79h5v45a453%20453%200%2001-1%2042l-2-2-2%202h-1c-1-2-3-2-3%200%201%202%200%202-2%202-3%200-4%200-3-2l-1-2-2%201h-1c-2-2-3-1-3%201l-1%203v-3l-1-2c-3%200-6%201-6%203l-181%201H4V1h392v135h-5V87c0-44%200-60-1-39l-1%208-1-1-1-2-1%201-2%201c-1%201%200%201%202%201l4%203-1%202h-4c-2%200-3%202-1%202%205%200%206%201%206%203l-1%203-1-2h-1l-3%201c-2%200-1%201%202%201l4%203-1%202h-3c-1%202%200%203%202%203l2%202-1%203-1-2h-1l-3%201c-2%200-2%200-1%201a77%2077%200%20016%202c0%205%200%205-1%203h-4l-1%201%202%201h3c2%201%202%202%201%204l-1%201c0-2%200-2-1-1l-3%201c-2%200-2%200-1%201a77%2077%200%20016%201v6l-1-1-1-2-1%201h-1l-2%201%204%202c3%200%203%200%202%204h-1c0-2%200-2-1-1l-3%201c-2%200-2%200%200%201l4%201c2%201%202%206%201%206l-1-1-1-2-1%201-2%201c-1%201%200%201%202%201l4%203-1%202h-4c-2%200-3%202-1%202%205%200%206%201%206%203l-1%203-1-2h-1l-3%201c-2%200-1%201%202%201l4%203-1%202h-5l-1%201%202%201%205%201%205%201c3%200%205%200%204-1-2%200-3-24-1-25v-9l1-1c-1-1%200-2%201-2l1-3-1-2h-1v-1l1-5-1-6-1-1v-1c-2-2-1-15%201-16l1-32V0H4L2%203m326%2025v6h29V22h-29v6M76%2028v6l1-5v-5h243v5l1%205V23H76v5m286%200v5h29V23h-29v5M20%20220l-1%203h341v-7H20v4'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/4e5f5fb139b8a636880d7ac75a2357d1/73fd0/1612889823248.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823248.png" data-src="./images/1612889823248.png" class="front_image" loading="lazy" srcSet="/acorns/static/4e5f5fb139b8a636880d7ac75a2357d1/6f3f2/1612889823248.png 256w,
/acorns/static/4e5f5fb139b8a636880d7ac75a2357d1/01e7c/1612889823248.png 512w,
/acorns/static/4e5f5fb139b8a636880d7ac75a2357d1/73fd0/1612889823248.png 793w" sizes="(max-width: 793px) 100vw, 793px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">那么不妨做出一个大胆的推测：前端多窗口之间是靠自建的 ipc 通道实现的，而 ipc 是 1 server 对 N client 的方式，那么 server 很有可能就是在主窗口上的，也就是前文看到那个及其明显的 main-renderer 进程，通过控制台查看，确实如此，nodejs 的 net 方式创建了一个 server，并且将一个叫做 __xdasIPCServerInstance 的对象暴露在全局环境供前端 js 调用，也即 jsapi。</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:1024px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 82.03124999999999%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='327'%3e%3cpath%20d='M313%20122a176307%20176307%200%20000%20202v3h34v-70l1-115V96l-18-1h-17v27m4%2032v4h27v-7l-14-1h-13v4m-293%208c0%202%200%202-10%202-7%200-8%200-8%202s1%202%2020%202c20%200%2020%200%2020-2s0-2-10-2H25l2-1c4%200%205-2%201-2-3-1-3%200-4%201'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/214880e0b0f1c03930a823d1ad4e482f/2bef9/1612889823251.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823251.png" data-src="./images/1612889823251.png" class="front_image" loading="lazy" srcSet="/acorns/static/214880e0b0f1c03930a823d1ad4e482f/6f3f2/1612889823251.png 256w,
/acorns/static/214880e0b0f1c03930a823d1ad4e482f/01e7c/1612889823251.png 512w,
/acorns/static/214880e0b0f1c03930a823d1ad4e482f/2bef9/1612889823251.png 1024w,
/acorns/static/214880e0b0f1c03930a823d1ad4e482f/8cdda/1612889823251.png 1168w" sizes="(max-width: 1024px) 100vw, 1024px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">而小窗口并不存在上述 server 实例，而相对应的有一个 client 实例</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:843px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 101.953125%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='408'%3e%3cpath%20d='M113%203l-9%201-8%201-1%201h-1l2%201%202%201c0%202%202%201%204-1%201-2%202-2%202-1%201%202%209%201%209%200h1c1%202%206%202%206%200h1c1%201%202%202%203%201h11l2-1c1%202%207%202%207%200h1c2%202%2016%202%2018%200s2-2%202%200v2l1-2%201-1c0%202%208%203%208%201h1l7%201h2l1-1h1c1%202%207%202%207%200h1c1%201%202%202%203%201h16l4-1h2c2%203%203%202%204%200l1-2v2l1%201%201-3c0-2%200-2-2-2l-2%201v2l-1%201-1-1-1-2h-1c-1%201-10%202-11%201h-7l-3-1c-1-2-6%200-5%202h-1c-2-2-5-3-5-2l-3%201c-2%201-3%200-3-1h-12c-3-1-5-1-6%201l-2%201c0-2-3-3-4-2h-10c-1-1-5%200-5%201v2l-2-2c-2-2-2-2-4-1-2%202-6%202-6%200l-6-1c-5%201-5%201-5%203h-1c-2-2-5-3-5-2m115%202c0%201%200%202%201%201h2c1%202%202%202%203%201h15c0-2%201-2%201-1h4l2%201h2l2%201h3l2-1h12l1-1h1c1%202%201%202%202%201h2c0%201%209%201%2010-1h1c1%202%204%202%206%201h1l2%201c1-1%204-5%202-5l-1%202h-20l-4-1h-9l-5%201h-1l-5-1-7-1c-2-1-2-1-4%201l-2%201-3-1c-2%201-3%200-3-1h-1c-1%201-3%202-4%201l-3%201h-1l-1-1-2-1c-1-1-1%200-1%202m9%2050v6l1%205h33V54h-16l-18%201M53%2061l-4%201c-4-1-6%202-2%203h5l1-1%201-1%201%201c-1%201%200%201%201%201%2018%201%2020%201%2022-1l1-1%201%202%201-1v-2l1%202%204%201%203-1h1c1%201%208%202%209%200h3l7%201h9l1-1h11c1%202%203%202%203-1%200-1-4-2-10-1h-3l-5-1h-7c-2-1-3%200-3%201%201%202-1%202-2%200l-3-1-6%201h-3l-4%201h-1c-1-2-7-3-8-2-1%202-2%202-3%200H65c-4-1-7-1-6%201%200%201%200%202-1%201l-1-1-1-1h-3M14%2092v2h13c13%200%2013%200%2013-2s0-2-6-3c-4%200-6%201-5%202l-1%201v-1l-3-1h-9c-2-1-2-1-2%202m26%2036H25l-14%202h-1c0-2%200-2-1-1-2%202%200%204%204%202h7l7-1%206%201h5v2l1-2h1c1%202%2012%201%2013-1%200-2-1-2-2-2l-2%202-1%201-1-1c1-2%200-2-2-1h-1l-1-1h-3m69%2011l-7%204c-2%202-3%202-4%201l-5-2-4-1%202%202%202%206c0%204%201%206%207%209l7%205c3%203%203%202%200-3-2-5-3-4%206-6%205-2%205-2-2-4-2-1-2-1%200-4l2-4%202-3c2-3%201-3-6%200m-90%2068v3h78v-6H19v3m290%2037c0%202%200%202%202%200h1c-1%201%200%202%204%202l5-1h2l11%201h5l1%201%201-1h3l6-1h2l1%201v-2c-2-2-9-2-10%200h-1l-4-1-4-1h-2l-6%201c-5-1-6%200-6%201h-1c0-2-3-3-4-1h-1c-2-3-5-2-5%201m-101%2047v2l-2%201c-1%201%207%201%2019%201l22-1h1l24%201%2023%201-1-3c0-3%200-3-2-2-1%200-2%201-1%202h-2l-1-2-1-1-2%202-1%201c-1-2-4-2-5%200-1%201-1%201-1-1l-1-2-1%201v3l-1-2-1-2v2l-2%202-1-2c1-2%200-2-2-2l-4%202h-3c-1-1-2-2-3-1h-3l-2%201-1%202-1-1c1-2%200-2-3-2l-3%201-1%201h-1c1%201%200%201-1%201v-1c1-1%201-2-1-2-3-1-4%200-4%201s-1%202-3%202c-3%200-4-1-4-2%201-2-2-2-4%200s-3%203-2%200h-1c-2%202-2%202-3%201h-1l-2%201c-2%200-3-1-2-2%200-2-2-1-3%201-1%201-1%201-1-1l-1-2v2l-1%202-1-2-1-1m100%201v3h46c45%200%2046%200%2046-2l-1-2-2-1c-2%200-2%200-2%202l-1%202v-2h-1c-2%202-3%203-3%201%201-2-9-2-12-1h-1l-2-1-2%202-2%201c-2%200-3%200-2-2h-1c-2%202-2%202-2%200l-8-1c-5%200-7%201-7%202v1l-1-1-1-2c-10-1-10-1-9%201%200%202-1%201-2-1h-10l-6%201h-6c-1%201-1%201%200%200l-1-2-1%202c0%202-2%203-2%201h-1l-1%201-1-1v-2c-1-1-1-1-1%201m-272%206l-1%202h-1c0-1-1-2-4-2l-5%201-1%202-2-1c0-2-1-2-6-2-6%200-7%200-6%203l20%201c13%200%2020%200%2019-1h-1l-1-2c0-1%200-2-1-1h-5c-2%200-3%201-3%202-1%201-1%201-1-1l-1-2v1M8%20308v4h48l48-1c0-2%202-3%202-1%201%201%207%201%207-1%200-1-1-2-6-2-2%200-3-1-3-2%200-2-1-2-48-2H8v5m200-1v2l-2%201-2%201%2021%201c20%200%2022%200%2022-2h1c0%202%202%202%2023%202h24l-1-3-3-3-2%202-2-1c-1-1-1-1-2%201h-1c0-1-4-1-5%201h-1l-1-3-1%201v2l-1-1c-1-2-1-2-2%200-1%204-2%204-2%201%201-2%200-3-3-3s-4%201-4%202h-2c-1-2-2-2-4-1l-3%201-1%202h-1l-1-2-3-1-3%201-1%201c-1-1-1%200-1%201h-1v-3h-3c0-1-2%200-2%202s-4%202-4%200%200-2-1%200-2%203-2%200v-2c-1-1-4%200-4%201l1%201h1l-1%202-1-1h-2c-1%201-1%201-1-1l1-2-2%202-2%201c0-2%200-2-1-1%200%202-2%201-2-1-1-1-1-1-1%201%200%201%200%202-1%201v-1l-1-1-2%201c-1%201-1%201-1-1l-1-2v2l-1%202-1-2-1-1m106%202c0%202-2%203-2%200%200-1-1-1-2%201s-1%202%2045%202c41%200%2045%200%2045-2l-1-2-1%202h-2l1-2-1-2-1%202-1%203-1-1h-2c-1%201-1%201-1-1%201-2-2-2-12-1h-5l-1%202-3%201-1-2v-1l-2%201c0-2-4-3-6%200h-6v-1l-3-1h-6c-2-1-3%200-5%201h-2c-1-1-2-2-3-1h-7l-6%201h-6c-1%201-1%201%200%200l-1-2-1%203m-106%207v2l-2%202c-2%201%207%201%2019%201l22-1h1c0%202%202%201%202-1h1c0%202%202%202%2022%202h22l-1-2c0-2-1-3-3-3l-2%201v1l-1-1-2-1-1%202v1l-4-2-2%202c-1%201-1%201-1-1l-1-2v1l-1%202c-1%201-1%200-1-1l-1-2-1%202-1%202-1-2c1-1%201-2-3-2l-4%201v1l-1-1-2-1-5%201-2%202-1%201-1-1c1-2%200-2-3-2h-8c-3-1-4-1-3%201%200%201%200%202-3%202s-4-1-3-2h-2c1-2%200-2-1-2l-2%201%201%201h1l-1%202-1-1h-7l-2%201c-2%200-3-1-2-2l-1-1c-2%200-2%201-2%202v1l-1-2-1-2v1l-1%202-1-1-1-2m100%202v3h46c45%200%2046%200%2046-2l-1-2-2-1c-2%200-2%200-2%202s-2%203-2%201h-1l-1%201-1-2c1-1%200-1-2-1h-8l-2%201h-1l-1-1h-1c-2-1-2-1-2%201l-2%202-3-1h-1c-1%201-1%201-1-1l-3-1-10-1c-2%200-2%200-2%202v2l-1-1c0-2-2-3-13-3-9%201-13%201-11%203l-2%201v-1c1-2%201-2-1-2l-6-1c-3%200-3%200-3%202l-1%202-1-2-1%201c-1%201-1%201-2-1l-1-2v2'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/d00b4db732d0f55e85ec9eee7b00038f/4ff83/1612889823250.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823250.png" data-src="./images/1612889823250.png" class="front_image" loading="lazy" srcSet="/acorns/static/d00b4db732d0f55e85ec9eee7b00038f/6f3f2/1612889823250.png 256w,
/acorns/static/d00b4db732d0f55e85ec9eee7b00038f/01e7c/1612889823250.png 512w,
/acorns/static/d00b4db732d0f55e85ec9eee7b00038f/4ff83/1612889823250.png 843w" sizes="(max-width: 843px) 100vw, 843px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<h3 class="xsj_heading_hash xsj_heading xsj_heading_h3" id="e5928c20downloadsdk20e79a84e9809ae8aeafe696b9e5bc8f_10"><div class="xiaoshujiang_element xsj_anchor">
  <a name="e5928c20downloadsdk20e79a84e9809ae8aeafe696b9e5bc8f_10" class="blank_anchor_name"></a><a id="e5928c20downloadsdk20e79a84e9809ae8aeafe696b9e5bc8f_10" class="blank_anchor_id"></a><a name="和-downloadsdk-的通讯方式" class="blank_anchor_name"></a><a id="和-downloadsdk-的通讯方式" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">和 DownloadSDK 的通讯方式</span></h3>
<p class="xsj_paragraph xsj_paragraph_level_0">这样看起来就很奇葩了，前端进程之间是通过自建的 ipc 管道通信的，但是并没有跟 DownloadSDK 有任何通信管道，难道它俩是心有灵犀无言自通？啊这……程序员是唯物主义的！</p>
<p class="xsj_paragraph xsj_paragraph_level_0">那怎么查它到底是怎么跟前端进程交互的呢？既然前端暴露了 server sdk instance，那意味着 DownLoadSDK 肯定是以一种 proxy 的方式暴露在这上面作为 jsapi 的。可以拿【创建一个下载任务api】来顺藤摸瓜。看了主窗口的 server instance 一下果然有这个方法：createTask ，应该就是前端用于创建下载任务用的 api。</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:969px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 51.953125%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='208'%3e%3cpath%20d='M0%202l1%202v5a151%20151%200%20000%2035%20692%20692%200%20000%2078%20150%20150%200%20001%2040c-2%201-2%206-1%207v1l-1%2019c0%2016%200%2019%202%2019l1-104A767%20767%200%20000%202m38%2065c-1%202%200%202%2012%202l11%201%202-1%202-1%209%201%209%201h3c1-1%203-2%204-1v-1c0-1-2-2-7-2H69c-1-1-2%200-2%201h-1c0-2-2-3-2-1l-4%201H41l-2%201%201-2v-1l-2%202m57%2033h-3l2%202c1%201%202%200%202-1l1-1%201%201c-1%201%204%202%209%201%203%200%204-1%204-2%201-1%201-1%201%201%200%201%201%202%203%201l6-1h1l2%201c2%200%202%200%201-1v-2l-2-1-2%201-1%201-1-1H99c0-1-4-1-4%201m-80%207l-2%203c1%201%200%201-1%201s-2%201-2%203v2h49v-2c0-3%200-3-8-3l-8-1h4l3-1c0-1-2-4-2-2l-3%201h-5c-3-1-9-1-8%201l-1%202-2-2-3-1c-2-1-3%200-3%201l1%201h3c1%201%200%201-2%201l-4-1-1-3-1%202c1%202%201%202-1%202-4%200-4-3-1-4l1-1-3%201'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/267aff6246d16618794273cf23aefa48/561da/1612889823252.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823252.png" data-src="./images/1612889823252.png" class="front_image" loading="lazy" srcSet="/acorns/static/267aff6246d16618794273cf23aefa48/6f3f2/1612889823252.png 256w,
/acorns/static/267aff6246d16618794273cf23aefa48/01e7c/1612889823252.png 512w,
/acorns/static/267aff6246d16618794273cf23aefa48/561da/1612889823252.png 969w" sizes="(max-width: 969px) 100vw, 969px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">chrome 浏览器里查代码不方便，转战 vscode 看源码，搜索 createTask 这个函数的声明位置，看到这一段（篇幅控制，此处删减了部分代码）</p>
<div class="xiaoshujiang_code_container"><div data-processed="true" class="xiaoshujiang_pre"><div class="language-javascript hljs code_linenums xiaoshujiang_code"><ol start="1" class="ol_linenums" style="counter-reset: lines 0;"><li class="li_linenum " date-linenum="1"><span class="li_linenum_before_span li_linenum_before_span_hide">1</span>createTask(e, t) {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="2"><span class="li_linenum_before_span li_linenum_before_span_hide">2</span>        <span class="hljs-keyword">return</span> n(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params"></span>) </span>{<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="3"><span class="li_linenum_before_span li_linenum_before_span_hide">3</span>          .....<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="4"><span class="li_linenum_before_span li_linenum_before_span_hide">4</span>          }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="5"><span class="li_linenum_before_span li_linenum_before_span_hide">5</span>          <span class="hljs-keyword">switch</span> (e) {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="6"><span class="li_linenum_before_span li_linenum_before_span_hide">6</span>            <span class="hljs-keyword">case</span> h.DownloadKernel.TaskType.P2sp:<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="7"><span class="li_linenum_before_span li_linenum_before_span_hide">7</span>              ...<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="8"><span class="li_linenum_before_span li_linenum_before_span_hide">8</span>            case h.DownloadKernel.TaskType.Bt:<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="9"><span class="li_linenum_before_span li_linenum_before_span_hide">9</span>             ...<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="10"><span class="li_linenum_before_span li_linenum_before_span_hide">10</span>            case h.DownloadKernel.TaskType.Emule:<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="11"><span class="li_linenum_before_span li_linenum_before_span_hide">11</span>             ...<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="12"><span class="li_linenum_before_span li_linenum_before_span_hide">12</span>            case h.DownloadKernel.TaskType.Group:<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="13"><span class="li_linenum_before_span li_linenum_before_span_hide">13</span>              ...<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="14"><span class="li_linenum_before_span li_linenum_before_span_hide">14</span>            case h.DownloadKernel.TaskType.Magnet:<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="15"><span class="li_linenum_before_span li_linenum_before_span_hide">15</span>             ...<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="16"><span class="li_linenum_before_span li_linenum_before_span_hide">16</span>            default:<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="17"><span class="li_linenum_before_span li_linenum_before_span_hide">17</span>              i = !<span class="hljs-number">1</span>;<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="18"><span class="li_linenum_before_span li_linenum_before_span_hide">18</span>          }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="19"><span class="li_linenum_before_span li_linenum_before_span_hide">19</span>          <span class="hljs-keyword">return</span> (<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="20"><span class="li_linenum_before_span li_linenum_before_span_hide">20</span>            ...<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="21"><span class="li_linenum_before_span li_linenum_before_span_hide">21</span>            _.fireTaskEvent(h.DownloadKernel.TaskEventType.TaskCreated, [<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="22"><span class="li_linenum_before_span li_linenum_before_span_hide">22</span>          );<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="23"><span class="li_linenum_before_span li_linenum_before_span_hide">23</span>        });<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="24"><span class="li_linenum_before_span li_linenum_before_span_hide">24</span>      }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li></ol></div></div></div>
<p class="xsj_paragraph xsj_paragraph_level_0">没跑了，证实了我前面的猜想，这个 __xdasIPCServerInstance 就是 download sdk 封装到前端的 proxy。</p>
<p class="xsj_paragraph xsj_paragraph_level_0">继续查，这个 fireTaskEvent 是怎么处理的，阅读代码过程繁琐按下不提，就看这两段代码(有删减整理)</p>
<div class="xiaoshujiang_code_container"><div data-processed="true" class="xiaoshujiang_pre"><div class="language-javascript hljs code_linenums xiaoshujiang_code"><ol start="1" class="ol_linenums" style="counter-reset: lines 0;"><li class="li_linenum " date-linenum="1"><span class="li_linenum_before_span li_linenum_before_span_hide">1</span><span class="hljs-comment">// 片段一</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="2"><span class="li_linenum_before_span li_linenum_before_span_hide">2</span>(e.getDownloadSdkVersion = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="3"><span class="li_linenum_before_span li_linenum_before_span_hide">3</span>  <span class="hljs-keyword">let</span> e = a.join(__rootDir, <span class="hljs-string">"../bin/SDK/DownloadSDKServer.exe"</span>);<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="4"><span class="li_linenum_before_span li_linenum_before_span_hide">4</span>  <span class="hljs-keyword">return</span> v.getFileVersion(e);<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="5"><span class="li_linenum_before_span li_linenum_before_span_hide">5</span>}),<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="6"><span class="li_linenum_before_span li_linenum_before_span_hide">6</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="7"><span class="li_linenum_before_span li_linenum_before_span_hide">7</span><span class="hljs-comment">// 片段二</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="8"><span class="li_linenum_before_span li_linenum_before_span_hide">8</span>y = l.default(o.join(__rootDir, <span class="hljs-string">"../bin/ThunderHelper.node"</span>));<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="9"><span class="li_linenum_before_span li_linenum_before_span_hide">9</span><span class="hljs-keyword">let</span> F = <span class="hljs-string">"/ssdkver "</span> + u.DownloadKernelManager.getDownloadSdkVersion();<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="10"><span class="li_linenum_before_span li_linenum_before_span_hide">10</span>B.push(F)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="11"><span class="li_linenum_before_span li_linenum_before_span_hide">11</span>y.shellExecute(<span class="hljs-number">0</span>, <span class="hljs-string">"open"</span>, o, B, H, <span class="hljs-string">"SW_SHOW"</span>);<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li></ol></div></div></div>
<p class="xsj_paragraph xsj_paragraph_level_0">很显然，DownloadSDK 是通过一个 ThunderHelper.node 的 nodejs addon 模块来启动、通信的。</p>
<p class="xsj_paragraph xsj_paragraph_level_0">我们知道, nodejs 可以通过 ffi 等方式实现内存共享，以达到两个进程不需要通过 pipe/sock 等管道就达到通信的目的。而通过工具观察 Thunder.exe 的唤起关系、句柄关系，两者的关系就更加一目了然了：ELectron 前端进程加载 DownloadSDK 进程，并且通过 \Sessions\5\BaseNamedObjects\xx@22123720|SendShareMemory 这种内存通道来实现的通信，句柄一一对应上了。</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:1024px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 51.171875%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='205'%3e%3cpath%20d='M239%203v2a5111%205111%200%200051%202c0%202%200%202%2055%202%2053%200%2055%200%2055-2s-3-5-3-3v3c1%201%201%201-2%201s-3%200-3-2c2-4%203-4-75-4l-60-1%2015-1h-33v3m-16%20139c1%202%20122%202%20122%200l-61-1-61%201m18%2010c-11%200-18%200-17%201a1188%201188%200%200017-1M4%20156l3%201c4%201%205%208%201%209-2%201-2%2013-1%2016v1l-1%202%202%201c2%200%202-1%202-6%200-12%200-14%202-14l1-1h5l5-1c1-1%200-1-3-1-8%200-8%200-7-5v-4H8l-4%202m219%200c1%201%207%202%2029%202a303%20303%200%2001-29%202%203117%203117%200%2000102-1l-22-1h7l7-1c-1-1-15-2-47-2l-47%201M67%20188l29%201%2029-1-29-1-29%201m157%200l29%201%2029-1-29-1-29%201m-200%205l2%201c1%201-3%201-7%201-7%200-9%200-8-1s0-1-3-1c-4%200-4%200-2%201s2%201-2%201l-4%201%2022%201%2022-1-8-1-8-1h8c11%200%2010-1-2-1H24'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/6a354b5b322d35ae35565b3cf03d1dc7/2bef9/1612889823253.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823253.png" data-src="./images/1612889823253.png" class="front_image" loading="lazy" srcSet="/acorns/static/6a354b5b322d35ae35565b3cf03d1dc7/6f3f2/1612889823253.png 256w,
/acorns/static/6a354b5b322d35ae35565b3cf03d1dc7/01e7c/1612889823253.png 512w,
/acorns/static/6a354b5b322d35ae35565b3cf03d1dc7/2bef9/1612889823253.png 1024w,
/acorns/static/6a354b5b322d35ae35565b3cf03d1dc7/ccf0c/1612889823253.png 1428w" sizes="(max-width: 1024px) 100vw, 1024px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<h1 class="xsj_heading_hash xsj_heading xsj_heading_h1" id="e680bbe7bb93_11"><div class="xiaoshujiang_element xsj_anchor">
  <a name="e680bbe7bb93_11" class="blank_anchor_name"></a><a id="e680bbe7bb93_11" class="blank_anchor_id"></a><a name="总结" class="blank_anchor_name"></a><a id="总结" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">总结</span></h1>
<p class="xsj_paragraph xsj_paragraph_level_0">扒拉了半天，扒完了有点空虚是怎么回事</p>
<ul class="markdown_ul">
<li>
<p class="xsj_paragraph xsj_paragraph_level_2"><span class="xsj_placeholder_span"></span>迅雷的代码架构关系是轻 node 而重前端，把所有的 node 加载、进程管理、多窗口通信都放在前端进程的主窗口进程里。关于这个做法，我尊重而不认同。前端进程不应该做太重的底层交互，尤其是 js 这种单线程语言，天然的就运行效率低，而且主窗口使用这么频繁就不怕卡住吗</p>
</li>
<li>
<p class="xsj_paragraph xsj_paragraph_level_2"><span class="xsj_placeholder_span"></span>Electron 天然就有 ipc 通信能力，完全可以在 node 端做一个消息网关，达成每个窗口通信的能力，完全不需要自建一个 ipc server-client 体系。可能这也是一开始就把大量工作放在前端(主窗口)了导致后期的程序设计受限。说不定是个历史包袱</p>
</li>
<li>
<p class="xsj_paragraph xsj_paragraph_level_2"><span class="xsj_placeholder_span"></span>用一个 node addon 的方式来跟 DownloadSDK 来通信，这点是可以点个赞的，虽然是业界标准（飞书是通过rust，基本原理类似），但是我目前所负责的业务并没有做到这样，所以在惭愧的同时也给它点个赞</p>
</li>
<li>
<p class="xsj_paragraph xsj_paragraph_level_2"><span class="xsj_placeholder_span"></span>迅雷使用的 Electron 版本是 9.2.1，vscode 也是这个版本，好神奇！非常好奇为何业界都用这个版本，事实上 electron 9.x 最新版本已经更新到 9.3.3 了（2020年10月28日）这个 9.2.1 有什么魔力让业界都用它吗</p>
</li>
<li>
<p class="xsj_paragraph xsj_paragraph_level_2"><span class="xsj_placeholder_span"></span>这里说明一下，Electron 从 6.0 开始就不支持 windows7(非sp1) 及以下的版本了。</p>
</li>
<li>
<p class="xsj_paragraph xsj_paragraph_level_2"><span class="xsj_placeholder_span"></span>我在 win7 系统上用迅雷安装器安装迅雷最新版本，发现 electron 用的是 1.8.6 版本</p>
</li>
<li>
<p class="xsj_paragraph xsj_paragraph_level_2"><span class="xsj_placeholder_span"></span>Electron 的主入口是处理过了的，通过 Thunder.exe 程序干了很多除了启动前端以外的事情，这个定制还是挺棒的，因为这样就可以把各种进程模块管理起来，不会出现多个独立进程。就我所看到的不少 Electron 应用其实都没有定制过。</p>
</li>
<li>
<p class="xsj_paragraph xsj_paragraph_level_2"><span class="xsj_placeholder_span"></span>以上是纯粹技术挖掘，没有破坏到迅雷的核心机密，仅做学习交流使用哈</p>
</li>
</ul>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:1024px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 71.09375%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='285'%3e%3cpath%20d='M383%205c-16%208-16%2032%200%2040l14%203c3-1%203-1%203-7v-6l-3%201c-3%202-6%201-6-1l2-8%204%201c2%201%203%201%203-1l-2-1c-3%200-4-1-3-5l1-4%201%202%202%205c1%201%201-3%201-9V4l-6-1-11%202m6%20161v103l-4%204-5%203c-1%200-2%200-2%202%200%204-2%204-17%204-13%200-15%200-15%202l27%201h27v-64l-5-1h-5v-35h10v-19h-10v-20l1-22c2-2%202-2%200-2l-1-30-1%2074M287%2071v5h7c6%200%207%200%209-2v-5c-2-3-3-3-9-3h-7v5M61%2071l-1%203h14c12%200%2014%200%2014-2l-1-2c0-1-4%200-4%202h-1c0-2-1-2-4-2h-4l-4-1-4%201h-2c-3-1-3-1-3%201m123%2030v5h10V95h-10v6m26-5v6l1%204h10V95h-5l-6%201m55%205v5h10V95h-10v6m-95%2019l-1%206v4h29l29%201%2060%201%2060%201v2l1%203%201-2c-1-1%200-1%2010-1l11%201v-16c-2-2-198-2-200%200m78%2033c-3%201-4%202-5%201l-3-1c-2%200-2%200-1%201l1%204c0%202%201%203%203%205l5%203%202%201c-2-4-2-5%202-6l4-1-3-1c-3-1-3-1-2-3%204-6%203-8-3-3m99-1l-1%207v7h3l4%201h-7v40h11l13-1a158%20158%200%2000-1-40c0%204-2-1-2-7v-7l-10-1-10%201m-194%2010c-1%206%201%209%204%208l2%201%208%201h7v-6l1%203c1%203%205%205%205%201l1-2%201%202c0%204%204%200%206-6%201-5%201-7-1-7s-2%201-2%203v4l-2-4c-1-4-3-4-4%201l-1%203v-4c-1-3-1-3-7-3l-7%201h-1c0-2-3-1-3%201v3l-2-3c-3-4-5-3-5%203m-92%2010v2c-1%202%200%202%201%202l3%201h-2c-2%200-2%200-1%201l14%201h12v-3l-1-4c0-2-7-1-8%201v3l-1-3c0-3-7-3-7%200v3l-2%202-2-1v-2c-1-1-1-1%200%200%202%200%202-1%202-2l-1-2h-2c-2%200-2%200-1%201v1c-2%200-3%200-2-1l-1-1-1%201m-33%2034v6l1%204h33v-10l-17-1-17%201m318%2019l1%2029v5h24v-17l-1-16c-2-1-23-2-24-1m-171%2024h-6v5l1%205h21v-10h-16M32%20283l81%202%2078-1c0-2-6-2-80-2-58%200-80%200-79%201'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/91bb7af2602fbfa576b6a9d7947547db/2bef9/1612889823254.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1612889823254.png" data-src="./images/1612889823254.png" class="front_image" loading="lazy" srcSet="/acorns/static/91bb7af2602fbfa576b6a9d7947547db/6f3f2/1612889823254.png 256w,
/acorns/static/91bb7af2602fbfa576b6a9d7947547db/01e7c/1612889823254.png 512w,
/acorns/static/91bb7af2602fbfa576b6a9d7947547db/2bef9/1612889823254.png 1024w,
/acorns/static/91bb7af2602fbfa576b6a9d7947547db/7798c/1612889823254.png 1183w" sizes="(max-width: 1024px) 100vw, 1024px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<h1 class="xsj_heading_hash xsj_heading xsj_heading_h1" id="e585b3e4ba8ee68891e4bbac_12"><div class="xiaoshujiang_element xsj_anchor">
  <a name="e585b3e4ba8ee68891e4bbac_12" class="blank_anchor_name"></a><a id="e585b3e4ba8ee68891e4bbac_12" class="blank_anchor_id"></a><a name="关于我们" class="blank_anchor_name"></a><a id="关于我们" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">关于我们</span></h1>
<p class="xsj_paragraph xsj_paragraph_level_0">我们部门有若干桌面端应用，用户基数大，挑战大，招聘有 electron 经验或者前端技术专家。经常会做一些好玩的桌面端实践，也会深入挖掘和学习一些 app 的程序设计。如果有兴趣的话欢迎联系我，简历请狠砸我！私信我获取联系方式哦！都可以聊一下，说不定就成为同事了，没有你想象的那么难！</p>
<p class="xsj_paragraph xsj_paragraph_level_0">还记得开头说的扒了飞书的源码的事情吗？想看吗？想就投简历吧哈哈哈哈</p>
<p class="xsj_paragraph xsj_paragraph_level_0">作者：jiawen<br>
链接：<a href="https://juejin.cn/post/6890344584078721031" class="xsj_link xsj_auto_link">https://juejin.cn/post/6890344584078721031</a><br>
来源：掘金<br>
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
</div>

</div></div></section><strong>Tagged with <span><style data-emotion-css="1it6e0j">.css-1it6e0j{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary,#33e);}.css-1it6e0j:hover{color:var(--theme-ui-colors-secondary,#119);}</style><a class="css-1it6e0j" href="/acorns/tags/文章">文章</a><span> | </span></span><span><a class="css-1it6e0j" href="/acorns/tags/转载">转载</a><span> | </span></span><span><a class="css-1it6e0j" href="/acorns/tags/技术">技术</a><span> | </span></span><span><a class="css-1it6e0j" href="/acorns/tags/前端">前端</a><span> | </span></span><span><a class="css-1it6e0j" href="/acorns/tags/electron">electron</a></span></strong><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-k008qs"><style data-emotion-css="1eziwv">.css-1eziwv{-webkit-flex:1;-ms-flex:1;flex:1;text-align:left;}</style><div class="css-1eziwv"><a class="css-1it6e0j" href="/acorns/web/Exploring the Complexities of Width and Height in CSS"><h4 class="css-1tr4euk"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" style="vertical-align:sub" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></svg>Previous</h4><span>Exploring the Complexities of Width and Height in CSS</span></a></div><style data-emotion-css="1bge839">.css-1bge839{-webkit-flex:1;-ms-flex:1;flex:1;text-align:right;}</style><div class="css-1bge839"><a class="css-1it6e0j" href="/acorns/https:/stackoverflowcom/questions/25810051/filereader-api-on-big-files"><h4 class="css-1tr4euk">Next<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" style="vertical-align:sub" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></svg></h4><span>filereader api on big files</span></a></div></div></div></div></div><style data-emotion-css="lvzlb4">.css-lvzlb4{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:0;background-color:var(--theme-ui-colors-background,#fff);border-top:1px solid;width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:16px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media screen and (min-width:650px){.css-lvzlb4{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><style data-emotion-css="1t4nmqc">.css-1t4nmqc{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:0;background-color:var(--theme-ui-colors-background,#fff);border-top:1px solid;width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:16px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media screen and (min-width:650px){.css-1t4nmqc{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><div class="css-1t4nmqc"><style data-emotion-css="kfpyh1">.css-kfpyh1{font-size:20px;}@media screen and (min-width:650px){.css-kfpyh1{font-size:24px;}}</style><div class="css-kfpyh1"><span class="css-14uqj98">Time Flies, No Time for Nuts <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="css-11lk46i" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M422.625 18.28c-24.68.13-51.932 15.455-74.094 36.907 1.868 1.036 3.742 2.07 5.626 3.157 8.05 4.642 15.615 9.363 22.72 14.125 25.19-9.583 55.47-14.465 103.437-2.97-12.036-37.07-33.633-51.345-57.688-51.22zM237.78 40.22l28.97 94.25c12.57 6.443 24.827 13.41 36.813 20.843l-36.625-111.97c-8.476-1.68-16.657-2.662-24.563-3-1.54-.065-3.074-.108-4.594-.124zm-19.218 1.124c-1.602.206-3.202.427-4.78.687-8.815 1.454-17.338 3.755-25.595 6.876l15.688 58.625c13.62 4.75 26.922 10.064 39.906 15.907l-25.218-82.093zm69.875 7.593l40.157 122.876c15.922 11.124 31.32 23.128 46.25 35.906L325.906 64.374c-13.092-6.527-25.568-11.643-37.47-15.438zm-117.5 7.844c-14.657 7.857-28.523 18.348-41.875 31.095 18.42 3.334 36.298 7.632 53.657 12.813L170.937 56.78zm179.25 20.907l53.282 155.97c10.798 10.382 21.322 21.187 31.624 32.374.395-1.174.75-2.332 1.125-3.5L379.843 97.407c-8.84-6.63-18.706-13.185-29.656-19.72zM136.595 108.25c-17.05 11.436-32.43 27.876-45.344 50.22-42.303 73.19-61.83 198.325-24.53 265.717l-.064-.062c.752 23.392-7.597 45.63-17.812 67.594 27.268-12.192 54.897-17.815 82.687-20.783l-.468-.343c87.895 19.01 212.87-49.42 260.688-132.156 13.547-23.44 20.606-46.14 22.28-67.72-77.218-81.572-166.868-139.912-277.436-162.468zm271.469 14L444.188 228c2.638-20.573.96-39.855-5.688-58.25-5.856-16.202-15.717-32.01-30.438-47.5z"></path></svg></span></div><style data-emotion-css="7ipau9">.css-7ipau9{font-family:oswald,sans-serif;font-size:14px;text-align:center;}@media screen and (min-width:650px){.css-7ipau9{font-size:16px;text-align:right;}}</style><div class="css-7ipau9"><div>Copyright © 2020 <!-- -->suziwen</div><div>Build with  <style data-emotion-css="ksfbmy">.css-ksfbmy{color:var(--theme-ui-colors-primary,#33e);}.css-ksfbmy:hover{color:var(--theme-ui-colors-secondary,#119);}</style><a href="https://www.gatsbyjs.com/" target="_blank" rel="noopener noreferrer" class="css-ksfbmy">Gatsbyjs</a>  and  <a href="https://www.github.com/suziwen/gatsby-theme-sculpting" target="_blank" rel="noopener noreferrer" class="css-ksfbmy">Sculpting</a> theme</div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script src="/acorns/libs/zoom/zoom-vanilla.min.js"></script><script>
                  var _hmt = _hmt || [];
                  (function() {
                      var hm = document.createElement("script");
                      hm.src = "//hm.baidu.com/hm.js?c02140dc523f5a309a2717a9a2bac552";
                      var s = document.getElementsByTagName("script")[0]; 
                      s.parentNode.insertBefore(hm, s);
                  })();
              </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/web/扒一扒迅雷的代码结构";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-48d6d113cdbd8eaeb1e6.js"],"app":["/app-769f74fe8327c9fb4428.js"],"component---node-modules-suziwen-gatsby-theme-sculpting-src-pages-404-js":["/component---node-modules-suziwen-gatsby-theme-sculpting-src-pages-404-js-c8b71f0b9c706e216a1d.js"],"component---node-modules-suziwen-gatsby-theme-sculpting-src-pages-search-js":["/component---node-modules-suziwen-gatsby-theme-sculpting-src-pages-search-js-e5540d250449237db552.js"],"component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-archive-js":["/component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-archive-js-3371becbe3b208851cf3.js"],"component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-blog-list-js":["/component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-blog-list-js-6af4602795e2f8374acc.js"],"component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-blog-post-js":["/component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-blog-post-js-fb9d310599f1bd239803.js"],"component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-tag-js":["/component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-tag-js-26b309cc8838d6e433aa.js"]};/*]]>*/</script><script src="/acorns/polyfill-48d6d113cdbd8eaeb1e6.js" nomodule=""></script><script src="/acorns/component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-blog-post-js-fb9d310599f1bd239803.js" async=""></script><script src="/acorns/d24d3e064b601c3fa92397aa9f8c5e3fc3365436-b3b52e1b95113f3f815e.js" async=""></script><script src="/acorns/05d954cf-b0068c1aacfd08ef52dc.js" async=""></script><script src="/acorns/41aca86e-8b5629aa189eae61d7b0.js" async=""></script><script src="/acorns/app-769f74fe8327c9fb4428.js" async=""></script><script src="/acorns/252f366e-a013f1a16a738605ba7c.js" async=""></script><script src="/acorns/545f34e4-5287ae6acbc1289e5dd0.js" async=""></script><script src="/acorns/framework-29ba174b433dc5858bed.js" async=""></script><script src="/acorns/webpack-runtime-b733388348fff5eacca1.js" async=""></script></body></html>