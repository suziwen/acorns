{"componentChunkName":"component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-blog-post-js","path":"/tech/using-css-to-control-text-selection","result":{"data":{"zipFile":{"publicURL":"/acorns/static/55ccbd92518e2757d14366069e2e4a92/Using CSS to Control Text Selection.zip"},"site":{"siteMetadata":{"siteUrl":"https://suziwen.github.io/acorns"}},"storyWriterMarkdown":{"id":"1dde9b4a-a4cf-55bf-9e68-c314de413eb2","html":"\n\n\t<div class=\"preview html_preview xsj_export_zip\"><div style=\"overflow: hidden; position: absolute; top: 0; height: 1px; width: auto; padding: 0; border: 0; margin: 0; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;\"><svg><defs id=\"MathJax_SVG_glyphs\"/><defs xmlns=\"http://www.w3.org/2000/svg\"><filter xmlns=\"http://www.w3.org/2000/svg\" id=\"dropshadow\" height=\"130%\">      <fegaussianblur in=\"SourceAlpha\" stddeviation=\"3\"/>       <feoffset dx=\"2\" dy=\"2\" result=\"offsetblur\"/>       <femerge>         <femergenode/>        <femergenode in=\"SourceGraphic\"/>       </femerge>    </filter><filter id=\"editing-stripe-bk\" filterunits=\"userSpaceOnUse\" x=\"-100%\" y=\"-100%\" width=\"300%\" height=\"300%\"><feflood flood-color=\"#700f0f\" result=\"flood1\"/><feflood flood-color=\"#fff\" flood-opacity=\"0.5\" result=\"flood2\"/><feimage xlink:href=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAwcHgiIGhlaWdodD0iMTAwMHB4Ij48ZGVmcz48cGF0dGVybiBpZD0icGF0dGVybiIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQiIGhlaWdodD0iNCI+PHBhdGggZD0iTSAtNCAtNCBMIDggOCBNIC04IC00IEwgNCA4IE0gLTQgLTggTCA4IDQiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI3BhdHRlcm4pIi8+PC9zdmc+\" x=\"0\" y=\"0\" width=\"2000\" height=\"1000\" result=\"image\"/><fetile in=\"image\" result=\"tile\"/><fecomposite operator=\"in\" in=\"flood1\" in2=\"tile\" result=\"tile2\"/><fegaussianblur in=\"SourceAlpha\" stddeviation=\"10\" result=\"blur\"/><fecomposite operator=\"in\" in=\"tile2\" in2=\"blur\" result=\"cloud\"/><femorphology operator=\"dilate\" radius=\"2\" in=\"SourceAlpha\" result=\"dilate\"/><fecomposite operator=\"in\" in=\"flood2\" in2=\"dilate\" result=\"base\"/><femerge><femergenode in=\"cloud\"/><femergenode in=\"base\"/><femergenode in=\"SourceGraphic\"/></femerge></filter></defs></svg></div><blockquote class=\"markdown_blockquote\">\n<p class=\"xsj_paragraph xsj_paragraph_level_1\"><span class=\"xsj_placeholder_span\"></span>本文为转载文章,如果涉及侵权,请联系 <a href=\"mailto:suziwen1@gmail.com\" class=\"xsj_link xsj_auto_link\">suziwen1@gmail.com</a>,会第一时间删除</p>\n<p class=\"xsj_paragraph xsj_paragraph_level_1\"><span class=\"xsj_placeholder_span\"></span>转载自: <a href=\"https://codersblock.com/blog/using-css-to-control-text-selection/\" class=\"xsj_link xsj_auto_link\">https://codersblock.com/blog/using-css-to-control-text-selection/</a></p>\n</blockquote>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\"></p><div class=\"toc mindmap_toc mindmap_container\" data-hash=\"1a17749cdf5a62124188607f88ab32db_mindmap_toc\"><div class=\"xsj_mindmap xsj_mindmap_toc\"><svg id=\"xsj_mindmap_toc_1588255130877\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" class=\"xsj_svg_viewbox\" style=\"max-width:1051px;max-height:635px;\" viewbox=\"0 0 1051 635\" width=\"100%\" height=\"100%\"><g transform=\"translate(427,339.5) scale(1)\"><g class=\"markmap-link\" style=\"fill:none;\"><path stroke=\"#dc3912\" stroke-width=\"4\" d=\"M191,-40.5 L196,-40.5 C268,-40.5 263,202.5 299,202.5 L301,202.5\"/><polygon class=\"markmap-link-polygon\" stroke-width=\"0\" transform=\"translate(191, -40.5)\" points=\"0,-3 5,0 0,3 -5,0\" style=\"fill: white;\"/><g transform=\"translate(299,202.5)\"><path class=\"markmap-node-path\" d=\"M0,0L132,0\" stroke-width=\"4\" stroke=\"#dc3912\"/><polygon class=\"markmap-node-polygon\" stroke-width=\"0\" transform=\"translate(132, 0)\" points=\"0,-2 5,0 0,2 -5,0\" style=\"fill: rgb(220, 57, 18);\"/></g></g><g class=\"markmap-link\" style=\"fill:none;\"><path stroke=\"#ff9900\" stroke-width=\"4\" d=\"M191,-40.5 L196,-40.5 C268,-40.5 263,121.5 299,121.5 L301,121.5\"/><polygon class=\"markmap-link-polygon\" stroke-width=\"0\" transform=\"translate(191, -40.5)\" points=\"0,-3 5,0 0,3 -5,0\" style=\"fill: white;\"/><g transform=\"translate(299,121.5)\"><path class=\"markmap-node-path\" d=\"M0,0L143,0\" stroke-width=\"4\" stroke=\"#ff9900\"/><polygon class=\"markmap-node-polygon\" stroke-width=\"0\" transform=\"translate(143, 0)\" points=\"0,-2 5,0 0,2 -5,0\" style=\"fill: rgb(255, 153, 0);\"/></g></g><g class=\"markmap-link\" style=\"fill:none;\"><path stroke=\"#109618\" stroke-width=\"4\" d=\"M191,-40.5 L196,-40.5 C268,-40.5 263,40.5 299,40.5 L301,40.5\"/><polygon class=\"markmap-link-polygon\" stroke-width=\"0\" transform=\"translate(191, -40.5)\" points=\"0,-3 5,0 0,3 -5,0\" style=\"fill: white;\"/><g transform=\"translate(299,40.5)\"><path class=\"markmap-node-path\" d=\"M0,0L192,0\" stroke-width=\"4\" stroke=\"#109618\"/><polygon class=\"markmap-node-polygon\" stroke-width=\"0\" transform=\"translate(192, 0)\" points=\"0,-2 5,0 0,2 -5,0\" style=\"fill: rgb(16, 150, 24);\"/></g></g><g class=\"markmap-link\" style=\"fill:none;\"><path stroke=\"#990099\" stroke-width=\"4\" d=\"M191,-40.5 L196,-40.5 C268,-40.5 263,-40.5 299,-40.5 L301,-40.5\"/><polygon class=\"markmap-link-polygon\" stroke-width=\"0\" transform=\"translate(191, -40.5)\" points=\"0,-3 5,0 0,3 -5,0\" style=\"fill: white;\"/><g transform=\"translate(299,-40.5)\"><path class=\"markmap-node-path\" d=\"M0,0L233,0\" stroke-width=\"4\" stroke=\"#990099\"/><polygon class=\"markmap-node-polygon\" stroke-width=\"0\" transform=\"translate(233, 0)\" points=\"0,-2 5,0 0,2 -5,0\" style=\"fill: rgb(153, 0, 153);\"/></g></g><g class=\"markmap-link\" style=\"fill:none;\"><path stroke=\"#0099c6\" stroke-width=\"4\" d=\"M191,-40.5 L196,-40.5 C268,-40.5 263,-121.5 299,-121.5 L301,-121.5\"/><polygon class=\"markmap-link-polygon\" stroke-width=\"0\" transform=\"translate(191, -40.5)\" points=\"0,-3 5,0 0,3 -5,0\" style=\"fill: white;\"/><g transform=\"translate(299,-121.5)\"><path class=\"markmap-node-path\" d=\"M0,0L236,0\" stroke-width=\"4\" stroke=\"#0099c6\"/><polygon class=\"markmap-node-polygon\" stroke-width=\"0\" transform=\"translate(236, 0)\" points=\"0,-2 5,0 0,2 -5,0\" style=\"fill: rgb(0, 153, 198);\"/></g></g><g class=\"markmap-link\" style=\"fill:none;\"><path stroke=\"#dd4477\" stroke-width=\"4\" d=\"M191,-40.5 L196,-40.5 C268,-40.5 263,-202.5 299,-202.5 L301,-202.5\"/><polygon class=\"markmap-link-polygon\" stroke-width=\"0\" transform=\"translate(191, -40.5)\" points=\"0,-3 5,0 0,3 -5,0\" style=\"fill: white;\"/><g transform=\"translate(299,-202.5)\"><path class=\"markmap-node-path\" d=\"M0,0L276,0\" stroke-width=\"4\" stroke=\"#dd4477\"/><polygon class=\"markmap-node-polygon\" stroke-width=\"0\" transform=\"translate(276, 0)\" points=\"0,-2 5,0 0,2 -5,0\" style=\"fill: rgb(221, 68, 119);\"/></g></g><g class=\"markmap-link\" style=\"fill:none;\"><path stroke=\"#3366cc\" stroke-width=\"4\" d=\"M191,-40.5 L196,-40.5 C268,-40.5 263,-283.5 299,-283.5 L301,-283.5\"/><polygon class=\"markmap-link-polygon\" stroke-width=\"0\" transform=\"translate(191, -40.5)\" points=\"0,-3 5,0 0,3 -5,0\" style=\"fill: white;\"/><g transform=\"translate(299,-283.5)\"><path class=\"markmap-node-path\" d=\"M0,0L85,0\" stroke-width=\"4\" stroke=\"#3366cc\"/><polygon class=\"markmap-node-polygon\" stroke-width=\"0\" transform=\"translate(85, 0)\" points=\"0,-2 5,0 0,2 -5,0\" style=\"fill: rgb(51, 102, 204);\"/></g></g><g class=\"markmap-node markmap-root-node\" transform=\"translate(-335,-40.5)\"><polygon class=\"markmap-node-polygon\" stroke-width=\"0\" transform=\"translate(525, 0)\" points=\"0,-3 5,0 0,3 -5,0\" style=\"fill: rgb(51, 102, 204);\"/><g transform=\"translate(1, -36)\"><rect class=\"markmap-node-rect\" rx=\"10\" ry=\"10\" height=\"72\" width=\"524\" fill=\"rgb(78, 156, 255)\" stroke=\"#3366cc\" stroke-width=\"1\"/><text class=\"markmap-node-text\" alignment-baseline=\"middle\" x=\"263\" y=\"46\" text-anchor=\"middle\" style=\"font: bolder 30px sans-serif; fill-opacity: 1; fill: rgb(255, 255, 255);\">Using CSS to Control Text Selection</text></g></g><g class=\"markmap-node\" transform=\"translate(299,202.5)\"><a xlink:href=\"#going20further_7\"><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(220, 57, 18); stroke: white; stroke-width: 2px; cursor: pointer;\">Going Further</text><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(220, 57, 18); cursor: pointer;\">Going Further</text></a></g><g class=\"markmap-node\" transform=\"translate(299,121.5)\"><a xlink:href=\"#odds20and20ends_6\"><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(255, 153, 0); stroke: white; stroke-width: 2px; cursor: pointer;\">Odds and Ends</text><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(255, 153, 0); cursor: pointer;\">Odds and Ends</text></a></g><g class=\"markmap-node\" transform=\"translate(299,40.5)\"><a xlink:href=\"#styling20the20selection_5\"><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(16, 150, 24); stroke: white; stroke-width: 2px; cursor: pointer;\">Styling the Selection</text><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(16, 150, 24); cursor: pointer;\">Styling the Selection</text></a></g><g class=\"markmap-node\" transform=\"translate(299,-40.5)\"><a xlink:href=\"#selectively20selecting20text_4\"><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(153, 0, 153); stroke: white; stroke-width: 2px; cursor: pointer;\">Selectively Selecting Text</text><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(153, 0, 153); cursor: pointer;\">Selectively Selecting Text</text></a></g><g class=\"markmap-node\" transform=\"translate(299,-121.5)\"><a xlink:href=\"#preventing20text20selection_3\"><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(0, 153, 198); stroke: white; stroke-width: 2px; cursor: pointer;\">Preventing Text Selection</text><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(0, 153, 198); cursor: pointer;\">Preventing Text Selection</text></a></g><g class=\"markmap-node\" transform=\"translate(299,-202.5)\"><a xlink:href=\"#select20alle280a620then20select20some_2\"><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(221, 68, 119); stroke: white; stroke-width: 2px; cursor: pointer;\">Select All… Then Select Some</text><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(221, 68, 119); cursor: pointer;\">Select All… Then Select Some</text></a></g><g class=\"markmap-node\" transform=\"translate(299,-283.5)\"><a xlink:href=\"#select20all_1\"><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(51, 102, 204); stroke: white; stroke-width: 2px; cursor: pointer;\">Select All</text><text class=\"markmap-node-text\" y=\"-5\" text-anchor=\"start\" x=\"0\" style=\"fill-opacity: 1; font: 20px sans-serif; fill: rgb(51, 102, 204); cursor: pointer;\">Select All</text></a></g><g class=\"annotation-group\"><g class=\"annotations\"/></g></g></svg></div></div><p></p>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">CSS lets you control how text selection behaves and appears on your pages. This can help you improve usability in certain situations and add a little bit of visual flair. Let’s dive in!</p>\n<h2 class=\"xsj_heading_hash xsj_heading xsj_heading_h2\" id=\"select20all_1\"><div class=\"xiaoshujiang_element xsj_anchor\">\n  <a name=\"select20all_1\" class=\"blank_anchor_name\"></a><a id=\"select20all_1\" class=\"blank_anchor_id\"></a><a name=\"select-all\" class=\"blank_anchor_name\"></a><a id=\"select-all\" class=\"blank_anchor_id\"></a>\n</div>\n<span class=\"xsj_heading_content\">Select All</span></h2>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">Sometimes it’s nice to have all the text in an element automatically selected when you click on it. This is particularly handy for text that is copied/pasted in full (code snippets, one-time passwords, promotional codes, etc.).</p>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">You can accomplish this with some simple CSS. No JavaScript required!</p>\n<div class=\"xiaoshujiang_code_container\"><div class=\"xiaoshujiang_pre\"><div class=\"language-css hljs code_linenums xiaoshujiang_code\"><ol start=\"1\" class=\"ol_linenums\" style=\"counter-reset: lines 0;\"><li class=\"li_linenum \" date-linenum=\"1\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">1</span><span class=\"hljs-selector-tag\">div</span> {<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"2\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">2</span>    <span class=\"hljs-attribute\">-webkit-user-select</span>: all; <span class=\"hljs-comment\">/* for Safari */</span><span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"3\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">3</span>    <span class=\"hljs-attribute\">user-select</span>: all;<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"4\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">4</span>}<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li></ol></div></div></div>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">Here’s a demo. Bad news, it doesn’t work on iOS. Good news, it degrades gracefully, so the text is still selectable.</p>\n<h2 class=\"xsj_heading_hash xsj_heading xsj_heading_h2\" id=\"select20alle280a620then20select20some_2\"><div class=\"xiaoshujiang_element xsj_anchor\">\n  <a name=\"select20alle280a620then20select20some_2\" class=\"blank_anchor_name\"></a><a id=\"select20alle280a620then20select20some_2\" class=\"blank_anchor_id\"></a><a name=\"select-all-then-select-some\" class=\"blank_anchor_name\"></a><a id=\"select-all-then-select-some\" class=\"blank_anchor_id\"></a>\n</div>\n<span class=\"xsj_heading_content\">Select All… Then Select Some</span></h2>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">While this works as expected, you may notice something annoying: it is impossible to select anything less than the entire code snippet. Wouldn’t it be nice if the first click selected all, but you could still click again and select just a portion? CSS can do this.</p>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">First, use <code>tabindex</code> to make the element holding the text focusable. This gives the CSS a way to know when the element has been clicked.</p>\n<div class=\"xiaoshujiang_code_container\"><div class=\"xiaoshujiang_pre\"><div class=\"language-html hljs xml code_linenums xiaoshujiang_code\"><ol start=\"1\" class=\"ol_linenums\" style=\"counter-reset: lines 0;\"><li class=\"li_linenum \" date-linenum=\"1\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">1</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">code</span> <span class=\"hljs-attr\">tabindex</span>=<span class=\"hljs-string\">\"0\"</span>&gt;</span>code snippet goes here<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">code</span>&gt;</span><span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li></ol></div></div></div>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">Then comes the CSS.</p>\n<div class=\"xiaoshujiang_code_container\"><div class=\"xiaoshujiang_pre\"><div class=\"language-css hljs code_linenums xiaoshujiang_code\"><ol start=\"1\" class=\"ol_linenums\" style=\"counter-reset: lines 0;\"><li class=\"li_linenum \" date-linenum=\"1\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">1</span><span class=\"hljs-selector-tag\">code</span> {<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"2\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">2</span>    <span class=\"hljs-attribute\">-webkit-user-select</span>: all;<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"3\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">3</span>    <span class=\"hljs-attribute\">user-select</span>: all;<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"4\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">4</span>}<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"5\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">5</span><span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"6\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">6</span><span class=\"hljs-selector-tag\">code</span><span class=\"hljs-selector-pseudo\">:focus</span> {<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"7\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">7</span>    <span class=\"hljs-attribute\">animation</span>: select <span class=\"hljs-number\">100ms</span> step-end forwards;<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"8\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">8</span>}<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"9\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">9</span><span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"10\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">10</span>@<span class=\"hljs-keyword\">keyframes</span> select {<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"11\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">11</span>    <span class=\"hljs-selector-tag\">to</span> {<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"12\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">12</span>        <span class=\"hljs-attribute\">user-select</span>: text;<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"13\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">13</span>    }<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"14\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">14</span>}<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li></ol></div></div></div>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">The idea is to have <code>user-select: all</code> on the element initially, then switch to the “normal” <code>user-select: text</code> after the element has focus so that text can be freely re-selected. The tricky part is the timing. Do the switch immediately upon focus and <code>user-select: all</code> is gone before it has a chance to do its job. That’s where <code>animation</code> comes in.</p>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">Yes, <code>user-select</code> is animatable! More specifically, it is <em class=\"markdown_em_underline\">discretely</em> animatable, meaning there is no gradual interpolated animation, but rather an immediate cut from one state to another. Armed with this knowledge, we can use <code>animation</code> to delay the change in select behavior until 100ms after focus. Perfect.</p>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">Again, the “select all” bit doesn’t work on iOS. Meanwhile, desktop Safari keeps the text as “select all”. This trick seems to work fine elsewhere, though.</p>\n<h2 class=\"xsj_heading_hash xsj_heading xsj_heading_h2\" id=\"preventing20text20selection_3\"><div class=\"xiaoshujiang_element xsj_anchor\">\n  <a name=\"preventing20text20selection_3\" class=\"blank_anchor_name\"></a><a id=\"preventing20text20selection_3\" class=\"blank_anchor_id\"></a><a name=\"preventing-text-selection\" class=\"blank_anchor_name\"></a><a id=\"preventing-text-selection\" class=\"blank_anchor_id\"></a>\n</div>\n<span class=\"xsj_heading_content\">Preventing Text Selection</span></h2>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">You can also use CSS to make text in an element unselectable.</p>\n<div class=\"xiaoshujiang_code_container\"><div class=\"xiaoshujiang_pre\"><div class=\"language-css hljs code_linenums xiaoshujiang_code\"><ol start=\"1\" class=\"ol_linenums\" style=\"counter-reset: lines 0;\"><li class=\"li_linenum \" date-linenum=\"1\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">1</span><span class=\"hljs-selector-tag\">label</span> {<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"2\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">2</span>    <span class=\"hljs-attribute\">-webkit-user-select</span>: none;<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"3\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">3</span>    <span class=\"hljs-attribute\">user-select</span>: none;<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"4\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">4</span>}<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li></ol></div></div></div>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">This is probably a bad idea for body text, but I’ve found it useful for controls that might be toggled quickly or “rage clicked” in desktop browsers, since double clicking causes text to be selected and highlighted, which can look a little weird sometimes.</p>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">See for yourself in the following demo. Notice how the toggle on the left becomes highlighted when rapidly clicked, while the one on the right doesn’t.</p>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">This technique also works on <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details\" class=\"xsj_link xsj_manu_link\">disclosure widgets</a>. Fake buttons — like a <code>&lt;div&gt;</code> with a <code>click</code> handler on it — are another candidate. Bear in mind that using a real <code>&lt;button&gt;</code> is preferable, not only for semantics and accessibility, but also because text in a <code>&lt;button&gt;</code> is unselectable by default, avoiding the issue to begin with.</p>\n<h2 class=\"xsj_heading_hash xsj_heading xsj_heading_h2\" id=\"selectively20selecting20text_4\"><div class=\"xiaoshujiang_element xsj_anchor\">\n  <a name=\"selectively20selecting20text_4\" class=\"blank_anchor_name\"></a><a id=\"selectively20selecting20text_4\" class=\"blank_anchor_id\"></a><a name=\"selectively-selecting-text\" class=\"blank_anchor_name\"></a><a id=\"selectively-selecting-text\" class=\"blank_anchor_id\"></a>\n</div>\n<span class=\"xsj_heading_content\">Selectively Selecting Text</span></h2>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">Unselectable text can be mixed into selectable text. The unselectable bits are simply skipped over when text is selected and will be omitted when the selection is copied/pasted.</p>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">The demo below uses <code>user-select: none</code> on the numerical footnote markers. So when you copy/paste, the markers are automatically removed for you.</p>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">Sadly, some browsers won’t play along. Safari (iOS and desktop) and Android Chrome will still copy the markers.</p>\n<h2 class=\"xsj_heading_hash xsj_heading xsj_heading_h2\" id=\"styling20the20selection_5\"><div class=\"xiaoshujiang_element xsj_anchor\">\n  <a name=\"styling20the20selection_5\" class=\"blank_anchor_name\"></a><a id=\"styling20the20selection_5\" class=\"blank_anchor_id\"></a><a name=\"styling-the-selection\" class=\"blank_anchor_name\"></a><a id=\"styling-the-selection\" class=\"blank_anchor_id\"></a>\n</div>\n<span class=\"xsj_heading_content\">Styling the Selection</span></h2>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">You can style text selections by targeting the <code>::selection</code> pseudo-element. However, your options are limited to 3 properties: <code>color</code>, <code>background-color</code>, and <code>text-shadow</code> (there are more defined in <a href=\"https://www.w3.org/TR/css-pseudo-4/#highlight-styling\" class=\"xsj_link xsj_manu_link\">the spec</a>, but browsers don’t support them).</p>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">Here’s an example that styles the selected text in a <code>&lt;p&gt;</code>.</p>\n<div class=\"xiaoshujiang_code_container\"><div class=\"xiaoshujiang_pre\"><div class=\"language-css hljs code_linenums xiaoshujiang_code\"><ol start=\"1\" class=\"ol_linenums\" style=\"counter-reset: lines 0;\"><li class=\"li_linenum \" date-linenum=\"1\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">1</span><span class=\"hljs-selector-tag\">p</span><span class=\"hljs-selector-pseudo\">::selection</span> {<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"2\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">2</span>    <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#fffaa5</span>;<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"3\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">3</span>    <span class=\"hljs-attribute\">background-color</span>: <span class=\"hljs-number\">#f38630</span>;<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"4\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">4</span>    <span class=\"hljs-attribute\">text-shadow</span>: <span class=\"hljs-number\">2px</span> <span class=\"hljs-number\">2px</span> <span class=\"hljs-number\">#31808c</span>;<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li><li class=\"li_linenum \" date-linenum=\"5\"><span class=\"li_linenum_before_span li_linenum_before_span_hide\">5</span>}<span style=\"user-select:none;display:none;\">&nbsp;</span><br class=\"code_line_break_hack_br\"><hr class=\"code_line_break_hack_hr code_line_break_hack\" style=\"margin:0;border:0;border-top:0;border-bottom:0;\"></li></ol></div></div></div>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">Try selecting some text in the demo below to see the result. Unfortunately, iOS is the holdout once again, but everyone else should see fancier colors.</p>\n<h2 class=\"xsj_heading_hash xsj_heading xsj_heading_h2\" id=\"odds20and20ends_6\"><div class=\"xiaoshujiang_element xsj_anchor\">\n  <a name=\"odds20and20ends_6\" class=\"blank_anchor_name\"></a><a id=\"odds20and20ends_6\" class=\"blank_anchor_id\"></a><a name=\"odds-and-ends\" class=\"blank_anchor_name\"></a><a id=\"odds-and-ends\" class=\"blank_anchor_id\"></a>\n</div>\n<span class=\"xsj_heading_content\">Odds and Ends</span></h2>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">There’s another declaration, <code>user-select: contain</code>, that is supposed to confine text selections to within an element, like you’d see with a <code>&lt;textarea&gt;</code>. Oddly enough, IE11 was the last browser to support it. No modern browsers support it currently.</p>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">That said, all editable elements (such as <code>&lt;textarea&gt;</code>) are treated as if they had <code>user-select: contain</code>. And the <code>::before</code> and <code>::after</code> pseudo-elements are unselectable, as if they had <code>user-select: none</code>. You cannot override these behaviors.</p>\n<h2 class=\"xsj_heading_hash xsj_heading xsj_heading_h2\" id=\"going20further_7\"><div class=\"xiaoshujiang_element xsj_anchor\">\n  <a name=\"going20further_7\" class=\"blank_anchor_name\"></a><a id=\"going20further_7\" class=\"blank_anchor_id\"></a><a name=\"going-further\" class=\"blank_anchor_name\"></a><a id=\"going-further\" class=\"blank_anchor_id\"></a>\n</div>\n<span class=\"xsj_heading_content\">Going Further</span></h2>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">This article is about CSS, but I would be remiss if I didn’t mention the relevant JavaScript.</p>\n<p class=\"xsj_paragraph xsj_paragraph_level_0\">If you want full control over text selections, with the ability to create and modify them at will, then check out the JavaScript <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Selection\" class=\"xsj_link xsj_manu_link\">Selection API</a>. If the end goal is to copy/paste text, then you should know that JavaScript also allows you to <a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard\" class=\"xsj_link xsj_manu_link\">interact with the clipboard</a>.</p>\n</div>\n\n","excerpt":"CSS lets you control how text selection behaves and appears on your pages. This can help you improve usability in certain situations and add...","docType":"posts","slug":"tech/using-css-to-control-text-selection","title":"Using CSS to Control Text Selection","customCss":"","createDate":"April 30, 2020","updateDate":"April 30, 2020","tags":["文章","转载","技术","English","css"]}},"pageContext":{"slug":"tech/using-css-to-control-text-selection","zipPath":"/home/runner/work/acorns/acorns/posts/english/Using CSS to Control Text Selection.zip","prev":{"title":"Exploring Node.js Internals","docType":"posts","slug":"tech/nodejs-internals"},"next":{"title":"2020-5-2 工作日志","docType":"posts","slug":"daily-notes/2020-05-02"},"pluginOptions":{"tagsPath":"/tags/","archivesPath":"/archives/","basePath":"/","commentType":"gitalk"},"basePath":"/"}},"staticQueryHashes":["2682448919","2682448919"]}