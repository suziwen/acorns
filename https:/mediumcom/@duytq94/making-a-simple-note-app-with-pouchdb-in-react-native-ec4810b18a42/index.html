<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.32.13"/><link rel="alternate" type="application/rss+xml" title="Your Site&#x27;s RSS Feed" href="/acorns/rss.xml"/><link rel="stylesheet" type="text/css" href="/acorns/libs/zoom/zoom.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/css/story-writer-markdown-default.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/css/story-writer-markdown-components.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/fonts/Webfonts/oswald/stylesheet.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/xsjfonts/fontstyles/zh.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/css/font-awesome.min.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/css/svg-with-js.css?version=sculpting_1_1"/><link rel="stylesheet" type="text/css" href="/acorns/css/gitalk.css?version=sculpting_1_1"/><link rel="icon" type="image/png" href="/acorns/favicon/favicon.png"/><link rel="mask-icon" href="/acorns/favicon/icon.svg" color="brown"/><link rel="icon" type="image/svg+xml" href="/acorns/favicon/favicon.svg"/><link rel="stylesheet" type="text/css" href="/acorns/fonts/Webfonts/aladin/stylesheet.css"/><link as="script" rel="preload" href="/acorns/webpack-runtime-b733388348fff5eacca1.js"/><link as="script" rel="preload" href="/acorns/framework-29ba174b433dc5858bed.js"/><link as="script" rel="preload" href="/acorns/545f34e4-5287ae6acbc1289e5dd0.js"/><link as="script" rel="preload" href="/acorns/252f366e-a013f1a16a738605ba7c.js"/><link as="script" rel="preload" href="/acorns/app-769f74fe8327c9fb4428.js"/><link as="script" rel="preload" href="/acorns/41aca86e-8b5629aa189eae61d7b0.js"/><link as="script" rel="preload" href="/acorns/05d954cf-b0068c1aacfd08ef52dc.js"/><link as="script" rel="preload" href="/acorns/d24d3e064b601c3fa92397aa9f8c5e3fc3365436-b3b52e1b95113f3f815e.js"/><link as="script" rel="preload" href="/acorns/component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-blog-post-js-fb9d310599f1bd239803.js"/><link as="fetch" rel="preload" href="/acorns/page-data/https:/mediumcom/@duytq94/making-a-simple-note-app-with-pouchdb-in-react-native-ec4810b18a42/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/acorns/page-data/sq/d/2682448919.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/acorns/page-data/sq/d/2682448919.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/acorns/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="116ag8">body{--theme-ui-colors-text:var(--theme-ui-colors-text,#000);--theme-ui-colors-background:var(--theme-ui-colors-background,#fff);--theme-ui-colors-primary:var(--theme-ui-colors-primary,#33e);--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,#119);--theme-ui-colors-muted:var(--theme-ui-colors-muted,#f6f6f6);--theme-ui-colors-accent:var(--theme-ui-colors-accent,#609);--theme-ui-colors-gray:var(--theme-ui-colors-gray,#777);--theme-ui-colors-meta:var(--theme-ui-colors-meta,#1f7199);--theme-ui-colors-built:var(--theme-ui-colors-built,#397300);--theme-ui-colors-literal:var(--theme-ui-colors-literal,#78A960);--theme-ui-colors-highlight:var(--theme-ui-colors-highlight,#ffffcc);color:var(--theme-ui-colors-text,#000);background-color:var(--theme-ui-colors-background,#fff);}body.theme-ui-dark{--theme-ui-colors-text:var(--theme-ui-colors-modes-dark-text,#fff);--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,#060606);--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,#3cf);--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,#e0f);--theme-ui-colors-muted:var(--theme-ui-colors-modes-dark-muted,#191919);--theme-ui-colors-gray:var(--theme-ui-colors-modes-dark-gray,#999);--theme-ui-colors-accent:var(--theme-ui-colors-modes-dark-accent,#c0f);--theme-ui-colors-meta:var(--theme-ui-colors-modes-dark-meta,#1f7199);--theme-ui-colors-built:var(--theme-ui-colors-modes-dark-built,#397300);--theme-ui-colors-literal:var(--theme-ui-colors-modes-dark-literal,#78A960);--theme-ui-colors-highlight:var(--theme-ui-colors-modes-dark-highlight,#29112c);}body.theme-ui-deep{--theme-ui-colors-text:var(--theme-ui-colors-modes-deep-text,hsl(210,50%,96%));--theme-ui-colors-background:var(--theme-ui-colors-modes-deep-background,hsl(230,25%,18%));--theme-ui-colors-primary:var(--theme-ui-colors-modes-deep-primary,hsl(260,100%,80%));--theme-ui-colors-secondary:var(--theme-ui-colors-modes-deep-secondary,hsl(290,100%,80%));--theme-ui-colors-accent:var(--theme-ui-colors-modes-deep-accent,hsl(290,100%,80%));--theme-ui-colors-muted:var(--theme-ui-colors-modes-deep-muted,hsla(230,20%,0%,20%));--theme-ui-colors-gray:var(--theme-ui-colors-modes-deep-gray,hsl(210,50%,60%));--theme-ui-colors-meta:var(--theme-ui-colors-modes-deep-meta,#1f7199);--theme-ui-colors-built:var(--theme-ui-colors-modes-deep-built,#397300);--theme-ui-colors-literal:var(--theme-ui-colors-modes-deep-literal,#78A960);--theme-ui-colors-highlight:var(--theme-ui-colors-modes-deep-highlight,hsl(260,20%,40%));}body.theme-ui-swiss{--theme-ui-colors-text:var(--theme-ui-colors-modes-swiss-text,hsl(10,20%,20%));--theme-ui-colors-background:var(--theme-ui-colors-modes-swiss-background,hsl(10,10%,98%));--theme-ui-colors-primary:var(--theme-ui-colors-modes-swiss-primary,hsl(10,80%,50%));--theme-ui-colors-secondary:var(--theme-ui-colors-modes-swiss-secondary,hsl(10,60%,50%));--theme-ui-colors-accent:var(--theme-ui-colors-modes-swiss-accent,hsl(250,60%,30%));--theme-ui-colors-muted:var(--theme-ui-colors-modes-swiss-muted,hsl(10,20%,94%));--theme-ui-colors-gray:var(--theme-ui-colors-modes-swiss-gray,hsl(10,20%,50%));--theme-ui-colors-meta:var(--theme-ui-colors-modes-swiss-meta,#1f7199);--theme-ui-colors-built:var(--theme-ui-colors-modes-swiss-built,#397300);--theme-ui-colors-literal:var(--theme-ui-colors-modes-swiss-literal,#78A960);--theme-ui-colors-highlight:var(--theme-ui-colors-modes-swiss-highlight,hsl(10,40%,90%));}</style><style data-emotion-css="1s13q8j">*{box-sizing:border-box;}body{margin:0;font-family:'Noto Serif SC',system-ui,'Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','NSimSun','仿宋体','SimSun','宋体',serif;line-height:1.5;font-weight:400;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="14i9w9y">.css-14i9w9y{min-height:100VH;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="css-14i9w9y"><style data-emotion-css="7zod2p">html{overflow-y:scroll;}body{margin:0;color:#000;background-color:#fff;}</style><div class="headroom-wrapper"><div style="position:relative;top:0;left:0;right:0;z-index:2;-webkit-transform:translate3D(0, 0, 0);-ms-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)" class="headroom headroom--unfixed"><style data-emotion-css="st9nty">.css-st9nty{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:var(--theme-ui-colors-background,#fff);border-bottom:1px solid;width:100%;}.css-st9nty h1{margin:0;}.css-st9nty ul{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;}.css-st9nty li{margin-left:16px;}</style><style data-emotion-css="luk5ak">.css-luk5ak{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:var(--theme-ui-colors-background,#fff);border-bottom:1px solid;width:100%;}.css-luk5ak h1{margin:0;}.css-luk5ak ul{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;}.css-luk5ak li{margin-left:16px;}</style><div class="css-luk5ak"><style data-emotion-css="16qc66y">.css-16qc66y{font-family:inherit;font-size:24px;color:inherit;background-color:transparent;width:32px;height:32px;padding:4px;margin:0;margin-left:16px;border:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;}.css-16qc66y:focus{outline:2px solid;}@media screen and (min-width:40em){.css-16qc66y{display:none;}}</style><button title="Toggle Menu" class="css-16qc66y"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button><style data-emotion-css="umt6is">.css-umt6is{margin-left:16px;font-weight:bold;font-size:1.5em;}.css-umt6is a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}</style><div class="css-umt6is"><a href="https://suziwen.github.io/acorns"><style data-emotion-css="11lk46i">.css-11lk46i{font-size:1.5em;vertical-align:text-bottom;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="css-11lk46i" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M206.135 23.568c-61.993.106-133.212 38.319-173.762 85.328 0 0 94.532-8.388 109.732 35.477 24.55 70.846-103.768 62.832-105.619 173.623-1.394 83.471 89.36 169.758 176.1 169.812 4.214 1.405 181.953 0 181.953 0 19.783-.28 20.606-22.551-48.812-36.637 145.592-147.853-86.742-159.073-85.456-45.779-17.956-18.803.577-99.816 97.692-95.832 32.91 23.48 51.817 27.373 88.56 19.284 6.982-1.537 12.05-25.665-5.462-27.064l-31.78-2.54c-28.106-25.677-34.818-36.477-6.67-57.463 68.87 18.058 77.047 12.076 77.016-13.33-.03-24.855-9.527-90.633-65.832-93.815-7.701-10.311 9.79-42.042-3.953-42.957-19.014-1.266-50.482 28.417-46.266 43.787-18.335 7.755-38.728 31.156-59.15 59.614-69.316 25.43-119.49 142.639-120.15 170.632-.579-182.435 153.242-180.594 140.216-244.77-14.07-69.324-66.992-97.458-118.357-97.37zM432.807 169.97c7.164 0 12.972 5.808 12.972 12.973 0 7.164-5.808 12.972-12.972 12.972-7.165 0-12.973-5.808-12.973-12.972 0-7.165 5.808-12.973 12.973-12.973z"></path></svg><style data-emotion-css="14uqj98">.css-14uqj98{font-family:aladin,sans-serif;font-weight:normal;}</style><span class="css-14uqj98">Scrat&#x27;s Acorn</span></a></div><style data-emotion-css="qwlsg7">.css-qwlsg7{display:none;margin-left:auto;}@media screen and (min-width:650px){.css-qwlsg7{display:block;}}</style><div class="css-qwlsg7"><ul><li><style data-emotion-css="1dbh7qa">.css-1dbh7qa{display:block;padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;color:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:14px;font-weight:bold;}.css-1dbh7qa.active{color:var(--theme-ui-colors-primary,#33e);}</style><style data-emotion-css="bpnmkh">.css-bpnmkh{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary,#33e);display:block;padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;color:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:14px;font-weight:bold;}.css-bpnmkh:hover{color:var(--theme-ui-colors-secondary,#119);}.css-bpnmkh.active{color:var(--theme-ui-colors-primary,#33e);}</style><a class="css-bpnmkh" href="/acorns/">主页</a></li><li><a class="css-bpnmkh" href="/acorns/tags">标签</a></li><li><a class="css-bpnmkh" href="/acorns/archives">归档</a></li><li><a class="css-bpnmkh" href="/acorns/search">搜索</a></li><li><a href="https://github.com/suziwen/markdownxiaoshujiang" target="_blank" rel="noopener noreferrer" class="css-1dbh7qa">Github</a></li></ul></div><style data-emotion-css="oiscss">.css-oiscss{margin-left:auto;margin-right:16px;}@media screen and (min-width:650px){.css-oiscss{margin-left:8px;}}</style><style data-emotion-css="ofhzqr">.css-ofhzqr{-webkit-appearance:none;-moz-appearance:none;appearance:none;font-family:inherit;font-size:14px;font-weight:bold;margin:0;padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;color:var(--theme-ui-colors-text,#000);background-color:var(--theme-ui-colors-muted,#f6f6f6);border:0;border-radius:2px;margin-left:auto;margin-right:16px;}.css-ofhzqr:focus{outline:2px solid;}@media screen and (min-width:650px){.css-ofhzqr{margin-left:8px;}}</style><button class="css-ofhzqr">default</button></div></div></div><style data-emotion-css="13pmxen">.css-13pmxen{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;}</style><div class="css-13pmxen"><style data-emotion-css="mzzgn5">.css-mzzgn5{width:initial;-webkit-flex:none;-ms-flex:none;flex:none;padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:32px;margin-top:64px;}@media screen and (min-width:650px){.css-mzzgn5{display:none;width:-webkit-min-content;width:-moz-min-content;width:min-content;margin-top:0;}}</style><div><style data-emotion-css="rrk7cz">.css-rrk7cz{position:fixed;top:0;left:0;bottom:0;z-index:1;min-width:0;width:256px;max-height:100vh;overflow-x:visible;overflow-y:auto;-webkit-overflow-scrolling:touch;-webkit-transition:-webkit-transform .2s ease-out;-webkit-transition:transform .2s ease-out;transition:transform .2s ease-out;-webkit-transform:translate(-100%);-ms-transform:translate(-100%);transform:translate(-100%);background-color:var(--theme-ui-colors-background,#fff);width:initial;-webkit-flex:none;-ms-flex:none;flex:none;padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:32px;margin-top:64px;}@media screen and (min-width:650px){.css-rrk7cz{position:-webkit-sticky;position:sticky;bottom:auto;max-height:none;-webkit-transform:none;-ms-transform:none;transform:none;background-color:transparent;}}@media screen and (min-width:650px){.css-rrk7cz{display:none;width:-webkit-min-content;width:-moz-min-content;width:min-content;margin-top:0;}}</style><div class="css-rrk7cz"><style data-emotion-css="1rvtlej">.css-1rvtlej{list-style:none;padding:0;margin:0;}</style><ul class="css-1rvtlej"><li><style data-emotion-css="70qvj9">.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-70qvj9"><a class="css-bpnmkh" href="/acorns/">主页</a></div></li><li><div class="css-70qvj9"><a class="css-bpnmkh" href="/acorns/tags">标签</a></div></li><li><div class="css-70qvj9"><a class="css-bpnmkh" href="/acorns/archives">归档</a></div></li><li><div class="css-70qvj9"><a class="css-bpnmkh" href="/acorns/search">搜索</a></div></li><li><div class="css-70qvj9"><a class="css-1dbh7qa" href="https://github.com/suziwen/markdownxiaoshujiang" target="_blank" rel="noopener noreferrer">Github</a></div></li></ul></div></div><style data-emotion-css="2mmr94">.css-2mmr94{position:fixed;max-width:210px;z-index:1;display:none;opacity:0.3;-webkit-transition:opacity .5s;transition:opacity .5s;top:0;bottom:0;left:initial;right:0;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media screen and (min-width:650px){.css-2mmr94{display:none;left:0;right:initial;}}@media screen and (min-width:850px){.css-2mmr94{display:none;}}@media screen and (min-width:1200px){.css-2mmr94{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-2mmr94:hover{opacity:1;}.css-2mmr94 .toc-list{background-color:var(--theme-ui-colors-background,#fff);list-style-type:none;margin:0;padding:0;padding-left:16px;padding-top:16px;}.css-2mmr94 .toc-list .toc-list-item{line-height:1.2em;padding-bottom:16px;}.css-2mmr94 .toc-list .toc-list-item:last-child{padding-bottom:0;}.css-2mmr94 .toc-list .toc-link{color:var(--theme-ui-colors-gray,#777);-webkit-text-decoration:none;text-decoration:none;}.css-2mmr94 .toc-list .is-active-link{color:var(--theme-ui-colors-text,#000);font-weight:bold;}</style><div class="toc css-2mmr94"></div><style data-emotion-css="judnid">.css-judnid{-webkit-flex:1;-ms-flex:1;flex:1;z-index:0;overflow:hidden;}</style><div class="css-judnid"><style data-emotion-css="16jkoar">.css-16jkoar{padding:16px;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;min-height:100%;max-width:900px;}@media screen and (min-width:650px){.css-16jkoar{padding:64px;}}</style><div class="css-16jkoar"><section><style data-emotion-css="bzcaho">.css-bzcaho{position:fixed;top:0;left:0;right:0;width:100%;height:3px;background:var(--theme-ui-colors-highlight,#ffffcc);z-index:999;-webkit-transform-origin:0;-ms-transform-origin:0;transform-origin:0;}@media screen and (min-width:1200px){.css-bzcaho{display:none;}}</style><div style="transform:scaleX(0) translateZ(0)" class="css-bzcaho"></div><style data-emotion-css="1yzwfkz">.css-1yzwfkz{cursor:pointer;-webkit-transition:0.35s opacity;transition:0.35s opacity;position:fixed;bottom:1rem;right:1.5rem;height:48px;width:48px;overflow:hidden;z-index:999;display:none;opacity:0;pointer-events:none;}@media screen and (min-width:1200px){.css-1yzwfkz{display:block;}}.css-1yzwfkz:hover #arrow{opacity:1;}</style><div class="css-1yzwfkz"><style data-emotion-css="tfdnh9">.css-tfdnh9 #arrow{-webkit-transition:0.35s all;transition:0.35s all;fill:var(--theme-ui-colors-gray,#777);-webkit-transform:scale(0.22) translate(48px,48px);-ms-transform:scale(0.22) translate(48px,48px);transform:scale(0.22) translate(48px,48px);}.css-tfdnh9 #progress{stroke:var(--theme-ui-colors-text,#000);}.css-tfdnh9 #outline{stroke:var(--theme-ui-colors-gray,#777);}</style><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 35 35" xml:space="preserve" class="css-tfdnh9"><path id="outline" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path><path id="arrow" d="M3.352,48.296l28.56-28.328l28.58,28.347c0.397,0.394,0.917,0.59,1.436,0.59c0.52,0,1.04-0.196,1.436-0.59   c0.793-0.787,0.793-2.062,0-2.849l-29.98-29.735c-0.2-0.2-0.494-0.375-0.757-0.475c-0.75-0.282-1.597-0.107-2.166,0.456   L0.479,45.447c-0.793,0.787-0.793,2.062,0,2.849C1.273,49.082,2.558,49.082,3.352,48.296z"></path><path fill="none" id="progress" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path></svg></div><style data-emotion-css="1tr4euk">.css-1tr4euk{font-family:oswald,sans-serif;}</style><p class="css-1tr4euk">March 15, 2021</p></section><style data-emotion-css="1ud4cyp">.css-1ud4cyp{box-sizing:border-box;margin:0;min-width:0;font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;font-weight:700;line-height:1.25;}</style><h1 class="css-1ud4cyp">Making a simple note app with PouchDB in React Native</h1><section class="post-body"><style data-emotion-css="1jye6mf">.css-1jye6mf{font-family:'Noto Serif SC',system-ui,'Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','NSimSun','仿宋体','SimSun','宋体',serif;line-height:1.5;font-weight:400;}.css-1jye6mf root{font-family:'Noto Serif SC',system-ui,'Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','NSimSun','仿宋体','SimSun','宋体',serif;line-height:1.5;font-weight:400;}.css-1jye6mf h1{color:var(--theme-ui-colors-text,#000);font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;line-height:1.25;font-weight:700;font-size:32px;}.css-1jye6mf h2{color:var(--theme-ui-colors-text,#000);font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;line-height:1.25;font-weight:700;font-size:24px;}.css-1jye6mf h3{color:var(--theme-ui-colors-text,#000);font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;line-height:1.25;font-weight:700;font-size:20px;}.css-1jye6mf h4{color:var(--theme-ui-colors-text,#000);font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;line-height:1.25;font-weight:700;font-size:16px;}.css-1jye6mf h5{color:var(--theme-ui-colors-text,#000);font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;line-height:1.25;font-weight:700;font-size:14px;}.css-1jye6mf h6{color:var(--theme-ui-colors-text,#000);font-family:'Noto Sans SC','Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','微软雅黑','WenQuanYi Micro Hei',Heiti,'黑体',sans-serif;line-height:1.25;font-weight:700;font-size:12px;}.css-1jye6mf p{color:var(--theme-ui-colors-text,#000);font-family:'Noto Serif SC',system-ui,'Helvetica Neue',Helvetica,Tahoma,Arial,'Hiragino Sans GB','NSimSun','仿宋体','SimSun','宋体',serif;font-weight:400;line-height:1.5;}.css-1jye6mf a{color:var(--theme-ui-colors-primary,#33e);}.css-1jye6mf a:hover{color:var(--theme-ui-colors-secondary,#119);}.css-1jye6mf pre{font-family:'Roboto Mono',monospace;overflow-x:auto;}.css-1jye6mf pre code{color:inherit;}.css-1jye6mf code{font-family:'Roboto Mono',monospace;color:var(--theme-ui-colors-secondary,#119);font-size:14px;}.css-1jye6mf table{width:100%;margin-top:32px;margin-bottom:32px;border-collapse:separate;border-spacing:0;}.css-1jye6mf table th,.css-1jye6mf table td{text-align:left;padding-top:4px;padding-bottom:4px;padding-right:4px;padding-left:0;border-color:var(--theme-ui-colors-muted,#f6f6f6);border-bottom-style:solid;}.css-1jye6mf th{vertical-align:bottom;border-bottom-width:2px;}.css-1jye6mf td{vertical-align:top;border-bottom-width:1px;}.css-1jye6mf img{max-width:100%;}.css-1jye6mf Container{padding:16px;max-width:1024px;}.css-1jye6mf inlineCode{font-family:'Roboto Mono',monospace;color:var(--theme-ui-colors-secondary,#119);background-color:var(--theme-ui-colors-muted,#f6f6f6);}.css-1jye6mf hr{border:0;border-bottom:1px solid;border-color:var(--theme-ui-colors-muted,#f6f6f6);}.css-1jye6mf blockquote{padding:16px;margin-top:16px;margin-bottom:16px;margin-left:8px;margin-right:16px;border-left-width:5px;border-left-style:solid;border-left-color:var(--theme-ui-colors-text,#000);background-color:var(--theme-ui-colors-muted,#f6f6f6);}.css-1jye6mf .xiaoshujiang_pre{white-space:pre-wrap;font-family:'Roboto Mono',monospace;tab-size:4;}.css-1jye6mf .xiaoshujiang_pre .ol_linenums{margin-top:0;}.css-1jye6mf .hljs{padding:8px;color:var(--theme-ui-colors-text,#000);background-color:var(--theme-ui-colors-muted,#f6f6f6);}.css-1jye6mf .hljs .hljs-subst{color:var(--theme-ui-colors-text,#000);}.css-1jye6mf .hljs .hljs-comment{color:var(--theme-ui-colors-gray,#777);}.css-1jye6mf .hljs .hljs-keyword,.css-1jye6mf .hljs .hljs-attribute,.css-1jye6mf .hljs .hljs-selector-tag,.css-1jye6mf .hljs .hljs-meta-keyword,.css-1jye6mf .hljs .hljs-doctag,.css-1jye6mf .hljs .hljs-name{font-weight:bold;}.css-1jye6mf .hljs .hljs-type,.css-1jye6mf .hljs .hljs-string,.css-1jye6mf .hljs .hljs-number,.css-1jye6mf .hljs .hljs-selector-id,.css-1jye6mf .hljs .hljs-selector-class,.css-1jye6mf .hljs .hljs-quote,.css-1jye6mf .hljs .hljs-template-tag,.css-1jye6mf .hljs .hljs-deletion{color:var(--theme-ui-colors-primary,#33e);}.css-1jye6mf .hljs .hljs-title,.css-1jye6mf .hljs .hljs-section{color:var(--theme-ui-colors-primary,#33e);font-weight:bold;}.css-1jye6mf .hljs .hljs-regexp,.css-1jye6mf .hljs .hljs-symbol,.css-1jye6mf .hljs .hljs-variable,.css-1jye6mf .hljs .hljs-template-variable,.css-1jye6mf .hljs .hljs-link,.css-1jye6mf .hljs .hljs-selector-attr,.css-1jye6mf .hljs .hljs-selector-pseudo{color:var(--theme-ui-colors-secondary,#119);}.css-1jye6mf .hljs .hljs-literal{color:var(--theme-ui-colors-literal,#78A960);}.css-1jye6mf .hljs .hljs-built_in,.css-1jye6mf .hljs .hljs-bullet,.css-1jye6mf .hljs .hljs-code,.css-1jye6mf .hljs .hljs-addition{color:var(--theme-ui-colors-built,#397300);}.css-1jye6mf .hljs .hljs-meta{color:var(--theme-ui-colors-meta,#1f7199);}.css-1jye6mf .hljs .hljs-meta-string{color:var(--theme-ui-colors-accent,#609);}.css-1jye6mf .hljs .hljs-emphasis{font-style:italic;}.css-1jye6mf .hljs .hljs-strong{font-weight:bold;}</style><div class="css-1jye6mf"><div><style></style>


	<div class="preview html_preview xsj_export_zip"><div style="overflow: hidden; position: absolute; top: 0; height: 1px; width: auto; padding: 0; border: 0; margin: 0; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><svg><defs id="MathJax_SVG_glyphs"/><defs xmlns="http://www.w3.org/2000/svg"><filter xmlns="http://www.w3.org/2000/svg" id="dropshadow" height="130%">      <fegaussianblur in="SourceAlpha" stddeviation="3"/>       <feoffset dx="2" dy="2" result="offsetblur"/>       <femerge>         <femergenode/>        <femergenode in="SourceGraphic"/>       </femerge>    </filter><filter id="editing-stripe-bk" filterunits="userSpaceOnUse" x="-100%" y="-100%" width="300%" height="300%"><feflood flood-color="#700f0f" result="flood1"/><feflood flood-color="#fff" flood-opacity="0.5" result="flood2"/><feimage xlink:href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAwcHgiIGhlaWdodD0iMTAwMHB4Ij48ZGVmcz48cGF0dGVybiBpZD0icGF0dGVybiIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQiIGhlaWdodD0iNCI+PHBhdGggZD0iTSAtNCAtNCBMIDggOCBNIC04IC00IEwgNCA4IE0gLTQgLTggTCA4IDQiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI3BhdHRlcm4pIi8+PC9zdmc+" x="0" y="0" width="2000" height="1000" result="image"/><fetile in="image" result="tile"/><fecomposite operator="in" in="flood1" in2="tile" result="tile2"/><fegaussianblur in="SourceAlpha" stddeviation="10" result="blur"/><fecomposite operator="in" in="tile2" in2="blur" result="cloud"/><femorphology operator="dilate" radius="2" in="SourceAlpha" result="dilate"/><fecomposite operator="in" in="flood2" in2="dilate" result="base"/><femerge><femergenode in="cloud"/><femergenode in="base"/><femergenode in="SourceGraphic"/></femerge></filter></defs></svg></div><blockquote class="markdown_blockquote">
<p class="xsj_paragraph xsj_paragraph_level_1"><span class="xsj_placeholder_span"></span>本文为转载文章, 仅用于自己的知识管理收集, 如果涉及侵权,请联系 <a href="mailto:suziwen1@gmail.com" class="xsj_link xsj_auto_link">suziwen1@gmail.com</a>,会第一时间删除<br>
收集该文章,并非代表本人支持文中观点,只是觉得文章内容容易引起思考,讨论,有它自有的价值</p>
<p class="xsj_paragraph xsj_paragraph_level_1"><span class="xsj_placeholder_span"></span>转载自: <a href="https://medium.com/@duytq94/making-a-simple-note-app-with-pouchdb-in-react-native-ec4810b18a42" class="xsj_link xsj_auto_link">https://medium.com/@duytq94/making-a-simple-note-app-with-pouchdb-in-react-native-ec4810b18a42</a></p>
</blockquote>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="toc mindmap_toc mindmap_container" data-vdom-skip="true" data-hash="5d04cb5826dc33cf5c8e944c0727c714_mindmap_toc"><div class="xsj_mindmap xsj_mindmap_toc"><svg id="xsj_mindmap_toc_1627620722039" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="xsj_svg_viewbox" style="max-width:1643px;max-height:512px;" viewbox="0 0 1643 512" width="100%" height="100%"><g transform="translate(574.5,186.5) scale(1)"><g class="markmap-link" style="fill:none;"><path stroke="#dc3912" stroke-width="2" d="M540.5,52.5 L545.5,52.5 C581.5,52.5 576.5,239.5 612.5,239.5 L614.5,239.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(540.5, 52.5)" points="0,-2 5,0 0,2 -5,0" style="fill: white;"/><g transform="translate(612.5,239.5)"><path class="markmap-node-path" d="M0,0L72,0" stroke-width="2" stroke="#dc3912"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(72, 0)" points="0,-1 5,0 0,1 -5,0" style="fill: rgb(220, 57, 18);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#dc3912" stroke-width="2" d="M540.5,52.5 L545.5,52.5 C581.5,52.5 576.5,165.5 612.5,165.5 L614.5,165.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(540.5, 52.5)" points="0,-2 5,0 0,2 -5,0" style="fill: white;"/><g transform="translate(612.5,165.5)"><path class="markmap-node-path" d="M0,0L222,0" stroke-width="2" stroke="#dc3912"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(222, 0)" points="0,-1 5,0 0,1 -5,0" style="fill: rgb(220, 57, 18);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#dc3912" stroke-width="2" d="M540.5,52.5 L545.5,52.5 C581.5,52.5 576.5,91.5 612.5,91.5 L614.5,91.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(540.5, 52.5)" points="0,-2 5,0 0,2 -5,0" style="fill: white;"/><g transform="translate(612.5,91.5)"><path class="markmap-node-path" d="M0,0L92,0" stroke-width="2" stroke="#dc3912"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(92, 0)" points="0,-1 5,0 0,1 -5,0" style="fill: rgb(220, 57, 18);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#dc3912" stroke-width="2" d="M540.5,52.5 L545.5,52.5 C581.5,52.5 576.5,17.5 612.5,17.5 L614.5,17.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(540.5, 52.5)" points="0,-2 5,0 0,2 -5,0" style="fill: white;"/><g transform="translate(612.5,17.5)"><path class="markmap-node-path" d="M0,0L407,0" stroke-width="2" stroke="#dc3912"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(407, 0)" points="0,-1 5,0 0,1 -5,0" style="fill: rgb(220, 57, 18);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#dc3912" stroke-width="2" d="M540.5,52.5 L545.5,52.5 C581.5,52.5 576.5,-56.5 612.5,-56.5 L614.5,-56.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(540.5, 52.5)" points="0,-2 5,0 0,2 -5,0" style="fill: white;"/><g transform="translate(612.5,-56.5)"><path class="markmap-node-path" d="M0,0L174,0" stroke-width="2" stroke="#dc3912"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(174, 0)" points="0,-1 5,0 0,1 -5,0" style="fill: rgb(220, 57, 18);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#dc3912" stroke-width="2" d="M540.5,52.5 L545.5,52.5 C581.5,52.5 576.5,-130.5 612.5,-130.5 L614.5,-130.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(540.5, 52.5)" points="0,-2 5,0 0,2 -5,0" style="fill: white;"/><g transform="translate(612.5,-130.5)"><path class="markmap-node-path" d="M0,0L183,0" stroke-width="2" stroke="#dc3912"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(183, 0)" points="0,-1 5,0 0,1 -5,0" style="fill: rgb(220, 57, 18);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#dc3912" stroke-width="4" d="M338.5,-43.5 L343.5,-43.5 C415.5,-43.5 410.5,52.5 446.5,52.5 L448.5,52.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(338.5, -43.5)" points="0,-3 5,0 0,3 -5,0" style="fill: white;"/><g transform="translate(446.5,52.5)"><path class="markmap-node-path" d="M0,0L93,0" stroke-width="4" stroke="#dc3912"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(93, 0)" points="0,-2 5,0 0,2 -5,0" style="fill: rgb(220, 57, 18);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#ff9900" stroke-width="4" d="M338.5,-43.5 L343.5,-43.5 C415.5,-43.5 410.5,-52.5 446.5,-52.5 L448.5,-52.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(338.5, -43.5)" points="0,-3 5,0 0,3 -5,0" style="fill: white;"/><g transform="translate(446.5,-52.5)"><path class="markmap-node-path" d="M0,0L52,0" stroke-width="4" stroke="#ff9900"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(52, 0)" points="0,-2 5,0 0,2 -5,0" style="fill: rgb(255, 153, 0);"/></g></g><g class="markmap-link" style="fill:none;"><path stroke="#3366cc" stroke-width="4" d="M338.5,-43.5 L343.5,-43.5 C415.5,-43.5 410.5,-130.5 446.5,-130.5 L448.5,-130.5"/><polygon class="markmap-link-polygon" stroke-width="0" transform="translate(338.5, -43.5)" points="0,-3 5,0 0,3 -5,0" style="fill: white;"/><g transform="translate(446.5,-130.5)"><path class="markmap-node-path" d="M0,0L83,0" stroke-width="4" stroke="#3366cc"/><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(83, 0)" points="0,-2 5,0 0,2 -5,0" style="fill: rgb(51, 102, 204);"/></g></g><g class="markmap-node markmap-root-node" transform="translate(-482.5,-43.5)"><polygon class="markmap-node-polygon" stroke-width="0" transform="translate(820, 0)" points="0,-3 5,0 0,3 -5,0" style="fill: rgb(51, 102, 204);"/><g transform="translate(1, -34)"><rect class="markmap-node-rect" rx="10" ry="10" height="68" width="819" fill="rgb(78, 156, 255)" stroke="#3366cc" stroke-width="1"/><text class="markmap-node-text" alignment-baseline="middle" x="410.5" y="38" text-anchor="middle" style="font: bolder 30px sans-serif; fill-opacity: 1; fill: rgb(255, 255, 255);">Making a simple note app with PouchDB in React Native</text></g></g><g class="markmap-node" transform="translate(446.5,52.5)"><a xlink:href="#implement_3"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(220, 57, 18); stroke: white; stroke-width: 2px; cursor: pointer;">Implement</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(220, 57, 18); cursor: pointer;">Implement</text></a></g><g class="markmap-node" transform="translate(612.5,239.5)"><a xlink:href="#conclusion_9"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(220, 57, 18); stroke: white; stroke-width: 2px; cursor: pointer;">Conclusion</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(220, 57, 18); cursor: pointer;">Conclusion</text></a></g><g class="markmap-node" transform="translate(612.5,165.5)"><a xlink:href="#lete28099s20talk20about20react20native20code_8"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(220, 57, 18); stroke: white; stroke-width: 2px; cursor: pointer;">Let’s talk about React Native code</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(220, 57, 18); cursor: pointer;">Let’s talk about React Native code</text></a></g><g class="markmap-node" transform="translate(612.5,91.5)"><a xlink:href="#data20structure_7"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(220, 57, 18); stroke: white; stroke-width: 2px; cursor: pointer;">Data structure</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(220, 57, 18); cursor: pointer;">Data structure</text></a></g><g class="markmap-node" transform="translate(612.5,17.5)"><a xlink:href="#something20needs20to20pay20attention20when20working20with20pouchdb_6"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(220, 57, 18); stroke: white; stroke-width: 2px; cursor: pointer;">Something needs to pay attention when working with PouchDB</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(220, 57, 18); cursor: pointer;">Something needs to pay attention when working with PouchDB</text></a></g><g class="markmap-node" transform="translate(612.5,-56.5)"><a xlink:href="#setup20pouchdb20as20a20client_5"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(220, 57, 18); stroke: white; stroke-width: 2px; cursor: pointer;">Setup PouchDB as a client</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(220, 57, 18); cursor: pointer;">Setup PouchDB as a client</text></a></g><g class="markmap-node" transform="translate(612.5,-130.5)"><a xlink:href="#setup20couchdb20as20a20server_4"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(220, 57, 18); stroke: white; stroke-width: 2px; cursor: pointer;">Setup CouchDB as a server</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 15px sans-serif; fill: rgb(220, 57, 18); cursor: pointer;">Setup CouchDB as a server</text></a></g><g class="markmap-node" transform="translate(446.5,-52.5)"><a xlink:href="#demo_2"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(255, 153, 0); stroke: white; stroke-width: 2px; cursor: pointer;">Demo</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(255, 153, 0); cursor: pointer;">Demo</text></a></g><g class="markmap-node" transform="translate(446.5,-130.5)"><a xlink:href="#introduce_1"><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(51, 102, 204); stroke: white; stroke-width: 2px; cursor: pointer;">Introduce</text><text class="markmap-node-text" y="-5" text-anchor="start" x="0" style="fill-opacity: 1; font: 20px sans-serif; fill: rgb(51, 102, 204); cursor: pointer;">Introduce</text></a></g><g class="annotation-group"><g class="annotations"/></g></g></svg></div></div><p></p>
<h1 class="xsj_heading_hash xsj_heading xsj_heading_h1" id="introduce_1"><div class="xiaoshujiang_element xsj_anchor">
  <a name="introduce_1" class="blank_anchor_name"></a><a id="introduce_1" class="blank_anchor_id"></a><a name="introduce" class="blank_anchor_name"></a><a id="introduce" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">Introduce</span></h1>
<p class="xsj_paragraph xsj_paragraph_level_0">Nowadays, most applications need a constant connection to the internet. Data loss or slow networks have become a problem most developers need to work around. When it comes to allowing users to go offline without losing their data, CouchDB and PouchDB offer some amazing features that are worth a look.</p>
<p class="xsj_paragraph xsj_paragraph_level_0">So the question is: can we achieve an offline-first experience using React Native? Can we store data locally? Can we sync data between multiple devices? So today I’ll try to make a note app, typical types of an application need these features to check if the required features are met.</p>
<p class="xsj_paragraph xsj_paragraph_level_0"><strong class="markdown_strong_asterisk">First,</strong> determine which basic features basic note app need.</p>
<p class="xsj_paragraph xsj_paragraph_level_0">Can working with slow or no network connection.</p>
<p class="xsj_paragraph xsj_paragraph_level_0">Synchronization between devices and server when going online (with actions like creating, reading, updating, deleting notes).</p>
<p class="xsj_paragraph xsj_paragraph_level_0"><strong class="markdown_strong_asterisk">Second,</strong> we’ll use CouchDB and PouchDB, what are they?</p>
<p class="xsj_paragraph xsj_paragraph_level_0"><em class="markdown_em_asterisk">CouchDB (remote/server)</em> is a database that completely embraces the web. Store your data with JSON documents. Access your documents with your web browser, via HTTP. Query, combine and transform your documents with JavaScript. CouchDB works well with modern web and mobile apps.</p>
<p class="xsj_paragraph xsj_paragraph_level_0"><em class="markdown_em_asterisk">PouchDB (local/client)</em> enables applications to store data locally while offline, then synchronize it with CouchDB and compatible servers when the application is back online, keeping the user’s data in sync no matter where they next login.</p>
<p class="xsj_paragraph xsj_paragraph_level_0">You haven’t cleared yet? Let’s come to the demo!</p>
<h1 class="xsj_heading_hash xsj_heading xsj_heading_h1" id="demo_2"><div class="xiaoshujiang_element xsj_anchor">
  <a name="demo_2" class="blank_anchor_name"></a><a id="demo_2" class="blank_anchor_id"></a><a name="demo" class="blank_anchor_name"></a><a id="demo" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">Demo</span></h1>
<p class="xsj_paragraph xsj_paragraph_level_0"><a href="https://www.youtube.com/watch?v=qT2Is58aZsQ" class="xsj_link xsj_manu_link">video</a></p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:977px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 58.984375%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='236'%3e%3cpath%20d='M0%2013v13h132V0H0v13m133%200v13h267l-1-13V1l-66-1h-66v2l-1%203V0H133v13m5%2022c0%202%201%203%2010%203l9-1%201-1%201%202%201%201%201-1h3l4-1h1l1%202%201-1%201-3-1-1h-12a488%20488%200%2000-21%201M66%2049L7%2050h59a721%20721%200%20000-1m166%201l-1%202c1%202-2%202-4%200h-3l-2%201c-1-3-3-2-4%200-1%203-2%203-4%202-2-2-3-2-3-1%200%202-11-1-12-3l-22-1h-21v4c0%203%202%207%205%207v4c-1%203-2%203-2%201-1-2-1-2-2%200s0%2013%202%2013l1%202c0%202%202%203%206%204l5%203v2c1%201%201%201-2%201l-4%201h-1l-1%201-3%201c-3%200-3%201-3%203%200%205%203%206%208%205h1l1-2%201%201v2c-3%202%202%202%2013%202h13c1-1-2-4-5-4s-8-3-8-4h3l2-2c1-2%201-2%201%201s0%204%202%204l2-1-1-1-1-1%203-1%205-1c1-2%203-3%203-1-1%201%200%201%201%201l2-2%202-2%202%201v1c-1%202%201%201%203-1h2l3%202v2c-2%203%201%205%203%202l2-2%204%202c4%203%206%203%206%200h1l2%201%201%201%201%201-1%201c-3%200%201%202%205%202%203%200%204%200%204-3l-1-4-2-1%201-1c2%202%202-3%200-5v-1c1%200%202-3%202-19V50h-2c-3%200-6%204-4%206l-1%201h-1v-4c-1-3-2-5-3-3m85%209c-4%204-4%2020-1%2020a807%20807%200%200129%200l1-11V58l-8-1-9%201h-8c0-2-1-1-4%201M74%20118l-50%201h50a496%20496%200%20000-1m38%2095c-9%204-1%2017%208%2012%203-1%203-2%203-6%200-6-5-10-11-6'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/d7d79f615b0c98dd14b039909351bf23/e7ebb/1615814968155.jpg" data-vdom-skip="true" data-vdom-cache="true" alt="Screenshots" title="Screenshots" name="images/1615814968155.jpg" data-src="./images/1615814968155.jpg" class="front_image" loading="lazy" srcSet="/acorns/static/d7d79f615b0c98dd14b039909351bf23/e4a55/1615814968155.jpg 256w,
/acorns/static/d7d79f615b0c98dd14b039909351bf23/36dd4/1615814968155.jpg 512w,
/acorns/static/d7d79f615b0c98dd14b039909351bf23/e7ebb/1615814968155.jpg 977w" sizes="(max-width: 977px) 100vw, 977px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption ">Screenshots</div></div></div><p></p>
<h1 class="xsj_heading_hash xsj_heading xsj_heading_h1" id="implement_3"><div class="xiaoshujiang_element xsj_anchor">
  <a name="implement_3" class="blank_anchor_name"></a><a id="implement_3" class="blank_anchor_id"></a><a name="implement" class="blank_anchor_name"></a><a id="implement" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">Implement</span></h1>
<h2 class="xsj_heading_hash xsj_heading xsj_heading_h2" id="setup20couchdb20as20a20server_4"><div class="xiaoshujiang_element xsj_anchor">
  <a name="setup20couchdb20as20a20server_4" class="blank_anchor_name"></a><a id="setup20couchdb20as20a20server_4" class="blank_anchor_id"></a><a name="setup-couchdb-as-a-server" class="blank_anchor_name"></a><a id="setup-couchdb-as-a-server" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">Setup CouchDB as a server</span></h2>
<p class="xsj_paragraph xsj_paragraph_level_0">Access <a href="http://couchdb.apache.org/" class="xsj_link xsj_manu_link">here</a> to download a suitable package for your OS. In this article, I’m working with windows.</p>
<p class="xsj_paragraph xsj_paragraph_level_0">Follow <a href="http://docs.couchdb.org/en/stable/install/windows.html" class="xsj_link xsj_manu_link">here</a> to install the package.</p>
<p class="xsj_paragraph xsj_paragraph_level_0">Choose <em class="markdown_em_asterisk">Configure a Single Node</em></p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:378px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 71.875%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='288'%3e%3cpath%20d='M0%20154v134h36V19H0v135m52-78l-2%205-1%204v-5l-3-4-1%202%202%206%203%205s2-2%202-5l2-4%201%204c2%207%204%206%206-1v-7c-1-1-1%200-2%202-1%205-1%206-2%202s-3-6-5-4m244%200v13h4c4%200%207-2%206-5v-4c0-3-1-4-5-4h-5m-14%207v6h4c7%200%2010-6%206-11-1-2-2-2-6-2h-4v7m-141%2077v17h111v-35H141v18m2%200l1%2016h107v-31l-54-1h-54v16m-98-1v12h83v-24H45v12m101%200v12h101v-24H146v12m-94-3c-3%203%200%207%204%205h2l2%201%201-1h1c1%201%201%201%201-1%201-2%202-2%202%200v3l1-3%201-1%201%202%203%202c1%201%202%201%203-1l3-1c1%201%202%200%202-2s0-2-1%200h-1c0-2-1-2-3-2-6%200-7%200-5-1v-1l-2%201-5%201-6%202c-2%201-4%201-3-1%201-1%202-2%203-1l1-1h-5m115%200l-5%201c-3%200-4%201-4%202%200%203%205%203%206%200h1c0%201%201%202%203%202s3%201%203%202c1%202%203%201%204-1%200-2%201-2%202-1h10l-2-1v-1c4%200%202-2-2-2s-5%200-5%202h-1c0-1-1-2-3-2s-2%200-1%201l1%202-3-2-1-2v-1l-3%201M14%20232c-5%204-2%2012%203%2012%203%200%207-4%207-7%200-5-6-8-10-5'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/2ebabc503f67b21a6b919d46dbbcc2b0/f0991/1615814968156.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1615814968156.png" data-src="./images/1615814968156.png" class="front_image" loading="lazy" srcSet="/acorns/static/2ebabc503f67b21a6b919d46dbbcc2b0/6f3f2/1615814968156.png 256w,
/acorns/static/2ebabc503f67b21a6b919d46dbbcc2b0/f0991/1615814968156.png 378w" sizes="(max-width: 378px) 100vw, 378px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">Create an account to access and control the database for both <strong class="markdown_strong_asterisk">Fauxton</strong> and auth connection from the client (<strong class="markdown_strong_asterisk">Fauxton</strong> is a native web-based interface built into CouchDB. It provides a basic interface to the majority of the functionality, including the ability to create, update, delete and view documents and design documents).</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:420px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 96.09374999999999%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='385'%3e%3cpath%20d='M0%20204v181h44V22H0v182M222%2047v6h3c4%200%207-3%207-7%200-3-3-6-7-6h-3v7m13-6l-1%206v6h4c5%200%207-2%205-5v-4c1-3-6-6-8-3M18%20185l-3%201-1%202-1%203v2l1%202c0%201%200%202%202%202l2%201h2l3-1%201-2%201-2%201-1-1-2-1-2-1-2-3-1h-2m-6%2075v8h13l4-1v-7c0-7%200-7-8-6h-6l-3-1v7m2%2031c-4%205-1%2014%206%2014%204%200%206-1%208-5%203-8-7-15-14-9m3%2034l-1%205v4c-2%200-3%204-2%206h11c1-2%200-6-2-6v-2c3-5-2-11-6-7m38%2026v15h100v-30H55v15m40-3l-3%201c-3%200-3%200-3%203%200%202%200%203%201%202%201-4%202-5%202-2%200%204%202%204%202%200v-2l1%203%201%203v-3a378%20378%200%20013%201h1c-1%203%202%204%204%202l4-1c2%200%202%200%202-3s0-3-1-1l-1%203-1-3c0-2-1-2-4-2-6%200-7%200-5-1%201-1%201-1-1-1l-2%201m28%203l1%204%201-3%202%201%202%201h17l-1-1c-2-1-2-1%200-1l2-1c-1-2-4-2-5-1s-1%201-1-1-2-3-2-1c-1%202-9%202-9%200s-2-1-2%201v3l-2-3c-2-3-3-3-3%202'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/feb8a7fcc65ca69d665ff0b8945c8be4/d10fb/1615814968164.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1615814968164.png" data-src="./images/1615814968164.png" class="front_image" loading="lazy" srcSet="/acorns/static/feb8a7fcc65ca69d665ff0b8945c8be4/6f3f2/1615814968164.png 256w,
/acorns/static/feb8a7fcc65ca69d665ff0b8945c8be4/d10fb/1615814968164.png 420w" sizes="(max-width: 420px) 100vw, 420px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">Setup an account with username = duytq and password = 123456 as an admin</p>
<p class="xsj_paragraph xsj_paragraph_level_0">Turn off the firewall or allow inbound port 5984, so connections from outside localhost (client devices at this case) can access to the server (if not, PouchDB at client won’t throw any error, but your result data is empty when synchronization finish).</p>
<p class="xsj_paragraph xsj_paragraph_level_0">In my case, I’m going set the firewall’s <code>Inbound Rules</code> like below (Control Panel =&gt; Windows Defender Firewall =&gt; Advanced settings =&gt; Inbound Rules =&gt; New Rule…)</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:480px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 110.546875%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='443'%3e%3cpath%20d='M0%20222v221h56a596%20596%200%20000-2H1V240A11039%2011039%200%20014%2040h2l3-1c3%200%202-3-1-4l-2-1-2%201-3%202V1h398l-1%2023v23H112v7l1%207h285v190l1%20190H113V89h2c2%200%203%201%203%203%200%203%200%204%203%204%202%200%202-1%202-4v-3h125V75H113v-7l-1%20184v191h289V0H0v222M4%2051c-3%203-3%207%200%207%202%200%202%201%202%207l1%207h3c2%200%203%200%203%203%200%204%200%204%205%204h4v-3c-1-5%202-6%203-1%201%203%2010%202%2011-1l1-2v2c0%203%200%203%207%203%205%200%206-1%206-2h1c1%202%201%202%203%200h1v2l2-3c0-4%202-3%202%201%200%202%200%202%201%201h1l1-2c1-2%205-4%205-2l-1%201-1%202c-1%202%200%202%201%202l2-3c0-2%201-2%204-2h4V57H43a499%20499%200%2001-33-3c2-4-3-7-6-3m5%2013v6h65V60H64c-9%200-10%200-8%201%202%202%205%203%205%201h5c3%200%203%200%203%202s-1%203-7%203l-7-1h-1l-1-3%201-3H33l-22-1c-2%200-2%201-2%205m16%200l2%202%201-1h1l11%201h11v-2c0-3-1-4-2-2H31l-2%201-2-1-1-1-1%203m89%2018v5h132V77h-62c-56%200-62%200-61%202%202%202%202%203%200%205-1%202-6%202-6%200v-2c-1-1%200-3%201-4s1-1-1-1c-3%200-3%200-3%205m13%2019v95a444%20444%200%20010%2066v63c1%201%201%2011-1%2013l1%202c1-1%201%206-1%209l1%202v32a2605%202605%200%20000%2026v16c0%2012%201%2012%2036%2012h28l1-3v-2h189l1-2v-8c0-4%200-4%202-5%204-1%205-1%202-1s-3-1-4-4c-1-5-1-5%203-6%203-1%203-1%201-1s-3%200-2-1l-1-2-1-20v-21l3%201%203-1-2-1-4-2a3752%203752%200%2000-2%2038v34H255l-126%201V261a60958%2060958%200%2001-2-160m253%20113l1%20124c1%202%207%203%207%201l-2-1c-3%200-3%200-4-7v-31l1-18v-1c-2-1-1-18%200-21v-2l-1-24a267%20267%200%20000-33v-5l1-2-1-3-1-1%201-10%201-9v-1a223%20223%200%20010-43v-13l-1-9-1-11c-1-2-1%2037-1%20120m-147-6v17h6c6%200%206%200%205%202%200%204%202%205%205%203h2c-1%201%200%201%202%201l4-1c0-1%201-1%201%201h7c1%200%202%200%202-2l-1-2c-1%201-2%200-2-1l4-1c3%200%204%200%204%203%200%202%200%202%203%203%203%200%203%200%203-3s0-3%203-3%203%200%202%202c-1%203%200%204%203%203%202%200%202%200%202-2%200-3%200-3%201-2%202%202%202%203%201%204v1c2%200%202-1%202-3-1-3%200-3%202-3l2%201%201%202v2l5%201c8-1%209-1%208-4v-2l2%201%201%202v2c-1%201-1%201%202%201l4-2c0-2%200-2%201%200s1%202%201-1l1-3v3c0%202%200%202%201%201%201-2%201-2%201%200v2l1-3v-3h29v-34H233v17m2%200v15h117v-30H235v15m7%208v6h99v-9l-1%204v4h-97v-5l-1-5v5m-2%20198l-1%206v6h43v-12l-21-1-21%201m1%206v4h19l20%201v-10h-39v5'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/b6a56221558ce487fb22660d56e71d67/e85cb/1615814968185.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1615814968185.png" data-src="./images/1615814968185.png" class="front_image" loading="lazy" srcSet="/acorns/static/b6a56221558ce487fb22660d56e71d67/6f3f2/1615814968185.png 256w,
/acorns/static/b6a56221558ce487fb22660d56e71d67/e85cb/1615814968185.png 480w" sizes="(max-width: 480px) 100vw, 480px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">Result</p>
<h2 class="xsj_heading_hash xsj_heading xsj_heading_h2" id="setup20pouchdb20as20a20client_5"><div class="xiaoshujiang_element xsj_anchor">
  <a name="setup20pouchdb20as20a20client_5" class="blank_anchor_name"></a><a id="setup20pouchdb20as20a20client_5" class="blank_anchor_id"></a><a name="setup-pouchdb-as-a-client" class="blank_anchor_name"></a><a id="setup-pouchdb-as-a-client" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">Setup PouchDB as a client</span></h2>
<p class="xsj_paragraph xsj_paragraph_level_0">First, init React Native project.</p>
<p class="xsj_paragraph xsj_paragraph_level_0">Then, follow <a href="https://dev.to/craftzdog/hacking-pouchdb-to-use-on-react-native-1gjh" class="xsj_link xsj_manu_link">here</a> to hack PouchDB can work with React Native (I tried <a href="https://github.com/stockulus/pouchdb-react-native" class="xsj_link xsj_manu_link">pouchdb-react-native</a> but seem this library hasn’t maintained anymore and some features don’t work so I can’t use it).</p>
<p class="xsj_paragraph xsj_paragraph_level_0">Finally, install <a href="https://github.com/nolanlawson/pouchdb-find" class="xsj_link xsj_manu_link">pouchdb-find</a> and <a href="https://github.com/pouchdb/upsert" class="xsj_link xsj_manu_link">pouchdb-upsert</a> so we can query or update data easier.</p>
<h2 class="xsj_heading_hash xsj_heading xsj_heading_h2" id="something20needs20to20pay20attention20when20working20with20pouchdb_6"><div class="xiaoshujiang_element xsj_anchor">
  <a name="something20needs20to20pay20attention20when20working20with20pouchdb_6" class="blank_anchor_name"></a><a id="something20needs20to20pay20attention20when20working20with20pouchdb_6" class="blank_anchor_id"></a><a name="something-needs-to-pay-attention-when-working-with-pouchdb" class="blank_anchor_name"></a><a id="something-needs-to-pay-attention-when-working-with-pouchdb" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">Something needs to pay attention when working with PouchDB</span></h2>
<p class="xsj_paragraph xsj_paragraph_level_0"><strong class="markdown_strong_asterisk">Limitation</strong></p>
<ul class="markdown_ul">
<li><span class="xsj_placeholder_span"></span>Can not store attachment since RN doesn’t support <code>FileReader.readAsArrayBuffer</code>. If you’re planning to manipulate multiple files in large size, just use PouchDB to store and sync the info file (like url, name, size…) and separate handle file (store, upload, download…) with <a href="https://github.com/itinance/react-native-fs" class="xsj_link xsj_manu_link">react-native-fs</a>.</li>
<li><span class="xsj_placeholder_span"></span>For using SQLite, the maximum size in an item is about 2.1MB, so any field with the size bigger than that will cause the error when storing to the devices.</li>
</ul>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:1024px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 11.71875%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='48'%3e%3cpath%20d='M0%2024v24h401l-200-1H1V1h399v23a260%20260%200%20001%200V0H0v24m120%2014l-5%201c-4%200-5%200-5%202l1%201%201-1h3c1%202%202%202%205%201h5l1-1h2l2%201h3l1-1h2l3%201%203-1h1l6%201%202-1v-1l1%201h1l-2-2a325%20325%200%2001-21%200l-9-1h-1'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/99583e66eca6fc56b59f308c5ef5ad64/2bef9/1615814968174.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1615814968174.png" data-src="./images/1615814968174.png" class="front_image" loading="lazy" srcSet="/acorns/static/99583e66eca6fc56b59f308c5ef5ad64/6f3f2/1615814968174.png 256w,
/acorns/static/99583e66eca6fc56b59f308c5ef5ad64/01e7c/1615814968174.png 512w,
/acorns/static/99583e66eca6fc56b59f308c5ef5ad64/2bef9/1615814968174.png 1024w,
/acorns/static/99583e66eca6fc56b59f308c5ef5ad64/6d74e/1615814968174.png 1085w" sizes="(max-width: 1024px) 100vw, 1024px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0"><strong class="markdown_strong_asterisk">Attention</strong></p>
<ul class="markdown_ul">
<li><span class="xsj_placeholder_span"></span>Using <code>sync</code>with<code>live: true</code> then <code>complete</code> status is never called (sequence of callback: <code>active =&gt; change =&gt; paused</code>).</li>
<li><span class="xsj_placeholder_span"></span>Using <code>sync</code> will revoke <code>paused</code> twice (the docs don’t explain but I think the one is pushed and the other is pull, since <code>replicate</code> just triggered once).</li>
<li><span class="xsj_placeholder_span"></span>If the data has been updated recently and you just call <code>sync/replicate</code> more than 5 times, then don’t have any callback is revoked, so that why I also need to check local db to handle this case.</li>
<li><span class="xsj_placeholder_span"></span>Calling <code>.cancel()</code> will invoke <code>completed</code>.</li>
<li><span class="xsj_placeholder_span"></span>If you would like to sort items base on field A, need to index field A first.</li>
<li><span class="xsj_placeholder_span"></span>Since we use PouchDB in React Native by hacking it (disable readAsArrayBuffer) so attachment will not work. I have to encode the attachment to Base64 and use it as a field with string in this demo.</li>
<li><span class="xsj_placeholder_span"></span>Using <code>find</code> with a field condition don’t create an index causing a warning.</li>
</ul>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:733px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 14.84375%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='59'%3e%3cpath%20d='M0%2030v29h401V0H0v30'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/cfa6686b948235be722215a2f2ea85d3/00b70/1615814968175.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1615814968175.png" data-src="./images/1615814968175.png" class="front_image" loading="lazy" srcSet="/acorns/static/cfa6686b948235be722215a2f2ea85d3/6f3f2/1615814968175.png 256w,
/acorns/static/cfa6686b948235be722215a2f2ea85d3/01e7c/1615814968175.png 512w,
/acorns/static/cfa6686b948235be722215a2f2ea85d3/00b70/1615814968175.png 733w" sizes="(max-width: 733px) 100vw, 733px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<ul class="markdown_ul">
<li><code>sync/replicate</code> with <strong class="markdown_strong_asterisk">filter</strong> option won’t invoke any callback when deleting (through api or sdk’s function…) a document from the other side. Explain in the image below.</li>
<li><span class="xsj_placeholder_span"></span>Solutions here are using update (set <code>_deleted = true</code>) instead of call delete OR add a condition <code>doc._deleted === true</code> in your filter</li>
</ul>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:808px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 23.046875%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='92'%3e%3cpath%20d='M161%2055l-8%201-8%201h-1l-1-2-1%202h-1l-1-1-2%201h-1c0-2-1-2-3-1-2%202-2%205%200%206v-4c1-1%201-1%201%201l1%202h3l2%201-1-2v-1l2%201%201%201h3l2%201-1-2v-1l3%202c1%202%202%201%201-2%200-2%200-2%201%200l4%203-1-2v-1l2%202%202%201v-1l-1-3c1-1%203%200%202%202l1%201%201-3c0-4-1-5-1-3'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/7ee4b9c4370e0202054c9eaf01cc6997/3534c/1615814968193.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1615814968193.png" data-src="./images/1615814968193.png" class="front_image" loading="lazy" srcSet="/acorns/static/7ee4b9c4370e0202054c9eaf01cc6997/6f3f2/1615814968193.png 256w,
/acorns/static/7ee4b9c4370e0202054c9eaf01cc6997/01e7c/1615814968193.png 512w,
/acorns/static/7ee4b9c4370e0202054c9eaf01cc6997/3534c/1615814968193.png 808w" sizes="(max-width: 808px) 100vw, 808px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<ul class="markdown_ul">
<li><span class="xsj_placeholder_span"></span>Deleting a database from remote (Fauxton) won’t cause any changes at the client, your local DB still exist.</li>
</ul>
<h2 class="xsj_heading_hash xsj_heading xsj_heading_h2" id="data20structure_7"><div class="xiaoshujiang_element xsj_anchor">
  <a name="data20structure_7" class="blank_anchor_name"></a><a id="data20structure_7" class="blank_anchor_id"></a><a name="data-structure" class="blank_anchor_name"></a><a id="data-structure" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">Data structure</span></h2>
<p class="xsj_paragraph xsj_paragraph_level_0">We only need a DB named <em class="markdown_em_asterisk">note</em></p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:314px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 52.34375%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='209'%3e%3cpath%20d='M5%206v100l1%2099h390V6L201%205%205%206m172%2019c0%205%200%206%202%206s2-1%202-4l1-5c1-2%203%200%203%205%200%203%200%204%202%204s2-1%202-5c0-7-1-8-7-8h-5v7m15-5c-3%203-2%207%200%209s8%203%2010%201%201-9-1-10c-2-3-8-2-9%200m24%200c-5%204-2%2011%204%2011%203%200%205-1%205-2%200-2%200-2-3-1l-4-1%204-1c3%200%204%200%204-2%200-5-7-8-10-4M7%2056v16h210V40H7v16m212%200v16h175V40H219v16m61-4c-1%201-2%203-2%207l-1%206c0%202%203%205%205%205%206%200%209-6%205-8l-3-1%202-2c2-1%202-2%202-4v-2l1-1h-9M7%2089v16h210V73H7v16m212%200v16h175V73H219v16m61-3l-2%206-1%206c-1%202%203%205%206%205%207%200%208-7%201-8-2%200-3-1-1-1s5-3%205-6v-2l1-1c0-2-8-1-9%201M7%20123v15h210v-31H7v16m212%200v15h175v-31H219v16m61-4c-2%202-3%2013-1%2015%202%203%206%202%209%200%202-3%200-5-4-6-2%200-3-1-1-1s5-3%205-6v-2c3%200%200-1-3-2-3%200-4%201-5%202m-249%200v10c3%203%2010%200%2010-5s-6-8-10-5M7%20155v15h210v-30H7v15m212%200v15h175v-30H219v15m-172-3l-1%209v7h4c7%200%208-6%200-7-2-1-3-1-1-1%203%200%206-3%206-6v-2c1-1%200-1-3-1l-5%201m232%200c-1%202-2%2015-1%2016%202%202%208%201%209-1%204-3%202-6-3-6-3%200-3%200-1-1%203%200%205-3%205-6v-2c1-1%200-1-3-1l-6%201M7%20172v31h210v-31H7m212%2015v16h175v-31H219v15'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/94d3e7d794a13401f2dae605710ed1f1/5b158/1615814968194.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1615814968194.png" data-src="./images/1615814968194.png" class="front_image" loading="lazy" srcSet="/acorns/static/94d3e7d794a13401f2dae605710ed1f1/6f3f2/1615814968194.png 256w,
/acorns/static/94d3e7d794a13401f2dae605710ed1f1/5b158/1615814968194.png 314w" sizes="(max-width: 314px) 100vw, 314px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<h2 class="xsj_heading_hash xsj_heading xsj_heading_h2" id="lete28099s20talk20about20react20native20code_8"><div class="xiaoshujiang_element xsj_anchor">
  <a name="lete28099s20talk20about20react20native20code_8" class="blank_anchor_name"></a><a id="lete28099s20talk20about20react20native20code_8" class="blank_anchor_id"></a><a name="lets-talk-about-react-native-code" class="blank_anchor_name"></a><a id="lets-talk-about-react-native-code" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">Let’s talk about React Native code</span></h2>
<p class="xsj_paragraph xsj_paragraph_level_0"><strong class="markdown_strong_asterisk">Init PouchDB variables</strong></p>
<p class="xsj_paragraph xsj_paragraph_level_0">We need 2 variables to control a local and a remote. So initialize them.</p>
<div class="xiaoshujiang_code_container"><div data-processed="true" class="xiaoshujiang_pre"><div class="language-js hljs javascript code_linenums xiaoshujiang_code"><ol start="1" class="ol_linenums" style="counter-reset: lines 0;"><li class="li_linenum " date-linenum="1"><span class="li_linenum_before_span li_linenum_before_span_hide">1</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> nameIndex = {<span class="hljs-attr">UPDATED_AT</span>: <span class="hljs-string">'index-updated_at'</span>}<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="2"><span class="li_linenum_before_span li_linenum_before_span_hide">2</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="3"><span class="li_linenum_before_span li_linenum_before_span_hide">3</span><span class="hljs-keyword">const</span> myIP = <span class="hljs-string">"10.68.64.131"</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="4"><span class="li_linenum_before_span li_linenum_before_span_hide">4</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="5"><span class="li_linenum_before_span li_linenum_before_span_hide">5</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> remoteNoteDb = <span class="hljs-keyword">new</span> PouchDB(<span class="hljs-string">`http://duytq:123456@<span class="hljs-subst">${myIP}</span>:5984/note`</span>)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="6"><span class="li_linenum_before_span li_linenum_before_span_hide">6</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> localNoteDb = <span class="hljs-keyword">new</span> PouchDB(<span class="hljs-string">'note'</span>, {<span class="hljs-attr">adapter</span>: <span class="hljs-string">'react-native-sqlite'</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li></ol></div></div></div>
<p class="xsj_paragraph xsj_paragraph_level_0">The param’s format string is</p>
<div class="xiaoshujiang_code_container"><div data-processed="true" class="xiaoshujiang_pre"><div class="nohighlight hljs code_linenums xiaoshujiang_code"><ol start="1" class="ol_linenums" style="counter-reset: lines 0;"><li class="li_linenum " date-linenum="1"><span class="li_linenum_before_span li_linenum_before_span_hide">1</span>http://[username]:[password]@[ipAddress]:[port]/[dbName]<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li></ol></div></div></div>
<p class="xsj_paragraph xsj_paragraph_level_0">We’ll control the DB with administrative privileges. The IP is localhost’s address in your LAN network and using port as default (5984).</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:746px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 19.921875%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='79'/%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/69dacefe1a40530c23586fc8c0225285/62de4/1615814968186.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1615814968186.png" data-src="./images/1615814968186.png" class="front_image" loading="lazy" srcSet="/acorns/static/69dacefe1a40530c23586fc8c0225285/6f3f2/1615814968186.png 256w,
/acorns/static/69dacefe1a40530c23586fc8c0225285/01e7c/1615814968186.png 512w,
/acorns/static/69dacefe1a40530c23586fc8c0225285/62de4/1615814968186.png 746w" sizes="(max-width: 746px) 100vw, 746px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">DB security</p>
<p class="xsj_paragraph xsj_paragraph_level_0"><strong class="markdown_strong_asterisk">Designing Home screen: containing a list of notes</strong></p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:324px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 177.734375%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='711'%3e%3cpath%20d='M0%2041v40h401V0H0v41M165%206c-1%200-2%201-2%208l1%209h4c6%201%206%201%206-5l1-5%201%202v4c0%202%200%202%201%200%202-3%202-6%200-7l-2-1-1-2-1-3h-8m19%200l-1%203h1c2-2%203-1%201%202v10c0%202%200%202%201%201h13v-4c2-6-3-12-9-10l-3-1c0-2-1-2-3-1m63%200l-1%208c0%207%201%209%204%208h3c2%200%202-1%202-2-1-3%201-6%204-6s3-2-1-5c-2-3-3-4-7-4l-4%201M50%207l-3%201c-5%200-6%201-6%206s1%206%207%206h5v-5l-1-7-2-1m137%204c-2%205%200%209%205%209%203%200%205-1%206-4%201-6-7-9-11-5m15%2041c-2%200-2%201-2%205%200%207%203%207%203%201%200-3%201-4%202-4l1%204c0%206%203%206%203%200%200-3%200-4%202-4l2%204%201%204%201-4-1-6h-12M19%2093c-2%201-2%202-2%2027%200%2023%200%2026%202%2028%202%203%20361%203%20363%200%203-2%203-51%201-55-3-2-360-3-364%200m1%201l-1%2027v26l2%201h361v-26l-1-28c-2-2-359-2-361%200m21%2013c-3%203%201%2011%204%208h6c5%201%205%200%205-5-1-3-3-5-6-3h-9m-20%2054c-4%201-4%203-4%2029l1%2028c2%201%20361%202%20364%200%202-1%202-2%202-27%200-27%200-30-4-30H21m1%202l-2%201-1%2026c0%2023%200%2026%202%2027s356%202%20359%200%203-52%200-54H22m-4%2069c-2%204-1%2053%200%2055%202%201%2020%202%20183%202%20177%200%20180-1%20182-2%202-3%202-53-1-55-1-2-19-2-182-2-180%200-181%200-182%202m2%201c-2%200-2%2051%200%2053s359%202%20361%200c1-1%202-49%200-52%200-2-17-2-180-2l-181%201m63%2011c-1%201-2%202-3%201-5-1-8%205-5%208%203%202%207%200%207-4%200-2%200-3%201-2l1%202c-1%202%201%205%203%205l1-2h2c1%202%205%202%206%200l-3-1-2-1h2c3%200%203%200%203-2-1-3-4-4-6-2-1%201-2%200-3-2-2-2-2-3-4%200m-42%202v7c2%202%205%201%206-1%202-2%202-2%203%200%203%205%208%200%206-5-1-2-6-3-7-1%200%202%200%202-2%200-1-1-5-2-6%200m-22%2055c-3%202-3%2053%200%2055%204%203%20361%203%20363%200%203-3%203-53%200-55-3-3-359-3-363%200m1%201c-2%200-2%2051%200%2053s359%202%20361%200%202-51%200-53c-1-1-358-2-361%200m35%2010c0%202-2%203-2%201h-2l-4%201c-3%200-3%200-3%205%200%203%200%204%202%204l1-3c0-2%201-3%202-3%201-1%201%200%201%201%200%204%201%205%205%205%203%200%203%200%203-3l1-3%201%203c0%203%203%204%203%201h1c2%202%208%203%208%201h1l4%201c3%200%203%200%203-4v-4l2%204v7c1%202%206-6%206-11%200-2-3-1-3%201h-1l-6-2c-4%200-6%202-4%203v1c-2%201-2%200-2-3-1-4-3-7-3-3l-2%202-3%202-1%202v-2l-3-2-2-1c0-3-2-3-3-1m61%201l-3%201c-3%200-3%200-3%205s3%206%203%201c1-4%203-5%203-2%200%204%202%205%204%205v-7c1%200%203%206%202%208-1%201%200%203%201%202%202%200%205-8%205-10%200-3-3-2-3%200l-1%203v-3l-2-2-3-1-1-1-2%201m-23%207c-1%206%200%208%202%205l3-2%202-2h1l4%202c4%200%204%200%204-3l-1-5c-1-2-5-1-6%201v3l-1-2c-1-2-3-3-5-3h-3v6m250%20320c-24%207-18%2044%207%2044%2014%200%2023-9%2023-23%200-16-14-26-30-21m7%2010c-2%200-2%201-2%204v5h-4c-4%200-5%200-5%202s1%202%205%202l4%201v4c0%204%201%205%203%205%201%200%202-1%202-5v-4l4-1c4%200%205%200%205-2s-1-2-5-2h-4v-5c0-4%200-5-3-4'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/7a58008245c67b5478f75c55d9ad87b1/033fb/1615814968187.jpg" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1615814968187.jpg" data-src="./images/1615814968187.jpg" class="front_image" loading="lazy" srcSet="/acorns/static/7a58008245c67b5478f75c55d9ad87b1/e4a55/1615814968187.jpg 256w,
/acorns/static/7a58008245c67b5478f75c55d9ad87b1/033fb/1615814968187.jpg 324w" sizes="(max-width: 324px) 100vw, 324px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">Home screen</p>
<p class="xsj_paragraph xsj_paragraph_level_0">The note with the latest update will be at the top of the list, meaning we need to sort item by field <code>updated_at</code> and as I said, we have to index this field to make it works.</p>
<div class="xiaoshujiang_code_container"><div data-processed="true" class="xiaoshujiang_pre"><div class="language-js hljs javascript code_linenums xiaoshujiang_code"><ol start="1" class="ol_linenums" style="counter-reset: lines 0;"><li class="li_linenum " date-linenum="1"><span class="li_linenum_before_span li_linenum_before_span_hide">1</span>remoteNoteDb.createIndex({<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="2"><span class="li_linenum_before_span li_linenum_before_span_hide">2</span>    <span class="hljs-attr">index</span>: {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="3"><span class="li_linenum_before_span li_linenum_before_span_hide">3</span>        <span class="hljs-attr">fields</span>: [<span class="hljs-string">'updated_at'</span>],<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="4"><span class="li_linenum_before_span li_linenum_before_span_hide">4</span>        <span class="hljs-attr">name</span>: nameIndex.UPDATED_AT,<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="5"><span class="li_linenum_before_span li_linenum_before_span_hide">5</span>        <span class="hljs-attr">ddoc</span>: nameIndex.UPDATED_AT,<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="6"><span class="li_linenum_before_span li_linenum_before_span_hide">6</span>    }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="7"><span class="li_linenum_before_span li_linenum_before_span_hide">7</span>}).then(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="8"><span class="li_linenum_before_span li_linenum_before_span_hide">8</span>    <span class="hljs-built_in">console</span>.log(TAG, result)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="9"><span class="li_linenum_before_span li_linenum_before_span_hide">9</span>}).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="10"><span class="li_linenum_before_span li_linenum_before_span_hide">10</span>    <span class="hljs-built_in">console</span>.log(TAG, err)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="11"><span class="li_linenum_before_span li_linenum_before_span_hide">11</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li></ol></div></div></div>
<p class="xsj_paragraph xsj_paragraph_level_0">Checking the database on the server, you’ll see a new document similar below</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:1024px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 17.1875%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='69'%3e%3cpath%20d='M112%2025v5h21V20h-21v5m254%200v5h33V20h-33v5M0%2062v6h81V56H0v6m2%200v5h78V57H2v5'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/7bdba882562fe1d6aa1ca556541c30a2/2bef9/1615814968192.png" data-vdom-skip="true" data-vdom-cache="true" alt="Indexing updated_at field" title="Indexing updated_at field" name="images/1615814968192.png" data-src="./images/1615814968192.png" class="front_image" loading="lazy" srcSet="/acorns/static/7bdba882562fe1d6aa1ca556541c30a2/6f3f2/1615814968192.png 256w,
/acorns/static/7bdba882562fe1d6aa1ca556541c30a2/01e7c/1615814968192.png 512w,
/acorns/static/7bdba882562fe1d6aa1ca556541c30a2/2bef9/1615814968192.png 1024w,
/acorns/static/7bdba882562fe1d6aa1ca556541c30a2/71c1d/1615814968192.png 1536w,
/acorns/static/7bdba882562fe1d6aa1ca556541c30a2/f69df/1615814968192.png 1762w" sizes="(max-width: 1024px) 100vw, 1024px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption ">Indexing updated_at field</div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:377px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 140.625%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='562'%3e%3cpath%20d='M0%20281v281h401V0H0v281m0%201'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/10e875445b24171a20e2d96d1b1d0da8/6146e/1615814968195.png" data-vdom-skip="true" data-vdom-cache="true" alt="Indexing updated_at field" title="Indexing updated_at field" name="images/1615814968195.png" data-src="./images/1615814968195.png" class="front_image" loading="lazy" srcSet="/acorns/static/10e875445b24171a20e2d96d1b1d0da8/6f3f2/1615814968195.png 256w,
/acorns/static/10e875445b24171a20e2d96d1b1d0da8/6146e/1615814968195.png 377w" sizes="(max-width: 377px) 100vw, 377px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption ">Indexing updated_at field</div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0"><strong class="markdown_strong_asterisk">Notes</strong></p>
<ul class="markdown_ul">
<li><span class="xsj_placeholder_span"></span>At CouchDB, an index is also a document (a row) like others general data (all things at CouchDB is document — include index, filter condition, map-reduce…).</li>
<li><span class="xsj_placeholder_span"></span>You can always create this index directly from <strong class="markdown_strong_asterisk">Fauxton</strong> instead of js code at the client.</li>
<li><span class="xsj_placeholder_span"></span>Index just need to initialize once (meaning if you initialize from js code at the client, just run the code once is enough).</li>
</ul>
<p class="xsj_paragraph xsj_paragraph_level_0">When starting, we will retrieve local data (to show any information the device has stored and synchronize data from remote to update it).</p>
<div class="xiaoshujiang_code_container"><div class="xiaoshujiang_code_title_container"><span class="xiaoshujiang_code_title">Synchronize data…</span><span class="xiaoshujiang_code_infos">js&nbsp;&nbsp;&nbsp;&nbsp;28行</span><div style="clear: both;" class="xiaoshujiang_code_clear"></div></div><div data-processed="true" class="xiaoshujiang_pre"><div class="language-js hljs javascript code_linenums xiaoshujiang_code"><ol start="1" class="ol_linenums" style="counter-reset: lines 0;"><li class="li_linenum " date-linenum="1"><span class="li_linenum_before_span li_linenum_before_span_hide">1</span>syncDb = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="2"><span class="li_linenum_before_span li_linenum_before_span_hide">2</span>    <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">true</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="3"><span class="li_linenum_before_span li_linenum_before_span_hide">3</span>    handlerSync = PouchDB.sync(remoteNoteDb, localNoteDb, {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="4"><span class="li_linenum_before_span li_linenum_before_span_hide">4</span>        <span class="hljs-attr">live</span>: <span class="hljs-literal">true</span>,<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="5"><span class="li_linenum_before_span li_linenum_before_span_hide">5</span>        <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="6"><span class="li_linenum_before_span li_linenum_before_span_hide">6</span>    })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="7"><span class="li_linenum_before_span li_linenum_before_span_hide">7</span>        .on(<span class="hljs-string">'change'</span>, (info) =&gt; {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="8"><span class="li_linenum_before_span li_linenum_before_span_hide">8</span>            <span class="hljs-comment">// console.log(TAG, 'sync onChange', info)</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="9"><span class="li_linenum_before_span li_linenum_before_span_hide">9</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="10"><span class="li_linenum_before_span li_linenum_before_span_hide">10</span>        .on(<span class="hljs-string">'paused'</span>, (err) =&gt; {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="11"><span class="li_linenum_before_span li_linenum_before_span_hide">11</span>            <span class="hljs-comment">// console.log(TAG, 'sync onPaused', err)</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="12"><span class="li_linenum_before_span li_linenum_before_span_hide">12</span>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isAtCurrentScreen) {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="13"><span class="li_linenum_before_span li_linenum_before_span_hide">13</span>                <span class="hljs-keyword">this</span>.getListNoteFromDb()<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="14"><span class="li_linenum_before_span li_linenum_before_span_hide">14</span>            }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="15"><span class="li_linenum_before_span li_linenum_before_span_hide">15</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="16"><span class="li_linenum_before_span li_linenum_before_span_hide">16</span>        .on(<span class="hljs-string">'active'</span>, () =&gt; {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="17"><span class="li_linenum_before_span li_linenum_before_span_hide">17</span>            <span class="hljs-comment">// console.log(TAG, 'sync onActive')</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="18"><span class="li_linenum_before_span li_linenum_before_span_hide">18</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="19"><span class="li_linenum_before_span li_linenum_before_span_hide">19</span>        .on(<span class="hljs-string">'denied'</span>, (err) =&gt; {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="20"><span class="li_linenum_before_span li_linenum_before_span_hide">20</span>            <span class="hljs-comment">// console.log(TAG, 'sync onDenied', err)</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="21"><span class="li_linenum_before_span li_linenum_before_span_hide">21</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="22"><span class="li_linenum_before_span li_linenum_before_span_hide">22</span>        .on(<span class="hljs-string">'complete'</span>, (info) =&gt; {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="23"><span class="li_linenum_before_span li_linenum_before_span_hide">23</span>            <span class="hljs-comment">// console.log(TAG, 'sync onComplete', info)</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="24"><span class="li_linenum_before_span li_linenum_before_span_hide">24</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="25"><span class="li_linenum_before_span li_linenum_before_span_hide">25</span>        .on(<span class="hljs-string">'error'</span>, (err) =&gt; {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="26"><span class="li_linenum_before_span li_linenum_before_span_hide">26</span>            <span class="hljs-comment">// console.log(TAG, 'sync onError', err)</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="27"><span class="li_linenum_before_span li_linenum_before_span_hide">27</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="28"><span class="li_linenum_before_span li_linenum_before_span_hide">28</span>}<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li></ol></div></div></div>
<p class="xsj_paragraph xsj_paragraph_level_0">Synchronization run real-time with live and any data change or update has listened, so at <code>paused</code> we check if the user’s not at this screen =&gt; don’t need to read the local data and render the UI.</p>
<div class="xiaoshujiang_code_container"><div class="xiaoshujiang_code_title_container"><span class="xiaoshujiang_code_title">then read data from local DB to display on the screen</span><span class="xiaoshujiang_code_infos">js&nbsp;&nbsp;&nbsp;&nbsp;24行</span><div style="clear: both;" class="xiaoshujiang_code_clear"></div></div><div data-processed="true" class="xiaoshujiang_pre"><div class="language-js hljs javascript code_linenums xiaoshujiang_code"><ol start="1" class="ol_linenums" style="counter-reset: lines 0;"><li class="li_linenum " date-linenum="1"><span class="li_linenum_before_span li_linenum_before_span_hide">1</span>getListNoteFromDb = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="2"><span class="li_linenum_before_span li_linenum_before_span_hide">2</span>    <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">true</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="3"><span class="li_linenum_before_span li_linenum_before_span_hide">3</span>    localNoteDb<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="4"><span class="li_linenum_before_span li_linenum_before_span_hide">4</span>        .find({<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="5"><span class="li_linenum_before_span li_linenum_before_span_hide">5</span>            <span class="hljs-attr">selector</span>: {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="6"><span class="li_linenum_before_span li_linenum_before_span_hide">6</span>                <span class="hljs-attr">updated_at</span>: {<span class="hljs-attr">$gt</span>: <span class="hljs-literal">true</span>}<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="7"><span class="li_linenum_before_span li_linenum_before_span_hide">7</span>            },<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="8"><span class="li_linenum_before_span li_linenum_before_span_hide">8</span>            <span class="hljs-attr">fields</span>: [<span class="hljs-string">'_id'</span>, <span class="hljs-string">'title'</span>, <span class="hljs-string">'updated_at'</span>],<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="9"><span class="li_linenum_before_span li_linenum_before_span_hide">9</span>            <span class="hljs-attr">use_index</span>: nameIndex.UPDATED_AT,<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="10"><span class="li_linenum_before_span li_linenum_before_span_hide">10</span>            <span class="hljs-attr">sort</span>: [{<span class="hljs-attr">updated_at</span>: <span class="hljs-string">'desc'</span>}]<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="11"><span class="li_linenum_before_span li_linenum_before_span_hide">11</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="12"><span class="li_linenum_before_span li_linenum_before_span_hide">12</span>        .then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="13"><span class="li_linenum_before_span li_linenum_before_span_hide">13</span>            <span class="hljs-built_in">console</span>.log(TAG, <span class="hljs-string">'find list note'</span>, result)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="14"><span class="li_linenum_before_span li_linenum_before_span_hide">14</span>            <span class="hljs-keyword">this</span>.setState({<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="15"><span class="li_linenum_before_span li_linenum_before_span_hide">15</span>                <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>,<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="16"><span class="li_linenum_before_span li_linenum_before_span_hide">16</span>                <span class="hljs-attr">arrNote</span>: [...result.docs]<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="17"><span class="li_linenum_before_span li_linenum_before_span_hide">17</span>            })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="18"><span class="li_linenum_before_span li_linenum_before_span_hide">18</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="19"><span class="li_linenum_before_span li_linenum_before_span_hide">19</span>        .catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="20"><span class="li_linenum_before_span li_linenum_before_span_hide">20</span>            <span class="hljs-comment">// console.log(TAG, 'err find list note', err)</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="21"><span class="li_linenum_before_span li_linenum_before_span_hide">21</span>            <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="22"><span class="li_linenum_before_span li_linenum_before_span_hide">22</span>            Toast.show(err.message)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="23"><span class="li_linenum_before_span li_linenum_before_span_hide">23</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="24"><span class="li_linenum_before_span li_linenum_before_span_hide">24</span>}<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li></ol></div></div></div>
<p class="xsj_paragraph xsj_paragraph_level_0">We’re checking if the user goes to detail or create new note screen and come back, we should reload the list since maybe they have changed notes.</p>
<div class="xiaoshujiang_code_container"><div data-processed="true" class="xiaoshujiang_pre"><div class="language-js hljs javascript code_linenums xiaoshujiang_code"><ol start="1" class="ol_linenums" style="counter-reset: lines 0;"><li class="li_linenum " date-linenum="1"><span class="li_linenum_before_span li_linenum_before_span_hide">1</span>returnFromDetail = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="2"><span class="li_linenum_before_span li_linenum_before_span_hide">2</span>    <span class="hljs-keyword">this</span>.isAtCurrentScreen = <span class="hljs-literal">true</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="3"><span class="li_linenum_before_span li_linenum_before_span_hide">3</span>    <span class="hljs-keyword">this</span>.getListNoteFromDb()<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="4"><span class="li_linenum_before_span li_linenum_before_span_hide">4</span>}<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="5"><span class="li_linenum_before_span li_linenum_before_span_hide">5</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="6"><span class="li_linenum_before_span li_linenum_before_span_hide">6</span>returnFromAddNewNote = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="7"><span class="li_linenum_before_span li_linenum_before_span_hide">7</span>    <span class="hljs-keyword">this</span>.isAtCurrentScreen = <span class="hljs-literal">true</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="8"><span class="li_linenum_before_span li_linenum_before_span_hide">8</span>    <span class="hljs-keyword">this</span>.getListNoteFromDb()<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="9"><span class="li_linenum_before_span li_linenum_before_span_hide">9</span>}<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li></ol></div></div></div>
<p class="xsj_paragraph xsj_paragraph_level_0"><strong class="markdown_strong_asterisk">Designing Detail screen: displays detailed information, edit, delete a note</strong></p>
<p class="xsj_paragraph xsj_paragraph_level_0"><strong class="markdown_strong_asterisk">READ NOTE</strong></p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:324px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 177.734375%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='711'%3e%3cpath%20d='M0%2041v40h401V0H0v41M164%206l-1%209v8h5l5%201V5h-4l-5%201m83%200l-1%2016c8%201%208%201%208-1-1-3%202-7%204-7%203%200%203-2%200-6-4-3-10-4-11-2M16%209c-2%202-3%208-1%2010l6%201c4%200%205%200%205-3%201-3%200-8-1-8l-1-2h-6l-2%202m170%200c-2%203-2%204-2%208%200%206%201%207%203%205h9c2%202%203%201%203-5%200-5%200-6-3-8-3-3-7-3-10%200m2%202c-4%204-1%209%204%209%203%200%205-2%205-5%200-5-6-8-9-4M20%2049l-5%205%205%205%205%206h2c1-1%201-2-3-5l-3-4h8l8-1c0-2-2-2-8-2-9%200-9%200-5-4%203-2%204-5%202-5l-6%205m298-1c-2%200-1%2016%200%2018l9%201h7V48l-7-1-9%201m-167%201v5c0%209%200%208%204%208s5%200%206-2V50c-2-2-9-2-10-1m31%204c-3%206%201%2011%207%209%203%200%203%200%203-5v-5l-4-1c-3%200-4%200-6%202M41%20101v11c0%203%202%203%202-1%200-2%201-3%202-3l1%203%201%203%201-1h11l4%202c3%200%203-1%203-4s0-3%201-2l1%205c-1%205%202%205%203%200l2-4v-5l-2%202-1%203-1-3c0-3-8-3-11%200-1%201-1%201-1-1v-4c-2-1-4%200-2%202l-2%201-3%202h-2l-3-2-2-2c0-2-2-3-2-2m-25%202v6c0%204%201%205%204%205l4-1h1c2%203%203%201%203-5%200-5%200-6-2-6l-1%201-1%206v-3l-1-3h-7m87%200v1l-10%201-5%201-2%201-4-2h-4v7c0%206%202%208%203%204l1-1%203-2h3l6%201c4%200%205%200%205-3l1-3h2l1%205c0%202%200%202%202%201l1-4v-2c1%200%202%202%202%206%201%205%202%204%204-2s2-9-1-6c-1%202-1%202-2%201l-2-2-2-1-1-1h-1m-32%2062v14h3c2%200%203%200%205%204l2%204%202-5%202-5%201%207c0%206-1%208-2%208l-1%203-1%202v3l-1%201v3l-1%202-1%201-1%201c0%202-3%203-4%203l1-2%202-1%201-7c2-7%201-8-2-5-2%201-3%202-2%203l-1%203c-2%200-2%202-2%2011l1%209c1-1%201-1%202%201s0%204-2%204l-1%206c0%206%201%207%207%207%202%200%202%200%202%204s0%205%203%208c4%204%2013%207%2018%204%202-1%202-1%205%202%202%203%203%203%206%203%203-1%204-1%203%201v1l-1%201c-2%203-2%207%200%207l5%202%203%202-3%202-4%202h-1l1-2%201-2-3%201-1%202h-2c-3-3-12-1-10%202l-1%203h-2c0-2-3-3-5-2-3%201-3%203%200%203%202-1%205%200%205%201l-3%201c-4%200-4%201%200%205%205%205%209%206%2018%206a1115%201115%200%200112-1l3-2%207-4%203-2v2c0%202%200%202%201%200%203-3%203-1%202%207v7l-2-4-1-3h-4c-8-1-15%205-11%209v2h-1c-1-1-1%200-1%202v2h-2l-1-1h-2l-6%202c-4%200-5%200-5%202%201%203%203%203%2040%204h36l1-3%202-3-3-2c-4-1-5-3-3-3v-1l-20-2c-3%200-4-1-4-2%200-2-4-4-6-3-1%201-1%200-1-1v-4c-1-2%202-5%204-4l2%202c0%203%208-1%208-4v-6l2-4c2-3%203-4%203-8l1-6%202-3%201-2%201%202c0%202%202%203%202%201l3-1c2-1%202-1%202%201l1%204v1l-2-2c-2-2-2-2-5-1-4%203-5%205-4%208l-2%205-2%207c0%205%200%205%202%206%202%200%202%201%201%201l-2%201c-2-2-2%201%200%202%201%202%201%202-1%202-4%200-2%203%202%204a6694%206694%200%200010-1l2-1c0-1-1-2-3-2h-6l-2-1%202-1c2-2%203-2%204-1l3%201c1-1-2-3-5-3s-3-2%200-2c4-1%208%200%208%201l1%202%201-1c0-2%201-2%204-2l3-1v-2c1-1%205-5%207-5l1-1%203-1c2%200%203%200%202%201l-1%202v2l-1%202c1%202%203%201%202-1s2-1%204%202c1%202%202%202%204%201v-2c-1-2-1-2%202-2%202-1%202-3%200-3l-2-2c0-2%201-3%202-3%202%200%203%200%204-2l1-2v2c0%202%201%202%206%202%204%200%204%200%202%202-3%202-3%206%200%207%205%201%209-4%206-7v-1l1-4v-4l1%204c1%205%203%205%205%200l1-3v3c0%203%203%209%205%2010v1l1%201%205-1h2c0%201%201%202%203%202s2%200%202-3v-3l1-2c1-1%201-1%201%201l2%203c2%200%203%203%201%203v1l2%203%202%201%201%201%201%202%201-2%202%201c1%204%204%207%205%207l6%203%206%202c4%200%205%200%204-1l1-1h1l-1-2-1-3h1l4-4v-1l2%201c0%201%201%202%204%202l4%201-1%201-6%202h9l1-2c-1-2%200-2%202-2s2%200%201%201l-1%201c0%202-2%205-3%205-2%200-2%201-1%203l-1%203h-2c-6%201%207%207%2015%207l5%201%204%201h3v-11c0-10%200-12-2-12h-4c-2-1-4%200-5%201s-1%201-1-1%202-4%205-4c3-1%203-1%202-7-2-5%201-3%203%203l2%206v-9c0-9%200-9-5-9-4%200-5%201-3%203v5l-4-4c-1-4-1-4%201-6%203-3%202-4-2-4l-4-2%204-1%208%204c-1%201%204%203%205%203V152h-13l-2%205c-1%202-2%205-1%206l-1%201c-3%200-3%202-1%206s1%205-2%206c-4%200-4%200-4-13v-11l-4-1c-4%200-7%202-7%205l2%201%201%203h-1l-1%201c1%201-3%202-4%201s-3%200-4%203l-2%203c2%200%202%201%201%205%200%202-1%202-3%202s-2%200-4%203v5l-2%203c-3%202-3%203-2%204v4c-3%200-5%204-2%206h4c0-1%202-1%202%201l-1%201-1%202-1%201-1-1c0-2-1-2-3-1-1%202-1%203%201%203l1%202c0%202%200%202-2%201-2-3-7%202-7%208l-1%206-2%204-2%204v-6l3-10c1-4%203-6%204-7%203-2%203-2%203-14s0-13%202-15l4-3%201-2c-1-1%200-3%203-6%207-8%209-11%207-11l-2%201-1%202c-1%202-5-1-5-4l-1-2-1%202-1%202-5%205c-4%205-5%205-6%200%200-6-2-8-5-8-2%200-3%201-3%204l-2%202-1%201%201%201%201%202-1%201c-1-1-2%200-2%201-1%203-3%204-3%202l-5-1-6-1h-1l-2-1c-1%200-1-1%201-2l2-3c-1-1-6%204-6%206l-1%203-2%202-1%203c-1%201-1%201-1-3l1-5h-3c-7%200-21-4-22-5%200-2-1-2-3%200-2%201-5%201-5-1l2-3c2-2%201-5-1-3-1%201-2%200-3-1l-2-2-2%202c-2%202-4%203-4%200-1-2-7-4-9-2h-4l-3%201c1%201%200%205-1%205v-2l-1-3-4-1a103%20103%200%2000-33%200%20270%20270%200%2000-46-1H71v14m97%201l-2%2010c0%206%200%206%202%205%202-3%207-3%209-2%202%202-1%205-4%205h-2c1%201-1%205-2%205l-1-3c-1-3-2-3-3%200l-1%205c-2%204-3%2010-1%208l4-5%203-2%204-2%202-2c0-2%200-2%201%200%201%201%201%201%201-2s1-5%203-4c2%200%202%201%202%203l3%201%202-1-2-1c-2%200-3-3-2-4v-3c-1-2-1-2-3%200-1%201-2%201-3-1l-2-1-3-1c-3%200-3-1-3-4s1-4%202-3l2-1c1-1%200-1-1-1l-3-2c-1-1-1-1-2%203m-24%2085v16c0%203%202%203%202-1%200-1%200-2%201-1l1%203c0%203%200%204-2%203l-2%201-2%201-2%202c0%202-4%203-5%201s-2-3-4%200h-3c-1-2-5%200-4%203l1%201%201%201v1l1-1%201-1h4l2%204%202%203v-4c0-4%205-7%208-4%203%201%203%201%202%204l-1%205h2c1-6%202-8%206-8h4l1-4c0-3%200-4-1-3-1%204-7-2-7-8%201-4%200-4%208-4%203%200%204%200%203-1h-11v-6l-1-6-1-3-2-5c-2-2-2-2-2%2011m-73%2039c0%208%200%2014%201%2013l3-1c1%201%201%201-1%202h-2l2%201%206%201c4%200%205%202%202%204l-2%202%205-1%206-1%203-2c1-1%202-2%201-3h2c3%203%206%200%204-3-1-4-6-7-7-5-2%201-2%202%200%204v3l-1-1-3-1c-3%200-3%200-1-1s3-4%200-4l1-1c2%200%202-1%201-2-2-1-2-2-1-2v-4c-1-3-1-3-4-2-4%201-13%200-12-1l-1-1-1-4v-4l-1%2014m176-1c-3%201-3%208%200%2010%203%204%207%202%208-2%202-7-3-11-8-8m-18%2013c-2%202-3%206-1%208%204%205%2012%201%2012-5%200-5-7-7-11-3m-30%20159l-2%202-3%202c0%201-1%201-2-1-3-3-6-2-6%204%200%203%200%203%203%203l3-1-2-1-3-1c-1-2%206-1%207%201l4%202c3%200%203%200%203-6l-1-6-1%202M75%20507c-2%202-2%202-3%201%200-1-1-2-3-2h-3v6c0%204%200%205%201%204l2-2%204-2%201-2v2l4%202c3%200%203%200%203-4%201-5-3-7-6-3m104%2042c-2%203-1%207%202%208l3-1h-2l-2-1%202-1%202-1c1-1%201-1%202%201l3%203c2%200%203%201%203%202%201%201%201-1%201-5%200-5%200-6-2-6l-4%202c-2%202-2%202-3%200s-3-3-5-1'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/5ff6fc89bbb556afaaa4a07821e7b853/033fb/1615814968189.jpg" data-vdom-skip="true" data-vdom-cache="true" alt="Detail screen" title="Detail screen" name="images/1615814968189.jpg" data-src="./images/1615814968189.jpg" class="front_image" loading="lazy" srcSet="/acorns/static/5ff6fc89bbb556afaaa4a07821e7b853/e4a55/1615814968189.jpg 256w,
/acorns/static/5ff6fc89bbb556afaaa4a07821e7b853/033fb/1615814968189.jpg 324w" sizes="(max-width: 324px) 100vw, 324px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption ">Detail screen</div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">We’ll use the note <code>_id</code> from the previous screen (home screen) to get full note info. Using <code>get</code> and pass docId as a param.</p>
<p class="xsj_paragraph xsj_paragraph_level_0">And how about a note we’re reading at detail has been deleted from another device then synchronize to the current device? How can we catch this case?</p>
<p class="xsj_paragraph xsj_paragraph_level_0">Checking and finding the current docId in an array of docs have changed at <code>change</code> callback is not a good way.</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:424px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 92.96875%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='372'%3e%3cpath%20d='M140%20135v4c-1%202-1%202%201%202l1-1c-1-1%200-1%201-1l1%201c-1%201%200%201%201%201l3-1h7l1-1%201%201c-1%201%200%201%202%201l3-1c-1-1%200-1%201-1l1%201%203%201%203-1c2-6%202-7%200-7l-2%201%201%201v4l-2-1c-1-1-1-1-1%201l-2-1c0-3-1-3-1-2l-1%202c-1-1-2%200-2%201l-1%201-1-1-1-1c-2%200-2%200-2-2h2c0-2-1-3-2-3-2%200-2%200-2%202v4c-1%201-1%201-2-2-1-4-4-6-4-3l-1%206-1-1-1-1c-2%200-2%200-2-2h2c0-2-1-3-2-3-2%200-2%200-2%202m-81%2052v7h299v-15H59v8m1%200v6h297v-13H60v7m-1%2033v8h110v-17H59v9m1%200v7h108v-15H60v8'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/1bfa1578c2983cddf1a1a03beb6e7b46/1cfa9/1615814968190.png" data-vdom-skip="true" data-vdom-cache="true" alt="change callback giving us a list of docs have been changed" title="change callback giving us a list of docs have been changed" name="images/1615814968190.png" data-src="./images/1615814968190.png" class="front_image" loading="lazy" srcSet="/acorns/static/1bfa1578c2983cddf1a1a03beb6e7b46/6f3f2/1615814968190.png 256w,
/acorns/static/1bfa1578c2983cddf1a1a03beb6e7b46/1cfa9/1615814968190.png 424w" sizes="(max-width: 424px) 100vw, 424px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption ">change callback giving us a list of docs have been changed</div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">So my idea is just to catch the missing error meaning current doc has been deleted then we come back to home.</p>
<div class="xiaoshujiang_code_container"><div data-processed="true" class="xiaoshujiang_pre"><div class="language-js hljs javascript code_linenums xiaoshujiang_code"><ol start="1" class="ol_linenums" style="counter-reset: lines 0;"><li class="li_linenum " date-linenum="1"><span class="li_linenum_before_span li_linenum_before_span_hide">1</span>getDetailNoteFromDb = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="2"><span class="li_linenum_before_span li_linenum_before_span_hide">2</span>    <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">true</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="3"><span class="li_linenum_before_span li_linenum_before_span_hide">3</span>    localNoteDb<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="4"><span class="li_linenum_before_span li_linenum_before_span_hide">4</span>        .get(<span class="hljs-keyword">this</span>.idNote)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="5"><span class="li_linenum_before_span li_linenum_before_span_hide">5</span>        .then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="6"><span class="li_linenum_before_span li_linenum_before_span_hide">6</span>            <span class="hljs-comment">// console.log(TAG, 'localNoteDb get', result)</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="7"><span class="li_linenum_before_span li_linenum_before_span_hide">7</span>            <span class="hljs-keyword">this</span>.setState({<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="8"><span class="li_linenum_before_span li_linenum_before_span_hide">8</span>                <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>,<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="9"><span class="li_linenum_before_span li_linenum_before_span_hide">9</span>                <span class="hljs-attr">detailNote</span>: result<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="10"><span class="li_linenum_before_span li_linenum_before_span_hide">10</span>            })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="11"><span class="li_linenum_before_span li_linenum_before_span_hide">11</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="12"><span class="li_linenum_before_span li_linenum_before_span_hide">12</span>        .catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="13"><span class="li_linenum_before_span li_linenum_before_span_hide">13</span>            <span class="hljs-built_in">console</span>.log(TAG, <span class="hljs-string">'err find list note'</span>, err)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="14"><span class="li_linenum_before_span li_linenum_before_span_hide">14</span>            <span class="hljs-keyword">if</span> (err.message === <span class="hljs-string">'missing'</span>) {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="15"><span class="li_linenum_before_span li_linenum_before_span_hide">15</span>                Toast.show(<span class="hljs-string">'This note has been deleted'</span>)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="16"><span class="li_linenum_before_span li_linenum_before_span_hide">16</span>                <span class="hljs-keyword">this</span>.handleBackPress()<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="17"><span class="li_linenum_before_span li_linenum_before_span_hide">17</span>            } <span class="hljs-keyword">else</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="18"><span class="li_linenum_before_span li_linenum_before_span_hide">18</span>                <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="19"><span class="li_linenum_before_span li_linenum_before_span_hide">19</span>                Toast.show(err.message)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="20"><span class="li_linenum_before_span li_linenum_before_span_hide">20</span>            }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="21"><span class="li_linenum_before_span li_linenum_before_span_hide">21</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="22"><span class="li_linenum_before_span li_linenum_before_span_hide">22</span>}<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li></ol></div></div></div>
<p class="xsj_paragraph xsj_paragraph_level_0">Enabling synchronization at this screen too (although we have done it before at home) because it helps us instantly update the data (if not, we don’t have any trigger to know when data was updated by other devices when we’re locating at this detail screen).</p>
<div class="xiaoshujiang_code_container"><div data-processed="true" class="xiaoshujiang_pre"><div class="language-js hljs javascript code_linenums xiaoshujiang_code"><ol start="1" class="ol_linenums" style="counter-reset: lines 0;"><li class="li_linenum " date-linenum="1"><span class="li_linenum_before_span li_linenum_before_span_hide">1</span>syncDb = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="2"><span class="li_linenum_before_span li_linenum_before_span_hide">2</span>    handlerSync = PouchDB.sync(remoteNoteDb, localNoteDb, {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="3"><span class="li_linenum_before_span li_linenum_before_span_hide">3</span>        <span class="hljs-attr">live</span>: <span class="hljs-literal">true</span>,<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="4"><span class="li_linenum_before_span li_linenum_before_span_hide">4</span>        <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="5"><span class="li_linenum_before_span li_linenum_before_span_hide">5</span>    })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="6"><span class="li_linenum_before_span li_linenum_before_span_hide">6</span>        .on(<span class="hljs-string">'change'</span>, (info) =&gt; {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="7"><span class="li_linenum_before_span li_linenum_before_span_hide">7</span>            <span class="hljs-comment">// console.log(TAG, 'sync onChange', info)</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="8"><span class="li_linenum_before_span li_linenum_before_span_hide">8</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="9"><span class="li_linenum_before_span li_linenum_before_span_hide">9</span>        .on(<span class="hljs-string">'paused'</span>, (err) =&gt; {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="10"><span class="li_linenum_before_span li_linenum_before_span_hide">10</span>            <span class="hljs-comment">// console.log(TAG, 'sync onPaused', err)</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="11"><span class="li_linenum_before_span li_linenum_before_span_hide">11</span>            <span class="hljs-keyword">this</span>.getDetailNoteFromDb()<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="12"><span class="li_linenum_before_span li_linenum_before_span_hide">12</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="13"><span class="li_linenum_before_span li_linenum_before_span_hide">13</span>        .on(<span class="hljs-string">'active'</span>, () =&gt; {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="14"><span class="li_linenum_before_span li_linenum_before_span_hide">14</span>            <span class="hljs-comment">// console.log(TAG, 'sync onActive')</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="15"><span class="li_linenum_before_span li_linenum_before_span_hide">15</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="16"><span class="li_linenum_before_span li_linenum_before_span_hide">16</span>        .on(<span class="hljs-string">'denied'</span>, (err) =&gt; {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="17"><span class="li_linenum_before_span li_linenum_before_span_hide">17</span>            <span class="hljs-comment">// console.log(TAG, 'sync onDenied', err)</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="18"><span class="li_linenum_before_span li_linenum_before_span_hide">18</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="19"><span class="li_linenum_before_span li_linenum_before_span_hide">19</span>        .on(<span class="hljs-string">'complete'</span>, (info) =&gt; {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="20"><span class="li_linenum_before_span li_linenum_before_span_hide">20</span>            <span class="hljs-comment">// console.log(TAG, 'sync onComplete', info)</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="21"><span class="li_linenum_before_span li_linenum_before_span_hide">21</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="22"><span class="li_linenum_before_span li_linenum_before_span_hide">22</span>        .on(<span class="hljs-string">'error'</span>, (err) =&gt; {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="23"><span class="li_linenum_before_span li_linenum_before_span_hide">23</span>            <span class="hljs-comment">// console.log(TAG, 'sync onError', err)</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="24"><span class="li_linenum_before_span li_linenum_before_span_hide">24</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="25"><span class="li_linenum_before_span li_linenum_before_span_hide">25</span>}<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li></ol></div></div></div>
<p class="xsj_paragraph xsj_paragraph_level_0"><strong class="markdown_strong_asterisk">UPDATE NOTE</strong></p>
<p class="xsj_paragraph xsj_paragraph_level_0">At this demo scope, allow user can edit title, image, content.</p>
<p class="xsj_paragraph xsj_paragraph_level_0">First, installing <a href="https://github.com/pouchdb/upsert" class="xsj_link xsj_manu_link">pouchdb-upsert</a> for easier to update the data. If not, you have to put all item properties instead of only fields need to change.</p>
<div class="xiaoshujiang_code_container"><div class="xiaoshujiang_code_title_container"><span class="xiaoshujiang_code_title">Update note</span><span class="xiaoshujiang_code_infos">js&nbsp;&nbsp;&nbsp;&nbsp;32行</span><div style="clear: both;" class="xiaoshujiang_code_clear"></div></div><div data-processed="true" class="xiaoshujiang_pre"><div class="language-js hljs javascript code_linenums xiaoshujiang_code"><ol start="1" class="ol_linenums" style="counter-reset: lines 0;"><li class="li_linenum " date-linenum="1"><span class="li_linenum_before_span li_linenum_before_span_hide">1</span>updateNote = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="2"><span class="li_linenum_before_span li_linenum_before_span_hide">2</span>    <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">true</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="3"><span class="li_linenum_before_span li_linenum_before_span_hide">3</span>    localNoteDb<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="4"><span class="li_linenum_before_span li_linenum_before_span_hide">4</span>        .upsert(<span class="hljs-keyword">this</span>.idNote, doc =&gt; {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="5"><span class="li_linenum_before_span li_linenum_before_span_hide">5</span>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.refTextInputTitle &amp;&amp; <span class="hljs-keyword">this</span>.refTextInputTitle._lastNativeText) {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="6"><span class="li_linenum_before_span li_linenum_before_span_hide">6</span>                doc.title = <span class="hljs-keyword">this</span>.refTextInputTitle._lastNativeText<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="7"><span class="li_linenum_before_span li_linenum_before_span_hide">7</span>            }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="8"><span class="li_linenum_before_span li_linenum_before_span_hide">8</span>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.newImage) {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="9"><span class="li_linenum_before_span li_linenum_before_span_hide">9</span>                doc.img = <span class="hljs-keyword">this</span>.state.newImage<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="10"><span class="li_linenum_before_span li_linenum_before_span_hide">10</span>            }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="11"><span class="li_linenum_before_span li_linenum_before_span_hide">11</span>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.refTextInputContent &amp;&amp; <span class="hljs-keyword">this</span>.refTextInputContent._lastNativeText) {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="12"><span class="li_linenum_before_span li_linenum_before_span_hide">12</span>                doc.content = <span class="hljs-keyword">this</span>.refTextInputContent._lastNativeText<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="13"><span class="li_linenum_before_span li_linenum_before_span_hide">13</span>            }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="14"><span class="li_linenum_before_span li_linenum_before_span_hide">14</span>            doc.updated_at = moment().unix()<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="15"><span class="li_linenum_before_span li_linenum_before_span_hide">15</span>            <span class="hljs-keyword">return</span> doc<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="16"><span class="li_linenum_before_span li_linenum_before_span_hide">16</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="17"><span class="li_linenum_before_span li_linenum_before_span_hide">17</span>        .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="18"><span class="li_linenum_before_span li_linenum_before_span_hide">18</span>            <span class="hljs-keyword">if</span> (response.updated) {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="19"><span class="li_linenum_before_span li_linenum_before_span_hide">19</span>                Toast.show(<span class="hljs-string">'Updated'</span>)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="20"><span class="li_linenum_before_span li_linenum_before_span_hide">20</span>                <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="21"><span class="li_linenum_before_span li_linenum_before_span_hide">21</span>            } <span class="hljs-keyword">else</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="22"><span class="li_linenum_before_span li_linenum_before_span_hide">22</span>                Toast.show(<span class="hljs-string">'Update fail, please try again'</span>)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="23"><span class="li_linenum_before_span li_linenum_before_span_hide">23</span>                <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="24"><span class="li_linenum_before_span li_linenum_before_span_hide">24</span>            }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="25"><span class="li_linenum_before_span li_linenum_before_span_hide">25</span><span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="26"><span class="li_linenum_before_span li_linenum_before_span_hide">26</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="27"><span class="li_linenum_before_span li_linenum_before_span_hide">27</span>        .catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="28"><span class="li_linenum_before_span li_linenum_before_span_hide">28</span>            <span class="hljs-built_in">console</span>.log(TAG, err)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="29"><span class="li_linenum_before_span li_linenum_before_span_hide">29</span>            Toast.show(err.message)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="30"><span class="li_linenum_before_span li_linenum_before_span_hide">30</span>            <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="31"><span class="li_linenum_before_span li_linenum_before_span_hide">31</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="32"><span class="li_linenum_before_span li_linenum_before_span_hide">32</span>}<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li></ol></div></div></div>
<p class="xsj_paragraph xsj_paragraph_level_0"><strong class="markdown_strong_asterisk">DELETE NOTE</strong></p>
<p class="xsj_paragraph xsj_paragraph_level_0">Deletes the document. <code>doc</code> is required to be a document with at least an <code>_id</code> and a <code>_rev</code>property. Sending the full document will work as well.</p>
<div class="xiaoshujiang_code_container"><div data-processed="true" class="xiaoshujiang_pre"><div class="language-js hljs javascript code_linenums xiaoshujiang_code"><ol start="1" class="ol_linenums" style="counter-reset: lines 0;"><li class="li_linenum " date-linenum="1"><span class="li_linenum_before_span li_linenum_before_span_hide">1</span>deleteNote = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="2"><span class="li_linenum_before_span li_linenum_before_span_hide">2</span>    <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">true</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="3"><span class="li_linenum_before_span li_linenum_before_span_hide">3</span>    localNoteDb.remove(<span class="hljs-keyword">this</span>.idNote, <span class="hljs-keyword">this</span>.state.detailNote._rev)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="4"><span class="li_linenum_before_span li_linenum_before_span_hide">4</span>        .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="5"><span class="li_linenum_before_span li_linenum_before_span_hide">5</span>            <span class="hljs-keyword">if</span> (response.ok) {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="6"><span class="li_linenum_before_span li_linenum_before_span_hide">6</span>                <span class="hljs-keyword">this</span>.handleBackPress()<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="7"><span class="li_linenum_before_span li_linenum_before_span_hide">7</span>            } <span class="hljs-keyword">else</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="8"><span class="li_linenum_before_span li_linenum_before_span_hide">8</span>                Toast.show(<span class="hljs-string">'Delete note fail'</span>)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="9"><span class="li_linenum_before_span li_linenum_before_span_hide">9</span>                <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="10"><span class="li_linenum_before_span li_linenum_before_span_hide">10</span>            }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="11"><span class="li_linenum_before_span li_linenum_before_span_hide">11</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="12"><span class="li_linenum_before_span li_linenum_before_span_hide">12</span>        .catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="13"><span class="li_linenum_before_span li_linenum_before_span_hide">13</span>            <span class="hljs-built_in">console</span>.log(TAG, err)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="14"><span class="li_linenum_before_span li_linenum_before_span_hide">14</span>            Toast.show(err.message)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="15"><span class="li_linenum_before_span li_linenum_before_span_hide">15</span>            <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>})<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="16"><span class="li_linenum_before_span li_linenum_before_span_hide">16</span>        })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="17"><span class="li_linenum_before_span li_linenum_before_span_hide">17</span>}<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li></ol></div></div></div>
<p class="xsj_paragraph xsj_paragraph_level_0">After deleting successfully, go back to home screen and reload the list.</p>
<p class="xsj_paragraph xsj_paragraph_level_0"><strong class="markdown_strong_asterisk">Designing Add New Note screen</strong></p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:324px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 177.734375%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='711'%3e%3cpath%20d='M0%2041v40h401V0H0v41M156%206l-1%209c0%209%200%209%207%208h3V6l-5-1-4%201m32%200v3c-5-2-7-2-10%201s-3%204-2%206v5c0%201%201%202%202%201h12V12c-1-3-1-3%201-3%201%201%202-1%200-3h-3m50%208v9h4c4%200%204%200%203-3%200-3%202-6%205-6l2-1c0-2-5-7-6-7l-5-1h-3v9M23%207l-3%201c-4-1-6%202-6%206%200%205%201%206%207%206%204%200%205%200%205-2%201-3%200-9-1-9l-1-2h-1m281%201l-1%207v7h10c9%200%209%200%209-2l1-4v-3l-1-4c1-2-17-3-18-1m-125%203c-4%204-2%209%203%209%204%200%206-1%206-4%202-5-5-9-9-5M24%2049c-3%202-5%205-5%206s10%2010%2011%209c1%200%200-2-3-4l-3-4h8l8-1c0-2-2-2-8-2h-8l3-4c4-3%204-5%202-5l-5%205m159-2l-1%202c0%201-1%202-3%202-4%201-5%205-4%208s3%204%206%203c3%200%203%200%203-8s0-9-1-7m10%202c0%202%200%203-2%202s-5%203-5%206c0%204%203%206%207%205h3v-8l-1-7-2%202M23%20105v6c0%204%201%204%203%205%203%200%203%200%203-4s2-4%202%200c1%205%203%205%203%201l1-4%201%204c0%203%202%204%203%201l2%201c1%202%204%202%207%200%201-1%202%200%201%202-1%201%201%202%204%202%202%200%203-1%203-6%200-6%200-6-3-6l-4%201c0%202-2%203-2%201%201-2-6-2-7-1%200%202%200%202-2%200l-7-1c-4%201-6%200-5-1l-1-1h-2m166%2070l-2%204-2%202c-2%200-3-1-3-2%200-2-3-4-7-4s-7%202-7%204c0%203-1%203-3%200-1-4-8-4-12%200l-4%203c-3%200-4%205-4%2030l1%2026c1%202%202%202%2020%202s20%200%2024%202c6%203%2016%203%2022%200%203-2%206-2%2014-2l12-1c2-2%201-62-1-64s-45-2-48%200m3%203l-1%204v3h-21l-20%201-1%203v4h17c17%200%2018%200%2022-2%207-4%2018-4%2024-1%204%203%206%203%2014%203h9v-15l-22-1-21%201m2%201l-1%204%201%204h20v-4c0-4-1-5-10-5l-10%201m23%201v8l8%201h8v-5c0-5-1-6-10-6-4%200-5%200-6%202m-27%2014c-17%2010-18%2035%200%2044%2021%2010%2043-12%2032-33-5-11-21-17-32-11m3%205c-21%2010-9%2041%2014%2035%2013-4%2017-22%207-31-6-6-13-7-21-4M25%20408c-4%206%200%2012%206%2010h4c2%202%205-1%205-4-1-6-7-7-8-1%200%202-4%204-5%202-2-2-1-5%202-6%204%200%203-2%200-3l-4%202m25%200c-1%201-2%202-5%201h-4v4c0%204%200%205%202%205l1-3%201-3%201%203c0%204%203%204%203%200l1-3v3c0%202%201%203%202%203l1-3v-3l1%202c1%205%208%206%208%201l1-2v2c0%204%202%204%202%200%201-4%203-4%203%200l1%203%201-3%201-3%201%203c0%202%200%203%202%203l1-2v-4c1-2%200-5-2-5l-2%202c0%202%200%202-1%201-2-2-7-1-7%201h-2c-2-2-4-2-6-1-1%201-1%201-2-1-1-4-2-4-3-1'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/d4ad4b37e2bb6836484c523ce2ea03dc/033fb/1615814968191.jpg" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1615814968191.jpg" data-src="./images/1615814968191.jpg" class="front_image" loading="lazy" srcSet="/acorns/static/d4ad4b37e2bb6836484c523ce2ea03dc/e4a55/1615814968191.jpg 256w,
/acorns/static/d4ad4b37e2bb6836484c523ce2ea03dc/033fb/1615814968191.jpg 324w" sizes="(max-width: 324px) 100vw, 324px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">Creating a new note will create an item in the DB.</p>
<p class="xsj_paragraph xsj_paragraph_level_0"></p><div class="story_image_container story_block_image"><div class="story_image"><div class="gatsby-wrapper-image" style="display:inline-block;max-width: 100%;width:1024px; margin-left: auto; margin-right: auto;position:relative;"><div style="width:100%;display:block;padding-bottom: 21.875%;"></div><img class="background_image" src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='88'%3e%3cpath%20d='M133%2020l-1%205v5h23V19h-11l-11%201m232%205v5h33V19h-33v6M87%2043v12h288V45h13l12-1c0-1-312-2-313-1m1%206v4h285v-8H88v4m225-1l1%201a188%20188%200%200033%200h17c3-1-2-2-19-2l-19%201h-13m7%2010c0%201%2040%201%2041-1h-17l-12-1c-9%200-12%201-12%202M86%2077v5h289V72H86v5m1%200v4h287v-8H87v4'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e" style="position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"><img src="/acorns/static/fddf9dbaf9fc381ae5d447c51c93bf22/2bef9/1615814968209.png" data-vdom-skip="true" data-vdom-cache="true" alt title name="images/1615814968209.png" data-src="./images/1615814968209.png" class="front_image" loading="lazy" srcSet="/acorns/static/fddf9dbaf9fc381ae5d447c51c93bf22/6f3f2/1615814968209.png 256w,
/acorns/static/fddf9dbaf9fc381ae5d447c51c93bf22/01e7c/1615814968209.png 512w,
/acorns/static/fddf9dbaf9fc381ae5d447c51c93bf22/2bef9/1615814968209.png 1024w,
/acorns/static/fddf9dbaf9fc381ae5d447c51c93bf22/71c1d/1615814968209.png 1536w,
/acorns/static/fddf9dbaf9fc381ae5d447c51c93bf22/f4fb1/1615814968209.png 1766w" sizes="(max-width: 1024px) 100vw, 1024px" data-action="zoom" style="max-width: 100%;position: absolute;top:0;left:0;width: 100%;height:100%;object-fit: cover;object-position: center;"></div><br><div class="story_image_caption story_image_blank_caption"></div></div></div><p></p>
<p class="xsj_paragraph xsj_paragraph_level_0">Image (if exist) will be stored with format Base64 encode (<a href="https://github.com/react-native-community/react-native-image-picker" class="xsj_link xsj_manu_link">react-native-image-picker</a> supports exporting this format).</p>
<p class="xsj_paragraph xsj_paragraph_level_0">Each item can’t larger than 2.1MB as I said, so we should constraint the maximum image size is 500x500px.</p>
<div class="xiaoshujiang_code_container"><div data-processed="true" class="xiaoshujiang_pre"><div class="language-js hljs javascript code_linenums xiaoshujiang_code"><ol start="1" class="ol_linenums" style="counter-reset: lines 0;"><li class="li_linenum " date-linenum="1"><span class="li_linenum_before_span li_linenum_before_span_hide">1</span>onSaveNotePress = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="2"><span class="li_linenum_before_span li_linenum_before_span_hide">2</span>  Keyboard.dismiss()<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="3"><span class="li_linenum_before_span li_linenum_before_span_hide">3</span>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.refTextInputTitle &amp;&amp; <span class="hljs-keyword">this</span>.refTextInputTitle._lastNativeText &amp;&amp; <span class="hljs-keyword">this</span>.refTextInputContent &amp;&amp; <span class="hljs-keyword">this</span>.refTextInputContent._lastNativeText) {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="4"><span class="li_linenum_before_span li_linenum_before_span_hide">4</span>    <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">true</span> })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="5"><span class="li_linenum_before_span li_linenum_before_span_hide">5</span>    <span class="hljs-keyword">let</span> newNote = {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="6"><span class="li_linenum_before_span li_linenum_before_span_hide">6</span>      <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.refTextInputTitle._lastNativeText,<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="7"><span class="li_linenum_before_span li_linenum_before_span_hide">7</span>      <span class="hljs-attr">updated_at</span>: moment().unix(),<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="8"><span class="li_linenum_before_span li_linenum_before_span_hide">8</span>      <span class="hljs-attr">content</span>: <span class="hljs-keyword">this</span>.refTextInputContent._lastNativeText,<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="9"><span class="li_linenum_before_span li_linenum_before_span_hide">9</span>      <span class="hljs-attr">img</span>: <span class="hljs-keyword">this</span>.state.image<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="10"><span class="li_linenum_before_span li_linenum_before_span_hide">10</span>    }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="11"><span class="li_linenum_before_span li_linenum_before_span_hide">11</span>    localNoteDb<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="12"><span class="li_linenum_before_span li_linenum_before_span_hide">12</span>      .post(newNote)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="13"><span class="li_linenum_before_span li_linenum_before_span_hide">13</span>      .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="14"><span class="li_linenum_before_span li_linenum_before_span_hide">14</span>        <span class="hljs-keyword">if</span> (response.ok) {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="15"><span class="li_linenum_before_span li_linenum_before_span_hide">15</span>          Toast.show(<span class="hljs-string">'Add new note success'</span>)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="16"><span class="li_linenum_before_span li_linenum_before_span_hide">16</span>          <span class="hljs-keyword">this</span>.handleBackPress()<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="17"><span class="li_linenum_before_span li_linenum_before_span_hide">17</span>        } <span class="hljs-keyword">else</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="18"><span class="li_linenum_before_span li_linenum_before_span_hide">18</span>          Toast.show(<span class="hljs-string">'Add new note fail'</span>)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="19"><span class="li_linenum_before_span li_linenum_before_span_hide">19</span>          <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span> })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="20"><span class="li_linenum_before_span li_linenum_before_span_hide">20</span>        }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="21"><span class="li_linenum_before_span li_linenum_before_span_hide">21</span>      })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="22"><span class="li_linenum_before_span li_linenum_before_span_hide">22</span>      .catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="23"><span class="li_linenum_before_span li_linenum_before_span_hide">23</span>        <span class="hljs-built_in">console</span>.log(TAG, err)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="24"><span class="li_linenum_before_span li_linenum_before_span_hide">24</span>        Toast.show(err.message)<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="25"><span class="li_linenum_before_span li_linenum_before_span_hide">25</span>        <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span> })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="26"><span class="li_linenum_before_span li_linenum_before_span_hide">26</span>      })<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="27"><span class="li_linenum_before_span li_linenum_before_span_hide">27</span>  }<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li><li class="li_linenum " date-linenum="28"><span class="li_linenum_before_span li_linenum_before_span_hide">28</span>}<span style="user-select:none;display:none;">&nbsp;</span><br class="code_line_break_hack_br"><hr class="code_line_break_hack_hr code_line_break_hack" style="margin:0;border:0;border-top:0;border-bottom:0;"></li></ol></div></div></div>
<p class="xsj_paragraph xsj_paragraph_level_0">After creating successfully, go back to home screen and reload the list.</p>
<h2 class="xsj_heading_hash xsj_heading xsj_heading_h2" id="conclusion_9"><div class="xiaoshujiang_element xsj_anchor">
  <a name="conclusion_9" class="blank_anchor_name"></a><a id="conclusion_9" class="blank_anchor_id"></a><a name="conclusion" class="blank_anchor_name"></a><a id="conclusion" class="blank_anchor_id"></a>
</div>
<span class="xsj_heading_content">Conclusion</span></h2>
<p class="xsj_paragraph xsj_paragraph_level_0">The scope of this demo only explores the commonly used basic things of PouchDB. It has many other interesting things waiting for you to discover. Refer the docs to get more features PouchDB can help.</p>
<p class="xsj_paragraph xsj_paragraph_level_0">If you have any questions or issues with the deployment, leaving a comment and we will work together to find a solution</p>
<p class="xsj_paragraph xsj_paragraph_level_0">And of course, the source code is always available</p>
</div>

</div></div></section><strong>Tagged with <span><style data-emotion-css="1it6e0j">.css-1it6e0j{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary,#33e);}.css-1it6e0j:hover{color:var(--theme-ui-colors-secondary,#119);}</style><a class="css-1it6e0j" href="/acorns/tags/文章">文章</a><span> | </span></span><span><a class="css-1it6e0j" href="/acorns/tags/转载">转载</a><span> | </span></span><span><a class="css-1it6e0j" href="/acorns/tags/技术">技术</a></span></strong><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-k008qs"><style data-emotion-css="1eziwv">.css-1eziwv{-webkit-flex:1;-ms-flex:1;flex:1;text-align:left;}</style><div class="css-1eziwv"><a class="css-1it6e0j" href="/acorns/https:/mediumcom/react-native-motion/transition-challenge-9bc9fdef56c7"><h4 class="css-1tr4euk"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" style="vertical-align:sub" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></svg>Previous</h4><span>Animated Transition in React Native!</span></a></div><style data-emotion-css="1bge839">.css-1bge839{-webkit-flex:1;-ms-flex:1;flex:1;text-align:right;}</style><div class="css-1bge839"><a class="css-1it6e0j" href="/acorns/https:/blogcsdnnet/aiynmimi/article/details/51028499"><h4 class="css-1tr4euk">Next<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" style="vertical-align:sub" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></svg></h4><span>Android SDK目录及版本号区别</span></a></div></div></div></div></div><style data-emotion-css="lvzlb4">.css-lvzlb4{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:0;background-color:var(--theme-ui-colors-background,#fff);border-top:1px solid;width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:16px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media screen and (min-width:650px){.css-lvzlb4{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><style data-emotion-css="1t4nmqc">.css-1t4nmqc{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:0;background-color:var(--theme-ui-colors-background,#fff);border-top:1px solid;width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:16px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media screen and (min-width:650px){.css-1t4nmqc{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><div class="css-1t4nmqc"><style data-emotion-css="kfpyh1">.css-kfpyh1{font-size:20px;}@media screen and (min-width:650px){.css-kfpyh1{font-size:24px;}}</style><div class="css-kfpyh1"><span class="css-14uqj98">Time Flies, No Time for Nuts <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="css-11lk46i" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M422.625 18.28c-24.68.13-51.932 15.455-74.094 36.907 1.868 1.036 3.742 2.07 5.626 3.157 8.05 4.642 15.615 9.363 22.72 14.125 25.19-9.583 55.47-14.465 103.437-2.97-12.036-37.07-33.633-51.345-57.688-51.22zM237.78 40.22l28.97 94.25c12.57 6.443 24.827 13.41 36.813 20.843l-36.625-111.97c-8.476-1.68-16.657-2.662-24.563-3-1.54-.065-3.074-.108-4.594-.124zm-19.218 1.124c-1.602.206-3.202.427-4.78.687-8.815 1.454-17.338 3.755-25.595 6.876l15.688 58.625c13.62 4.75 26.922 10.064 39.906 15.907l-25.218-82.093zm69.875 7.593l40.157 122.876c15.922 11.124 31.32 23.128 46.25 35.906L325.906 64.374c-13.092-6.527-25.568-11.643-37.47-15.438zm-117.5 7.844c-14.657 7.857-28.523 18.348-41.875 31.095 18.42 3.334 36.298 7.632 53.657 12.813L170.937 56.78zm179.25 20.907l53.282 155.97c10.798 10.382 21.322 21.187 31.624 32.374.395-1.174.75-2.332 1.125-3.5L379.843 97.407c-8.84-6.63-18.706-13.185-29.656-19.72zM136.595 108.25c-17.05 11.436-32.43 27.876-45.344 50.22-42.303 73.19-61.83 198.325-24.53 265.717l-.064-.062c.752 23.392-7.597 45.63-17.812 67.594 27.268-12.192 54.897-17.815 82.687-20.783l-.468-.343c87.895 19.01 212.87-49.42 260.688-132.156 13.547-23.44 20.606-46.14 22.28-67.72-77.218-81.572-166.868-139.912-277.436-162.468zm271.469 14L444.188 228c2.638-20.573.96-39.855-5.688-58.25-5.856-16.202-15.717-32.01-30.438-47.5z"></path></svg></span></div><style data-emotion-css="7ipau9">.css-7ipau9{font-family:oswald,sans-serif;font-size:14px;text-align:center;}@media screen and (min-width:650px){.css-7ipau9{font-size:16px;text-align:right;}}</style><div class="css-7ipau9"><div>Copyright © 2020 <!-- -->suziwen</div><div>Build with  <style data-emotion-css="ksfbmy">.css-ksfbmy{color:var(--theme-ui-colors-primary,#33e);}.css-ksfbmy:hover{color:var(--theme-ui-colors-secondary,#119);}</style><a href="https://www.gatsbyjs.com/" target="_blank" rel="noopener noreferrer" class="css-ksfbmy">Gatsbyjs</a>  and  <a href="https://www.github.com/suziwen/gatsby-theme-sculpting" target="_blank" rel="noopener noreferrer" class="css-ksfbmy">Sculpting</a> theme</div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script src="/acorns/libs/zoom/zoom-vanilla.min.js"></script><script>
                  var _hmt = _hmt || [];
                  (function() {
                      var hm = document.createElement("script");
                      hm.src = "//hm.baidu.com/hm.js?c02140dc523f5a309a2717a9a2bac552";
                      var s = document.getElementsByTagName("script")[0]; 
                      s.parentNode.insertBefore(hm, s);
                  })();
              </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/https:/mediumcom/@duytq94/making-a-simple-note-app-with-pouchdb-in-react-native-ec4810b18a42";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-48d6d113cdbd8eaeb1e6.js"],"app":["/app-769f74fe8327c9fb4428.js"],"component---node-modules-suziwen-gatsby-theme-sculpting-src-pages-404-js":["/component---node-modules-suziwen-gatsby-theme-sculpting-src-pages-404-js-c8b71f0b9c706e216a1d.js"],"component---node-modules-suziwen-gatsby-theme-sculpting-src-pages-search-js":["/component---node-modules-suziwen-gatsby-theme-sculpting-src-pages-search-js-e5540d250449237db552.js"],"component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-archive-js":["/component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-archive-js-3371becbe3b208851cf3.js"],"component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-blog-list-js":["/component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-blog-list-js-6af4602795e2f8374acc.js"],"component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-blog-post-js":["/component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-blog-post-js-fb9d310599f1bd239803.js"],"component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-tag-js":["/component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-tag-js-26b309cc8838d6e433aa.js"]};/*]]>*/</script><script src="/acorns/polyfill-48d6d113cdbd8eaeb1e6.js" nomodule=""></script><script src="/acorns/component---node-modules-suziwen-gatsby-theme-sculpting-src-templates-template-blog-post-js-fb9d310599f1bd239803.js" async=""></script><script src="/acorns/d24d3e064b601c3fa92397aa9f8c5e3fc3365436-b3b52e1b95113f3f815e.js" async=""></script><script src="/acorns/05d954cf-b0068c1aacfd08ef52dc.js" async=""></script><script src="/acorns/41aca86e-8b5629aa189eae61d7b0.js" async=""></script><script src="/acorns/app-769f74fe8327c9fb4428.js" async=""></script><script src="/acorns/252f366e-a013f1a16a738605ba7c.js" async=""></script><script src="/acorns/545f34e4-5287ae6acbc1289e5dd0.js" async=""></script><script src="/acorns/framework-29ba174b433dc5858bed.js" async=""></script><script src="/acorns/webpack-runtime-b733388348fff5eacca1.js" async=""></script></body></html>